### **8. Troubleshooting Helm**

When working with Helm in production or during the CKA exam, troubleshooting skills can save valuable time. Here’s how to diagnose and fix common issues.

#### **8.1 Using `--dry-run` and `--debug`**

* **Purpose**: Test a Helm install or upgrade without actually deploying resources.

```bash
helm install myapp ./mychart --dry-run --debug
```

* **`--dry-run`**: Simulates the action without making changes.
* **`--debug`**: Shows detailed output, including rendered manifests and API requests.

#### **8.2 Viewing Rendered Manifests Before Install**

* **Purpose**: See the exact Kubernetes YAML that Helm will apply.

```bash
helm template myapp ./mychart > output.yaml
```

* **Use case**: Allows you to inspect YAML for errors before applying it.

#### **8.3 Common Errors and Solutions**

**Error**: `Error: Chart.yaml file is missing`

* **Cause**: You are in a directory that isn’t a valid Helm chart.
* **Solution**: Ensure `Chart.yaml` exists or run `helm create` to generate one.

**Error**: `Error: repository name (xyz) not found`

* **Cause**: The Helm repo hasn’t been added.
* **Solution**: Add the repo first:

```bash
helm repo add xyz https://example.com/charts
```

**Error**: `Error: INSTALLATION FAILED: cannot re-use a name that is still in use`

* **Cause**: A release with the same name exists.
* **Solution**: Either uninstall the existing release or use a different name.

```bash
helm uninstall myapp
```

**Error**: `values don't match schema` or `invalid YAML`

* **Cause**: Mistake in `values.yaml` formatting.
* **Solution**: Validate YAML with:

```bash
yamllint values.yaml
```

#### **Exam Tip**

In the CKA exam, always run `helm install` with `--dry-run --debug` first. This saves you from wasting time deleting broken resources.
