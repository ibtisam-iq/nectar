<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Nectar is a living engineering knowledge system where I document how I reason about infrastructure and distributed systems in production. It focuses on understanding why systems behave the way they do, exploring trade-offs, failure modes, and real-world constraints ‚Äî not just listing tools or tutorials."><meta name=author content="Muhammad Ibtisam"><link href=https://nectar.ibtisam-iq.com/containers-orchestration/docker-compose/JavaSpringBoot-MySQL/ rel=canonical><link href=../Compose/ rel=prev><link href=../Nodejs/ rel=next><link rel=icon href=../../../docs/images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Java Spring Boot with MySQL - Nectar</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../docs/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=Nectar class="md-header__button md-logo" aria-label=Nectar data-md-component=logo> <img src=../../../docs/images/favicon.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Nectar </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Java Spring Boot with MySQL </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibtisam-iq/nectar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ibtisam-iq/nectar </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Nectar class="md-nav__button md-logo" aria-label=Nectar data-md-component=logo> <img src=../../../docs/images/favicon.svg alt=logo> </a> Nectar </label> <div class=md-nav__source> <a href=https://github.com/ibtisam-iq/nectar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ibtisam-iq/nectar </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Containers & Orchestration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Containers & Orchestration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Docker Compose </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Docker Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Compose/ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../compose.yml class=md-nav__link> <span class=md-ellipsis> Compose Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Java Spring Boot with MySQL </span> </a> </li> <li class=md-nav__item> <a href=../Nodejs/ class=md-nav__link> <span class=md-ellipsis> Node.js Application </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../kubernetes/ class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../helm/ class=md-nav__link> <span class=md-ellipsis> Helm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../kustomize/ class=md-nav__link> <span class=md-ellipsis> Kustomize </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../containerd/ class=md-nav__link> <span class=md-ellipsis> Containerd </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../delivery/git/gitCheatSheet/ class=md-nav__link> <span class=md-ellipsis> CI/CD & Software Delivery </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../cloud-infrastructure/aws/introduction/ class=md-nav__link> <span class=md-ellipsis> Cloud & Infrastructure </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../servers/ class=md-nav__link> <span class=md-ellipsis> Servers & Runtime Systems </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../observability-security/trivy/Trivy/ class=md-nav__link> <span class=md-ellipsis> Observability & Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../operations/ class=md-nav__link> <span class=md-ellipsis> Operations & Self-Managed Systems </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../scratchpad/ class=md-nav__link> <span class=md-ellipsis> Engineering Scratchpad </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../technical-grounding/ class=md-nav__link> <span class=md-ellipsis> Technical Grounding </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../docker/ class=md-path__link> <span class=md-ellipsis> Containers & Orchestration </span> </a> </li> <li class=md-path__item> <a href=../Compose/ class=md-path__link> <span class=md-ellipsis> Docker Compose </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h2 id=important-directives>Important Directives<a class=headerlink href=#important-directives title="Link to this section">&para;</a></h2> <p>When writing a Docker Compose file for a Java-based full-stack application that uses MySQL, you should include the following important directives:</p> <p>1Ô∏è‚É£ Define Compose Version Specify the Compose file format version at the top:</p> <p>yaml Copy Edit version: '3.8' Use the latest stable version for better compatibility.</p> <p>2Ô∏è‚É£ MySQL Service (Database Layer) Define the image version explicitly (mysql:8.0). Set up environment variables (root password, database name, user, and password). Mount persistent volumes to avoid data loss. Define a healthcheck to ensure MySQL is ready before dependent services start. yaml Copy Edit services: mysql: image: mysql:8.0 container_name: mysql restart: unless-stopped environment: MYSQL_ROOT_PASSWORD: root_password MYSQL_DATABASE: app_db MYSQL_USER: app_user MYSQL_PASSWORD: app_password ports: - "3306:3306" volumes: - mysql_data:/var/lib/mysql networks: - app-network healthcheck: test: ["CMD", "mysqladmin", "ping", "-h", "localhost"] interval: 10s timeout: 5s retries: 3 3Ô∏è‚É£ Backend Service (Java Spring Boot / Jakarta EE) Use build: . if the Dockerfile is in the same directory. Pass environment variables for database connectivity. Use depends_on to ensure MySQL starts first. yaml Copy Edit backend: build: ./backend container_name: backend restart: unless-stopped environment: SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/app_db SPRING_DATASOURCE_USERNAME: app_user SPRING_DATASOURCE_PASSWORD: app_password ports: - "8080:8080" depends_on: mysql: condition: service_healthy networks: - app-network 4Ô∏è‚É£ Frontend Service (React / Angular / Vue) Use an NGINX container for serving static frontend files. Expose port 80 for web access. yaml Copy Edit frontend: build: ./frontend container_name: frontend restart: unless-stopped ports: - "80:80" networks: - app-network depends_on: - backend 5Ô∏è‚É£ Define Network &amp; Volumes Use a custom network for container communication. Define persistent volume for MySQL. yaml Copy Edit networks: app-network: driver: bridge</p> <p>volumes: mysql_data: Key Takeaways: ‚úî Define dependencies using depends_on with condition: service_healthy for MySQL. ‚úî Use volumes for MySQL to persist data. ‚úî Pass environment variables for database configuration in the backend. ‚úî Use Nginx for serving frontend applications efficiently.</p> <hr> <p>üîπ Are Environment Keys Fixed for the Backend Service? Unlike MySQL, where the environment keys (MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, etc.) are fixed because they are defined by the MySQL Docker image, the backend service environment variables are NOT fixed.</p> <p>‚úÖ Why? The keys (variable names) depend on the backend framework (Spring Boot, Quarkus, etc.). The values depend on your database configuration and credentials. For Spring Boot, the typical database-related environment variables are:</p> <p>yaml Copy Edit SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/app_db SPRING_DATASOURCE_USERNAME: app_user SPRING_DATASOURCE_PASSWORD: app_password These are Spring Boot-specific variables that tell the application how to connect to MySQL.</p> <p>üîπ How Can I Know Which Variables to Use? Official Documentation</p> <p>If you‚Äôre using Spring Boot, check the official Spring Boot properties. If you‚Äôre using Jakarta EE, check the framework‚Äôs documentation. Your Application's application.properties or application.yml File</p> <p>If your project contains a file like this: properties Copy Edit spring.datasource.url=jdbc:mysql://localhost:3306/app_db spring.datasource.username=app_user spring.datasource.password=app_password Then the corresponding environment variables would be: yaml Copy Edit SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/app_db SPRING_DATASOURCE_USERNAME: app_user SPRING_DATASOURCE_PASSWORD: app_password Check Your Codebase</p> <p>If your backend service retrieves configurations like this: java Copy Edit @Value("${DB_HOST}") private String databaseHost; Then you should define DB_HOST in docker-compose.yml. üîπ What Happens If You Skip These Variables? If your backend doesn‚Äôt have a default database configuration, the app won‚Äôt know how to connect to MySQL and may crash with errors like: pgsql Copy Edit Could not get JDBC Connection: Access denied for user If defaults exist in application.properties, the app will use them instead (but it might not work if they reference localhost instead of mysql inside Docker). üîπ Final Answer ‚úî MySQL environment keys are fixed (defined by the MySQL image). ‚úî Backend environment keys are NOT fixed (they depend on your application). ‚úî To find the correct variables, check:</p> <p>Your backend framework‚Äôs documentation Your application.properties or application.yml Your codebase for @Value("${VAR_NAME}") annotations</p> <hr> <p><code>src/main/resources/application.properties</code></p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1>spring.application.name<span class=o>=</span>bankapp
</span><span id=__span-0-2><span class=c1># MySQL Database configuration</span>
</span><span id=__span-0-3>spring.datasource.url<span class=o>=</span>jdbc:mysql://localhost:3306/bankappdb?useSSL<span class=o>=</span>false<span class=p>&amp;</span><span class=nv>serverTimezone</span><span class=o>=</span>UTC
</span><span id=__span-0-4>spring.datasource.username<span class=o>=</span>ibtisam
</span><span id=__span-0-5>spring.datasource.password<span class=o>=</span>Ibtisam
</span><span id=__span-0-6>spring.datasource.driver-class-name<span class=o>=</span>com.mysql.cj.jdbc.Driver
</span><span id=__span-0-7>
</span><span id=__span-0-8><span class=c1># JPA &amp; Hibernate configuration</span>
</span><span id=__span-0-9>spring.jpa.hibernate.ddl-auto<span class=o>=</span>update
</span><span id=__span-0-10>spring.jpa.properties.hibernate.dialect<span class=o>=</span>org.hibernate.dialect.MySQL8Dialect
</span><span id=__span-0-11>spring.jpa.show-sql<span class=o>=</span><span class=nb>true</span>
</span></code></pre></div> üîπ Extracting Environment Variables from application.properties Based on your application.properties, here are the corresponding environment variables you should define in your Docker Compose file under the backend service:</p> <p>yaml Copy Edit backend: build: ./backend container_name: backend restart: unless-stopped environment: SPRING_APPLICATION_NAME: bankapp SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC SPRING_DATASOURCE_USERNAME: ibtisam SPRING_DATASOURCE_PASSWORD: Ibtisam SPRING_DATASOURCE_DRIVER_CLASS_NAME: com.mysql.cj.jdbc.Driver SPRING_JPA_HIBERNATE_DDL_AUTO: update SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT: org.hibernate.dialect.MySQL8Dialect SPRING_JPA_SHOW_SQL: "true" ports: - "8080:8080" depends_on: mysql: condition: service_healthy networks: - app-network üîπ Key Adjustments for Docker MySQL Connection (spring.datasource.url)</p> <p>The original value is: bash Copy Edit jdbc:mysql://localhost:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC In Docker, localhost is incorrect because MySQL runs in a separate container. Instead, use the service name (mysql) as the hostname: bash Copy Edit jdbc:mysql://mysql:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC Exposing Sensitive Information</p> <p>Avoid hardcoding credentials (ibtisam / Ibtisam). Instead, use a .env file (optional but recommended). Handling hibernate.dialect &amp; ddl-auto</p> <p>These settings ensure the database structure is automatically updated. üîπ What Happens If You Skip These Variables? Variable Effect if Missing SPRING_DATASOURCE_URL Backend won't connect to MySQL. SPRING_DATASOURCE_USERNAME/PASSWORD App can't authenticate with MySQL. SPRING_DATASOURCE_DRIVER_CLASS_NAME Java won't load the MySQL driver (may use default). SPRING_JPA_HIBERNATE_DDL_AUTO Table creation might fail, or data might not persist. SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT SQL queries might not be optimized for MySQL. SPRING_JPA_SHOW_SQL Logs won't show SQL queries (optional). üîπ Final Thoughts ‚úî Your backend depends on these variables, so skipping them can break the app. ‚úî Docker needs MySQL as mysql, not localhost in the URL. ‚úî Using a .env file can secure credentials instead of hardcoding.</p> <hr> <p>üîπ Setting Up a .env File for Your Docker Compose A .env file helps store sensitive credentials securely while keeping your docker-compose.yml clean. Here‚Äôs how to set it up:</p> <p>Step 1: Create a .env File Inside your project directory, create a new file named .env and add the following contents:</p> <p>ini Copy Edit</p> <h1 id=mysql-credentials>MySQL Credentials<a class=headerlink href=#mysql-credentials title="Link to this section">&para;</a></h1> <p>MYSQL_ROOT_PASSWORD=IbtisamX MYSQL_DATABASE=bankappdb MYSQL_USER=ibtisam MYSQL_PASSWORD=Ibtisam</p> <h1 id=spring-boot-app-variables>Spring Boot App Variables<a class=headerlink href=#spring-boot-app-variables title="Link to this section">&para;</a></h1> <p>SPRING_APPLICATION_NAME=bankapp SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC SPRING_DATASOURCE_USERNAME=ibtisam SPRING_DATASOURCE_PASSWORD=Ibtisam SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver SPRING_JPA_HIBERNATE_DDL_AUTO=update SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect SPRING_JPA_SHOW_SQL=true Step 2: Modify docker-compose.yml Now, load the .env file inside your docker-compose.yml:</p> <p>yaml Copy Edit version: '3.8'</p> <p>services: mysql: image: mysql:latest container_name: mysql restart: unless-stopped env_file: - .env environment: MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD} MYSQL_DATABASE: ${MYSQL_DATABASE} MYSQL_USER: ${MYSQL_USER} MYSQL_PASSWORD: ${MYSQL_PASSWORD} ports: - "3306:3306" volumes: - mysql_data:/var/lib/mysql networks: - app-network healthcheck: test: ["CMD", "mysqladmin", "ping", "-h", "localhost"] interval: 10s timeout: 5s retries: 3</p> <p>backend: build: ./backend container_name: backend restart: unless-stopped env_file: - .env environment: SPRING_APPLICATION_NAME: ${SPRING_APPLICATION_NAME} SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL} SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME} SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD} SPRING_DATASOURCE_DRIVER_CLASS_NAME: ${SPRING_DATASOURCE_DRIVER_CLASS_NAME} SPRING_JPA_HIBERNATE_DDL_AUTO: ${SPRING_JPA_HIBERNATE_DDL_AUTO} SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT: ${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT} SPRING_JPA_SHOW_SQL: ${SPRING_JPA_SHOW_SQL} ports: - "8080:8080" depends_on: mysql: condition: service_healthy networks: - app-network</p> <p>networks: app-network: driver: bridge</p> <p>volumes: mysql_data: Step 3: Run Docker Compose Now, to start your services, run the following command:</p> <p>sh Copy Edit docker compose up -d --build Why Use .env? ‚úî Keeps secrets out of docker-compose.yml (cleaner &amp; safer). ‚úî Easier to update credentials without modifying YAML files. ‚úî Allows using different environments (e.g., .env.dev, .env.prod).</p> <p>Bonus: Ignore .env in Git To prevent .env from being committed, add this line to your .gitignore file:</p> <p>bash Copy Edit .env</p> <hr> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-1-1><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-1-2><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql:latest</span>
</span><span id=__span-1-3><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-1-4><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MYSQL_ROOT_PASSWORD=IbtisamX</span>
</span><span id=__span-1-5><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MYSQL_DATABASE=bankappdb</span>
</span><span id=__span-1-6><span class=w>      </span><span class=nt>MYSQL_USER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibtisam</span>
</span><span id=__span-1-7><span class=w>      </span><span class=nt>MYSQL_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibtisam</span>
</span></code></pre></div> <p>1) Is this correct syntax? No, the syntax is incorrect because it's mixing two formats for defining environment variables. You should either use a list (- key=value format) or a dictionary (key: value format), but not both.</p> <p>‚úÖ Correct Syntax: Either use list format:</p> <p>yaml Copy Edit environment: - MYSQL_ROOT_PASSWORD=IbtisamX - MYSQL_DATABASE=bankappdb - MYSQL_USER=ibtisam - MYSQL_PASSWORD=ibtisam or use dictionary format:</p> <p>yaml Copy Edit environment: MYSQL_ROOT_PASSWORD: IbtisamX MYSQL_DATABASE: bankappdb MYSQL_USER: ibtisam MYSQL_PASSWORD: ibtisam Both formats work, but dictionary format is more readable.</p> <p>2) Which of the following keys are mandatory, and which are optional? ‚úÖ Mandatory Keys: MYSQL_ROOT_PASSWORD ‚Äì Required when initializing a MySQL container without an existing database volume. MYSQL_DATABASE ‚Äì Required if you want MySQL to create a database automatically. ‚ö† Optional Keys: MYSQL_USER ‚Äì Optional; if not set, only the root user will be created. MYSQL_PASSWORD ‚Äì Required only if MYSQL_USER is specified (to set its password). Otherwise, optional. üí° What Happens If You Skip These?</p> <p>If MYSQL_ROOT_PASSWORD is missing, the MySQL container won't start because root access needs authentication. If MYSQL_DATABASE is missing, MySQL won't create a default database, but the service will still run. If MYSQL_USER is missing, MySQL only creates the root user. If MYSQL_PASSWORD is missing but MYSQL_USER is set, MySQL won't allow that user to connect (unless you set an empty password explicitly).</p> <hr> <p>Yes, in your Docker Compose file, the environment variables:</p> <p>yaml Copy Edit environment: SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC SPRING_DATASOURCE_USERNAME: ibtisam SPRING_DATASOURCE_PASSWORD: Ibtisam indicate that your Spring Boot application (bank-web) is connecting to MySQL using the credentials:</p> <p>Username: ibtisam Password: Ibtisam This means ibtisam is a non-root MySQL user.</p> <p>Are MYSQL_USER and MYSQL_PASSWORD Optional for MySQL Service? Yes, MYSQL_USER and MYSQL_PASSWORD are optional, but it depends on whether you need a non-root user.</p> <p>Behavior Based on MYSQL_USER and MYSQL_PASSWORD Settings: If You Omit MYSQL_USER and MYSQL_PASSWORD</p> <p>Only the root user (root) will exist. Your application must use root and MYSQL_ROOT_PASSWORD to connect. The ibtisam user won‚Äôt exist, so your connection attempt from bank-web will fail. If You Set MYSQL_USER=ibtisam and MYSQL_PASSWORD=Ibtisam</p> <p>MySQL will create a non-root user ibtisam with the password Ibtisam. Your Spring Boot app can connect using ibtisam instead of root. If You Set MYSQL_USER but Omit MYSQL_PASSWORD</p> <p>MySQL will create the user without a password (unless MySQL security settings prevent it). Your app might fail to connect if it requires a password. Final Answer: ‚úÖ MYSQL_USER and MYSQL_PASSWORD are optional. ‚ö† But if you specify a non-root user in the app, you must define MYSQL_USER and MYSQL_PASSWORD in the MySQL service, or the user won‚Äôt exist, and the app‚Äôs connection will fail.</p> <hr> <p>Yes, if you don't want to define MYSQL_USER and MYSQL_PASSWORD in the MySQL service, then your application must use the root user to connect, like this:</p> <p>yaml Copy Edit environment: SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC SPRING_DATASOURCE_USERNAME: root SPRING_DATASOURCE_PASSWORD: IbtisamX Does MySQL have a default root username? ‚úÖ Yes, the default root username in MySQL is always root. ‚úÖ The root password must be set using MYSQL_ROOT_PASSWORD, or MySQL won't start.</p> <p>Final Clarification: If you omit MYSQL_USER and MYSQL_PASSWORD, MySQL only creates the root user, so your app must connect using root and MYSQL_ROOT_PASSWORD. If you define MYSQL_USER, then a non-root user is created, and your app can use that user instead of root.</p> <hr> <p>The default root username (root) in MySQL always remains the same, regardless of the service name in Docker Compose. However, the hostname (localhost) changes based on the service name in the Compose file.</p> <p>How the Hostname Works in Docker Compose In your docker-compose.yml, the MySQL service is named mysql: yaml Copy Edit services: mysql: image: mysql:latest Inside other containers in the same Docker network, the MySQL service is reachable using its service name (mysql) instead of localhost. Connection Examples: Case Connection String Works Inside? Works Outside? Local Development (Outside Docker) jdbc:mysql://localhost:3306/bankappdb ‚ùå No ‚úÖ Yes Docker Container (Inside Compose Network) jdbc:mysql://mysql:3306/bankappdb ‚úÖ Yes ‚ùå No So, inside your bank-web service, use:</p> <p>yaml Copy Edit SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC instead of:</p> <p>yaml Copy Edit SPRING_DATASOURCE_URL: jdbc:mysql://localhost:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC because localhost refers to the container itself, not the MySQL service.</p> <p>Final Answer ‚úÖ The root username (root) remains the same always. ‚úÖ The hostname (localhost) varies depending on the service name.</p> <p>If the MySQL service is named mysql, use mysql as the hostname. If you rename the MySQL service to db, then use db as the hostname.</p> <hr> <p>Ah, I see! You're asking about the localhost in the healthcheck directive inside the MySQL service. Let‚Äôs break this down step by step.</p> <p>1Ô∏è‚É£ Why is localhost used in healthcheck? Inside the MySQL container, localhost refers to the MySQL server running inside the same container. Since the healthcheck runs inside the MySQL container, it should check if MySQL is responding within the same container. If you used -h mysql instead of -h localhost, it wouldn't work inside the container because mysql refers to the Docker service name, not the internal MySQL process. ‚úÖ So, localhost is correct because the healthcheck runs inside the MySQL container itself.</p> <p>2Ô∏è‚É£ Understanding the Healthcheck Command Your healthcheck:</p> <p>yaml Copy Edit healthcheck: test: ["CMD", "mysqladmin", "ping", "-h", "localhost"] Breakdown:</p> <p>CMD ‚Üí Runs a shell command inside the container. mysqladmin ‚Üí A MySQL client tool to manage MySQL servers. ping ‚Üí A command that checks if MySQL is alive. -h localhost ‚Üí Specifies the MySQL server host inside the container. 3Ô∏è‚É£ What Happens During Healthcheck Execution? 1Ô∏è‚É£ Docker runs this command inside the MySQL container:</p> <p>bash Copy Edit mysqladmin ping -h localhost 2Ô∏è‚É£ MySQL responds with:</p> <p>csharp Copy Edit mysqld is alive ‚úÖ This means MySQL is running and accepting connections. 3Ô∏è‚É£ If MySQL is not running, the command fails, and the container is marked as unhealthy. 4Ô∏è‚É£ The service depends_on: mysql in other containers will wait until MySQL is healthy before starting.</p> <p>4Ô∏è‚É£ Can We Use -h mysql Instead of -h localhost? ‚ùå No, because:</p> <p>Inside the MySQL container, the MySQL service is running on localhost. The service name (mysql) is only valid in other containers, not inside itself. ‚úÖ Always use localhost for internal MySQL health checks.</p> <p>5Ô∏è‚É£ Can We Improve This Healthcheck? Yes! Add a retry mechanism to make sure MySQL is ready:</p> <p>yaml Copy Edit healthcheck: test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-uroot", "-p${MYSQL_ROOT_PASSWORD}"] interval: 10s # Check every 10 seconds timeout: 5s # Wait max 5 seconds for a response retries: 3 # Retry 3 times before marking as unhealthy This ensures that MySQL is truly healthy before other containers depend on it.</p> <p>Final Answer ‚úÖ localhost is correct in healthcheck because the MySQL server is running inside the same container. ‚úÖ mysqladmin ping -h localhost checks if MySQL is running and accepting connections. ‚úÖ Adding -uroot -p${MYSQL_ROOT_PASSWORD} improves accuracy. ‚úÖ Other services should use mysql (the service name) to connect, but not in healthchecks.</p> <hr> <h3 id=dockerfile-multi-stage-build>Dockerfile (Multi-Stage Build)<a class=headerlink href=#dockerfile-multi-stage-build title="Link to this section">&para;</a></h3> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-2-1><span class=c># First Stage: Build the application</span>
</span><span id=__span-2-2><span class=k>FROM</span><span class=w> </span><span class=s>maven:3.9.9-eclipse-temurin-17-alpine</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s>builder</span>
</span><span id=__span-2-3><span class=k>WORKDIR</span><span class=w> </span><span class=s>/usr/src/app</span>
</span><span id=__span-2-4>
</span><span id=__span-2-5><span class=c># Copy pom.xml and download dependencies</span>
</span><span id=__span-2-6><span class=k>COPY</span><span class=w> </span>pom.xml<span class=w> </span>.
</span><span id=__span-2-7><span class=k>RUN</span><span class=w> </span>mvn<span class=w> </span>dependency:go-offline
</span><span id=__span-2-8>
</span><span id=__span-2-9><span class=c># Copy source code and build the application</span>
</span><span id=__span-2-10><span class=k>COPY</span><span class=w> </span>src<span class=w> </span>./src
</span><span id=__span-2-11><span class=k>RUN</span><span class=w> </span>mvn<span class=w> </span>package<span class=w> </span>-DskipTests
</span><span id=__span-2-12>
</span><span id=__span-2-13><span class=c># Runtime Stage (Alpine)</span>
</span><span id=__span-2-14><span class=k>FROM</span><span class=w> </span><span class=s>openjdk:17-jdk-alpine</span>
</span><span id=__span-2-15><span class=k>WORKDIR</span><span class=w> </span><span class=s>/usr/src/app</span>
</span><span id=__span-2-16><span class=k>COPY</span><span class=w> </span>--from<span class=o>=</span>builder<span class=w> </span>/usr/src/app/target/*.jar<span class=w> </span>app.jar
</span><span id=__span-2-17><span class=k>EXPOSE</span><span class=w> </span><span class=s>8080</span>
</span><span id=__span-2-18><span class=k>CMD</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;java&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;-jar&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;app.jar&quot;</span><span class=p>]</span>
</span></code></pre></div> <h3 id=docker-compose>Docker Compose<a class=headerlink href=#docker-compose title="Link to this section">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3&#39;</span>
</span><span id=__span-3-2><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-3-3><span class=w>  </span><span class=nt>web</span><span class=p>:</span>
</span><span id=__span-3-4><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id=__span-3-5><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bank-web</span>
</span><span id=__span-3-6><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-7><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;8080:8080&quot;</span>
</span><span id=__span-3-8><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-3-9><span class=w>      </span><span class=nt>SPRING_DATASOURCE_URL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://db:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC</span>
</span><span id=__span-3-10><span class=w>      </span><span class=nt>SPRING_DATASOURCE_USERNAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibtisam</span>
</span><span id=__span-3-11><span class=w>      </span><span class=nt>SPRING_DATASOURCE_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ibtisam</span>
</span><span id=__span-3-12><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span>
</span><span id=__span-3-13><span class=w>      </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-3-14><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class=w>   </span><span class=c1># Wait for MySQL to be healthy before starting the app</span>
</span><span id=__span-3-15><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-3-16><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span><span class=w>  </span>
</span><span id=__span-3-17><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-3-18><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;http://localhost:8080/actuator/health&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-3-19><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-3-20><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-3-21><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-3-22><span class=w>  </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-3-23><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql:latest</span>
</span><span id=__span-3-24><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-3-25><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IbtisamX</span>
</span><span id=__span-3-26><span class=w>      </span><span class=nt>MYSQL_DATABASE</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bankappdb</span>
</span><span id=__span-3-27><span class=w>      </span><span class=nt>MYSQL_USER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibtisam</span><span class=w> </span>
</span><span id=__span-3-28><span class=w>      </span><span class=nt>MYSQL_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibtisam</span>
</span><span id=__span-3-29>
</span><span id=__span-3-30><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-31><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;3306:3306&quot;</span>
</span><span id=__span-3-32>
</span><span id=__span-3-33><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-3-34><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql_data:/var/lib/mysql</span><span class=w>     </span><span class=c1># Persist MySQL data</span>
</span><span id=__span-3-35><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-3-36><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
</span><span id=__span-3-37>
</span><span id=__span-3-38><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-3-39><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;mysqladmin&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;ping&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-h&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;localhost&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-3-40><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-3-41><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-3-42><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-3-43>
</span><span id=__span-3-44><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-3-45><span class=w>  </span><span class=nt>app-network</span><span class=p>:</span>
</span><span id=__span-3-46><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-3-47>
</span><span id=__span-3-48><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-3-49><span class=w>  </span><span class=nt>mysql_data</span><span class=p>:</span><span class=w>      </span>
</span></code></pre></div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1>spring.application.name<span class=o>=</span>bankapp
</span><span id=__span-4-2><span class=c1># MySQL Database configuration</span>
</span><span id=__span-4-3>spring.datasource.url<span class=o>=</span>jdbc:mysql://localhost:3306/bankappdb?useSSL<span class=o>=</span>false<span class=p>&amp;</span><span class=nv>serverTimezone</span><span class=o>=</span>UTC
</span><span id=__span-4-4>spring.datasource.username<span class=o>=</span>root
</span><span id=__span-4-5>spring.datasource.password<span class=o>=</span>IbtisamX
</span><span id=__span-4-6>spring.datasource.driver-class-name<span class=o>=</span>com.mysql.cj.jdbc.Driver
</span><span id=__span-4-7>
</span><span id=__span-4-8><span class=c1># JPA &amp; Hibernate configuration</span>
</span><span id=__span-4-9>spring.jpa.hibernate.ddl-auto<span class=o>=</span>update
</span><span id=__span-4-10>spring.jpa.properties.hibernate.dialect<span class=o>=</span>org.hibernate.dialect.MySQL8Dialect
</span><span id=__span-4-11>spring.jpa.show-sql<span class=o>=</span><span class=nb>true</span>
</span></code></pre></div> <p>Your docker-compose.yml and Dockerfile are well-structured, but I have some improvements and best practices to suggest. üöÄ</p> <p>üõ† Improvements &amp; Fixes 1Ô∏è‚É£ depends_on Behavior Needs Improvement Right now, you're using: yaml Copy Edit depends_on: db: condition: service_healthy ‚úÖ This ensures web starts only when MySQL is healthy. ‚ö†Ô∏è But depends_on doesn't guarantee MySQL is fully ready for connections because MySQL might still be initializing tables. Fix: Add a startup wait inside the application (application.properties). properties Copy Edit spring.datasource.initialization-mode=always spring.sql.init.mode=always</p> <p>2Ô∏è‚É£ Improve Healthchecks ‚úÖ For MySQL:</p> <p>Current: yaml Copy Edit test: ["CMD", "mysqladmin", "ping", "-h", "localhost"] Fix: Add authentication for a more robust check. yaml Copy Edit test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-uroot", "-p$MYSQL_ROOT_PASSWORD"] ‚úÖ For Web App:</p> <p>Current: yaml Copy Edit test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"] ‚ö†Ô∏è Problem: Actuator is not enabled by default in Spring Boot. Fix: Enable Actuator in application.properties: properties Copy Edit management.endpoints.web.exposure.include=health Alternative: If you don‚Äôt want Actuator, check MySQL readiness in the web container: yaml Copy Edit test: ["CMD", "nc", "-z", "db", "3306"]</p> <p>3 Optimize the Multi-Stage Build in Dockerfile Current: dockerfile Copy Edit COPY pom.xml . RUN mvn dependency:go-offline Fix: Cache dependencies efficiently: dockerfile Copy Edit COPY pom.xml . RUN mvn dependency:resolve Also, don‚Äôt expose ports in the second stage: dockerfile Copy Edit EXPOSE 8080 This is not needed because docker-compose.yml already maps the ports. ‚úÖ Final Recommendations Improvement Fix depends_on might not wait for MySQL readiness Add spring.datasource.initialization-mode=always in application.properties. Hardcoded credentials Move to .env file. MySQL healthcheck lacks authentication Use mysqladmin ping -h localhost -uroot -p$MYSQL_ROOT_PASSWORD. Web service healthcheck may fail Enable Actuator in application.properties. Network is not explicitly defined Define app-network under networks. Optimize Maven caching Use mvn dependency:resolve instead of go-offline.</p> <hr> <p>Here‚Äôs the improved version of your docker-compose.yml, Dockerfile, and application.properties with best practices applied and detailed comments. üöÄ</p> <p>üìù Updated docker-compose.yml <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3.8&#39;</span><span class=w>  </span><span class=c1># Upgraded version for better features</span>
</span><span id=__span-5-2>
</span><span id=__span-5-3><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-5-4><span class=w>  </span><span class=nt>web</span><span class=p>:</span>
</span><span id=__span-5-5><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id=__span-5-6><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bank-web</span>
</span><span id=__span-5-7><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-5-8><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-5-9><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;8080:8080&quot;</span>
</span><span id=__span-5-10>
</span><span id=__span-5-11><span class=w>    </span><span class=c1># Using environment variables from .env file (instead of hardcoding)</span>
</span><span id=__span-5-12><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span>
</span><span id=__span-5-13><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span>
</span><span id=__span-5-14>
</span><span id=__span-5-15><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-5-16><span class=w>      </span><span class=nt>SPRING_DATASOURCE_URL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://db:3306/$MYSQL_DATABASE?useSSL=false&amp;serverTimezone=UTC</span>
</span><span id=__span-5-17><span class=w>      </span><span class=nt>SPRING_DATASOURCE_USERNAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$MYSQL_USER</span>
</span><span id=__span-5-18><span class=w>      </span><span class=nt>SPRING_DATASOURCE_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$MYSQL_PASSWORD</span>
</span><span id=__span-5-19>
</span><span id=__span-5-20><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span>
</span><span id=__span-5-21><span class=w>      </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-5-22><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class=w>   </span><span class=c1># Ensures MySQL is healthy before starting web</span>
</span><span id=__span-5-23>
</span><span id=__span-5-24><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-5-25><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span><span class=w>  </span>
</span><span id=__span-5-26>
</span><span id=__span-5-27><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-5-28><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;http://localhost:8080/actuator/health&quot;</span><span class="p p-Indicator">]</span><span class=w>  </span><span class=c1># Health endpoint check</span>
</span><span id=__span-5-29><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-5-30><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-5-31><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-5-32>
</span><span id=__span-5-33><span class=w>  </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-5-34><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql:latest</span>
</span><span id=__span-5-35><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql-db</span>
</span><span id=__span-5-36><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-5-37>
</span><span id=__span-5-38><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span><span class=w> </span>
</span><span id=__span-5-39><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span><span class=w>  </span><span class=c1># Load environment variables</span>
</span><span id=__span-5-40>
</span><span id=__span-5-41><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-5-42><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;3306:3306&quot;</span>
</span><span id=__span-5-43>
</span><span id=__span-5-44><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-5-45><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql_data:/var/lib/mysql</span><span class=w>  </span><span class=c1># Persist MySQL data</span>
</span><span id=__span-5-46>
</span><span id=__span-5-47><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-5-48><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
</span><span id=__span-5-49>
</span><span id=__span-5-50><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-5-51><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;mysqladmin&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;ping&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-h&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;localhost&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-uroot&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-p$MYSQL_ROOT_PASSWORD&quot;</span><span class="p p-Indicator">]</span><span class=w> </span>
</span><span id=__span-5-52><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-5-53><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-5-54><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-5-55>
</span><span id=__span-5-56><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-5-57><span class=w>  </span><span class=nt>app-network</span><span class=p>:</span>
</span><span id=__span-5-58><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-5-59>
</span><span id=__span-5-60><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-5-61><span class=w>  </span><span class=nt>mysql_data</span><span class=p>:</span>
</span></code></pre></div></p> <p>üìù Updated Dockerfile (Multi-Stage) <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-6-1><span class=c># First Stage: Build the application</span>
</span><span id=__span-6-2><span class=k>FROM</span><span class=w> </span><span class=s>maven:3.9.9-eclipse-temurin-17-alpine</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s>builder</span>
</span><span id=__span-6-3><span class=k>WORKDIR</span><span class=w> </span><span class=s>/usr/src/app</span>
</span><span id=__span-6-4>
</span><span id=__span-6-5><span class=c># Copy pom.xml first to cache dependencies (optimized)</span>
</span><span id=__span-6-6><span class=k>COPY</span><span class=w> </span>pom.xml<span class=w> </span>.
</span><span id=__span-6-7><span class=k>RUN</span><span class=w> </span>mvn<span class=w> </span>dependency:resolve<span class=w>  </span>#<span class=w> </span>Better<span class=w> </span>caching<span class=w> </span>than<span class=w> </span>dependency:go-offline
</span><span id=__span-6-8>
</span><span id=__span-6-9><span class=c># Copy source code and build the application</span>
</span><span id=__span-6-10><span class=k>COPY</span><span class=w> </span>src<span class=w> </span>./src
</span><span id=__span-6-11><span class=k>RUN</span><span class=w> </span>mvn<span class=w> </span>package<span class=w> </span>-DskipTests
</span><span id=__span-6-12>
</span><span id=__span-6-13><span class=c># Second Stage: Production-ready container</span>
</span><span id=__span-6-14><span class=k>FROM</span><span class=w> </span><span class=s>openjdk:17-jdk-alpine</span>
</span><span id=__span-6-15><span class=k>WORKDIR</span><span class=w> </span><span class=s>/usr/src/app</span>
</span><span id=__span-6-16>
</span><span id=__span-6-17><span class=c># Copy built JAR file from builder stage</span>
</span><span id=__span-6-18><span class=k>COPY</span><span class=w> </span>--from<span class=o>=</span>builder<span class=w> </span>/usr/src/app/target/*.jar<span class=w> </span>app.jar
</span><span id=__span-6-19>
</span><span id=__span-6-20><span class=c># No need to expose port here (it&#39;s done in docker-compose.yml)</span>
</span><span id=__span-6-21><span class=k>CMD</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;java&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;-jar&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;app.jar&quot;</span><span class=p>]</span>
</span></code></pre></div></p> <p>üìù Updated application.properties <div class="language-properties highlight"><pre><span></span><code><span id=__span-7-1><span class=c1># ------------------------------</span>
</span><span id=__span-7-2><span class=c1># ‚úÖ Application Configuration</span>
</span><span id=__span-7-3><span class=c1># ------------------------------</span>
</span><span id=__span-7-4><span class=na>spring.application.name</span><span class=o>=</span><span class=s>bankapp</span>
</span><span id=__span-7-5>
</span><span id=__span-7-6><span class=c1># ------------------------------</span>
</span><span id=__span-7-7><span class=c1># ‚úÖ Database Configuration</span>
</span><span id=__span-7-8><span class=c1># ------------------------------</span>
</span><span id=__span-7-9><span class=c1># üü¢ Before:</span>
</span><span id=__span-7-10><span class=c1># spring.datasource.url=jdbc:mysql://localhost:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC</span>
</span><span id=__span-7-11><span class=c1># spring.datasource.username=ibtisam</span>
</span><span id=__span-7-12><span class=c1># spring.datasource.password=Ibtisam</span>
</span><span id=__span-7-13><span class=c1>#</span>
</span><span id=__span-7-14><span class=c1># üü¢ Now:</span>
</span><span id=__span-7-15><span class=na>spring.datasource.url</span><span class=o>=</span><span class=s>jdbc:mysql://db:3306/${MYSQL_DATABASE}?useSSL=false&amp;serverTimezone=UTC</span>
</span><span id=__span-7-16><span class=na>spring.datasource.username</span><span class=o>=</span><span class=s>${MYSQL_USER}</span>
</span><span id=__span-7-17><span class=na>spring.datasource.password</span><span class=o>=</span><span class=s>${MYSQL_PASSWORD}</span>
</span><span id=__span-7-18><span class=na>spring.datasource.driver-class-name</span><span class=o>=</span><span class=s>com.mysql.cj.jdbc.Driver</span>
</span><span id=__span-7-19>
</span><span id=__span-7-20><span class=c1># Reason: </span>
</span><span id=__span-7-21><span class=c1># - Removed hardcoded values and replaced them with environment variables.</span>
</span><span id=__span-7-22><span class=c1># - &quot;localhost&quot; changed to &quot;db&quot; (Docker service name) to enable communication.</span>
</span><span id=__span-7-23>
</span><span id=__span-7-24><span class=c1># ------------------------------</span>
</span><span id=__span-7-25><span class=c1># ‚úÖ JPA &amp; Hibernate Configuration</span>
</span><span id=__span-7-26><span class=c1># ------------------------------</span>
</span><span id=__span-7-27><span class=na>spring.jpa.hibernate.ddl-auto</span><span class=o>=</span><span class=s>update</span>
</span><span id=__span-7-28><span class=na>spring.jpa.properties.hibernate.dialect</span><span class=o>=</span><span class=s>org.hibernate.dialect.MySQL8Dialect</span>
</span><span id=__span-7-29><span class=na>spring.jpa.show-sql</span><span class=o>=</span><span class=s>true</span>
</span><span id=__span-7-30>
</span><span id=__span-7-31><span class=c1># ------------------------------</span>
</span><span id=__span-7-32><span class=c1># ‚úÖ Actuator Configuration (New)</span>
</span><span id=__span-7-33><span class=c1># ------------------------------</span>
</span><span id=__span-7-34><span class=c1># üü¢ Added this section to enable health checks in Docker Compose</span>
</span><span id=__span-7-35><span class=na>management.endpoints.web.exposure.include</span><span class=o>=</span><span class=s>health</span>
</span></code></pre></div></p> <p>‚úÖ Summary of Improvements Improvement Why? Used .env file To avoid hardcoded credentials in docker-compose.yml and application.properties. Updated depends_on Ensures MySQL is fully healthy before starting the web app. Optimized Maven build caching Improves speed by using mvn dependency:resolve. Enabled Spring Boot Actuator Allows proper health checks in Docker Compose. Fixed MySQL healthcheck Now authenticates with mysqladmin using -uroot -p$MYSQL_ROOT_PASSWORD. Changed localhost to db Allows the Java app to connect to MySQL inside Docker. üöÄ You're now set with a fully optimized, secure, and production-ready setup!</p> <hr> <p>Great observation! Let me explain the behavior and best practices.</p> <p>üü¢ env_file vs environment in Docker Compose Both env_file and environment are used to define environment variables for services, but they work slightly differently.</p> <p>üìù Why Did I Use env_file Only for db But Both for web? For db (MySQL service):</p> <p>MySQL environment variables are entirely defined in .env, so there‚Äôs no need to specify them again under environment. Since all required variables (MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, etc.) are inside .env, env_file: - .env is sufficient. For web (Spring Boot service):</p> <p>The .env file contains multiple variables, but only a subset is needed for web. Using both env_file and environment ensures only the necessary variables are used. SPRING_DATASOURCE_URL is constructed dynamically inside environment, so we must specify it manually. üü¢ Is env_file Optional or Mandatory? ‚úÖ env_file is optional‚Äîyou can use either:</p> <p>Just env_file (if all needed variables are in .env). Just environment (if you want to define them inline). Both env_file + environment (when you need additional customization). üìù When Should I List Variables in environment? If .env contains a lot of variables, but your service only needs a few, then it's best to:</p> <p>Use env_file: - .env (to load all variables). List only the necessary ones under environment (to override or construct values). Example:</p> <p>yaml Copy Edit web: env_file: - .env # Loads ALL variables environment: SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/$MYSQL_DATABASE?useSSL=false&amp;serverTimezone=UTC SPRING_DATASOURCE_USERNAME: $MYSQL_USER SPRING_DATASOURCE_PASSWORD: $MYSQL_PASSWORD üëâ Here, SPRING_DATASOURCE_URL is custom (so it must be written explicitly). üëâ Everything else (MYSQL_USER, MYSQL_PASSWORD) is loaded automatically from .env.</p> <p>üü¢ Final Rule of Thumb Scenario Use env_file? Use environment? If all variables are in .env and no modifications needed ‚úÖ Yes ‚ùå No If some variables are in .env, but some need customization ‚úÖ Yes ‚úÖ Yes (for customized ones) If you don‚Äôt use .env and want everything inline ‚ùå No ‚úÖ Yes (define all manually) üöÄ Conclusion You don't need to mention everything in docker-compose.yml if .env has it all. Use environment only when a variable needs to be modified. For MySQL (db), env_file is enough. For Spring Boot (web), environment is needed because SPRING_DATASOURCE_URL is dynamic.</p> <hr> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3.8&#39;</span><span class=w>  </span><span class=c1># Upgraded version for better features</span>
</span><span id=__span-8-2>
</span><span id=__span-8-3><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-8-4><span class=w>  </span><span class=nt>web</span><span class=p>:</span>
</span><span id=__span-8-5><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id=__span-8-6><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bank-web</span>
</span><span id=__span-8-7><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-8-8><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-8-9><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;8080:8080&quot;</span>
</span><span id=__span-8-10>
</span><span id=__span-8-11><span class=w>    </span><span class=c1># Using environment variables from .env file (instead of hardcoding)</span>
</span><span id=__span-8-12><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span>
</span><span id=__span-8-13><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span>
</span><span id=__span-8-14>
</span><span id=__span-8-15><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span>
</span><span id=__span-8-16><span class=w>      </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-8-17><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class=w>   </span><span class=c1># Ensures MySQL is healthy before starting web</span>
</span><span id=__span-8-18>
</span><span id=__span-8-19><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-8-20><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span><span class=w>  </span>
</span><span id=__span-8-21>
</span><span id=__span-8-22><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-8-23><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;http://localhost:8080/actuator/health&quot;</span><span class="p p-Indicator">]</span><span class=w>  </span><span class=c1># Health endpoint check</span>
</span><span id=__span-8-24><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-8-25><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-8-26><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-8-27>
</span><span id=__span-8-28><span class=w>  </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-8-29><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql:latest</span>
</span><span id=__span-8-30><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql-db</span>
</span><span id=__span-8-31><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-8-32>
</span><span id=__span-8-33><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span><span class=w> </span>
</span><span id=__span-8-34><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span><span class=w>  </span><span class=c1># Load environment variables</span>
</span><span id=__span-8-35>
</span><span id=__span-8-36><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-8-37><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;3306:3306&quot;</span>
</span><span id=__span-8-38>
</span><span id=__span-8-39><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-8-40><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql_data:/var/lib/mysql</span><span class=w>  </span><span class=c1># Persist MySQL data</span>
</span><span id=__span-8-41>
</span><span id=__span-8-42><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-8-43><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
</span><span id=__span-8-44>
</span><span id=__span-8-45><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-8-46><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;mysqladmin&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;ping&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-h&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;localhost&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-uroot&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-p$MYSQL_ROOT_PASSWORD&quot;</span><span class="p p-Indicator">]</span><span class=w> </span>
</span><span id=__span-8-47><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-8-48><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-8-49><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-8-50>
</span><span id=__span-8-51><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-8-52><span class=w>  </span><span class=nt>app-network</span><span class=p>:</span>
</span><span id=__span-8-53><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-8-54>
</span><span id=__span-8-55><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-8-56><span class=w>  </span><span class=nt>mysql_data</span><span class=p>:</span>
</span></code></pre></div> <p><div class="language-text highlight"><pre><span></span><code><span id=__span-9-1># MySQL Credentials
</span><span id=__span-9-2>MYSQL_ROOT_PASSWORD=IbtisamX
</span><span id=__span-9-3>MYSQL_DATABASE=bankappdb
</span><span id=__span-9-4>MYSQL_USER=ibtisam
</span><span id=__span-9-5>MYSQL_PASSWORD=Ibtisam
</span><span id=__span-9-6>
</span><span id=__span-9-7># Spring Boot App Variables
</span><span id=__span-9-8>SPRING_APPLICATION_NAME=bankapp
</span><span id=__span-9-9>SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/bankappdb?useSSL=false&amp;serverTimezone=UTC
</span><span id=__span-9-10>SPRING_DATASOURCE_USERNAME=ibtisam          # MYSQL_USER
</span><span id=__span-9-11>SPRING_DATASOURCE_PASSWORD=Ibtisam          # MYSQL_PASSWORD
</span><span id=__span-9-12>SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver
</span><span id=__span-9-13>SPRING_JPA_HIBERNATE_DDL_AUTO=update
</span><span id=__span-9-14>SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect
</span><span id=__span-9-15>SPRING_JPA_SHOW_SQL=true
</span></code></pre></div> Yes! Your setup will work because you've moved all necessary environment variables to the .env file and referenced it using env_file.</p> <p>How Does Docker Compose Know Which Variables to Use? Docker Compose automatically loads all environment variables from .env into each service that includes env_file: - .env.</p> <p>This means:</p> <p>All variables in .env will be available to the containers. Even if some variables aren‚Äôt used in docker-compose.yml, they will still be loaded but won‚Äôt impact the service unless explicitly referenced in your application. üü¢ Is It Mandatory to Define environment in docker-compose.yml? ‚ùå No, it's not mandatory. ‚úÖ If .env contains everything, env_file is enough.</p> <p>BUT: If a variable needs a custom format (like SPRING_DATASOURCE_URL), it's better to define it in environment.</p> <p>üü¢ Will MySQL and Spring Boot Pick Up the Variables? Yes!</p> <p>MySQL (db service)</p> <p>MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, MYSQL_USER, and MYSQL_PASSWORD are loaded from .env. The MySQL container automatically uses these values when starting. Spring Boot (web service)</p> <p>The Spring Boot application will pick up environment variables (SPRING_DATASOURCE_*) from .env. Your application.properties file should be updated to read from environment variables. üü¢ What Happens to Unused Variables in .env? They are loaded but ignored unless a service references them. This does not cause any issues‚Äîjust makes .env more reusable. üìù Best Practice ‚úÖ Keep secrets (.env) private‚Äîdon‚Äôt hardcode credentials in docker-compose.yml. ‚úÖ Use env_file unless you need to override variables or modify their format in environment. ‚úÖ If a variable needs to be dynamically constructed, define it inside docker-compose.yml under environment instead of .env.</p> <hr> <p>You're absolutely right to think about mandatory environment variables in MySQL! Let's clarify this:</p> <p>üü¢ Is It Vital to Refer to Mandatory Environment Variables in docker-compose.yml? Not necessarily, but it depends on how MySQL handles missing variables.</p> <p>How Does MySQL Know to Create a Non-Root User? When using the mysql Docker image, MySQL automatically creates a non-root user only if the following two variables are set: MYSQL_USER ‚Üí Non-root username MYSQL_PASSWORD ‚Üí Password for non-root user ‚úÖ If these are missing, MySQL will not create the non-root user! üö® If MYSQL_USER or MYSQL_PASSWORD is not defined, MySQL will only allow connections via the root user.</p> <p>üü¢ What Happens If You Remove environment from docker-compose.yml and Use Only .env? ‚úÖ It will still work!</p> <p>Since you have env_file: - .env, Compose will automatically load all environment variables inside the MySQL container. ‚ö†Ô∏è BUT there is a caveat:</p> <p>If MYSQL_USER and MYSQL_PASSWORD are missing in .env, Compose won‚Äôt warn you ‚Üí MySQL will silently skip non-root user creation. üü¢ Best Practice 1Ô∏è‚É£ If you want to ensure non-root user creation, keep:</p> <p>yaml Copy Edit environment: MYSQL_USER: ${MYSQL_USER} MYSQL_PASSWORD: ${MYSQL_PASSWORD} This makes it explicit in docker-compose.yml that a non-root user is required.</p> <p>2Ô∏è‚É£ If you trust .env to always contain them, you can skip defining them in docker-compose.yml and just rely on:</p> <p>yaml Copy Edit env_file: - .env üü¢ Final Answer: Is It Vital to Refer to Mandatory Variables in docker-compose.yml? ‚úÖ No, it's not vital ‚Üí .env will work fine. ‚úÖ But it's a best practice to define mandatory ones explicitly in docker-compose.yml to avoid mistakes.</p> <hr> <p>Here's your improved and more robust docker-compose.yml with best practices and detailed comments to avoid common pitfalls:</p> <p>üîπ Updated docker-compose.yml with Best Practices <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3.8&#39;</span><span class=w>  </span><span class=c1># Using a stable Docker Compose version</span>
</span><span id=__span-10-2>
</span><span id=__span-10-3><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-10-4><span class=w>  </span><span class=nt>web</span><span class=p>:</span>
</span><span id=__span-10-5><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id=__span-10-6><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bank-web</span>
</span><span id=__span-10-7><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-10-8><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-10-9><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;8080:8080&quot;</span>
</span><span id=__span-10-10>
</span><span id=__span-10-11><span class=w>    </span><span class=c1># Load environment variables from .env file</span>
</span><span id=__span-10-12><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span>
</span><span id=__span-10-13><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span>
</span><span id=__span-10-14>
</span><span id=__span-10-15><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span>
</span><span id=__span-10-16><span class=w>      </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-10-17><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class=w>   </span><span class=c1># Ensures MySQL is ready before the app starts</span>
</span><span id=__span-10-18>
</span><span id=__span-10-19><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-10-20><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span><span class=w>  </span>
</span><span id=__span-10-21>
</span><span id=__span-10-22><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-10-23><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;http://localhost:8080/actuator/health&quot;</span><span class="p p-Indicator">]</span><span class=w>  </span><span class=c1># Checks if Spring Boot is healthy</span>
</span><span id=__span-10-24><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-10-25><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-10-26><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-10-27>
</span><span id=__span-10-28><span class=w>  </span><span class=nt>db</span><span class=p>:</span>
</span><span id=__span-10-29><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql:latest</span>
</span><span id=__span-10-30><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql-db</span>
</span><span id=__span-10-31><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id=__span-10-32>
</span><span id=__span-10-33><span class=w>    </span><span class=c1># Explicitly defining only mandatory variables to ensure MySQL starts correctly</span>
</span><span id=__span-10-34><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-10-35><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${MYSQL_ROOT_PASSWORD}</span><span class=w>  </span><span class=c1># Required to set the root password</span>
</span><span id=__span-10-36><span class=w>      </span><span class=nt>MYSQL_DATABASE</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${MYSQL_DATABASE}</span><span class=w>  </span><span class=c1># Ensures the database is created</span>
</span><span id=__span-10-37><span class=w>      </span><span class=nt>MYSQL_USER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${MYSQL_USER}</span><span class=w>  </span><span class=c1># Required for non-root user creation</span>
</span><span id=__span-10-38><span class=w>      </span><span class=nt>MYSQL_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${MYSQL_PASSWORD}</span><span class=w>  </span><span class=c1># Non-root user&#39;s password</span>
</span><span id=__span-10-39>
</span><span id=__span-10-40><span class=w>    </span><span class=c1># Load environment variables from .env file</span>
</span><span id=__span-10-41><span class=w>    </span><span class=nt>env_file</span><span class=p>:</span><span class=w> </span>
</span><span id=__span-10-42><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.env</span><span class=w>  </span>
</span><span id=__span-10-43>
</span><span id=__span-10-44><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-10-45><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;3306:3306&quot;</span>
</span><span id=__span-10-46>
</span><span id=__span-10-47><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-10-48><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mysql_data:/var/lib/mysql</span><span class=w>  </span><span class=c1># Persist MySQL data</span>
</span><span id=__span-10-49>
</span><span id=__span-10-50><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-10-51><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
</span><span id=__span-10-52>
</span><span id=__span-10-53><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span>
</span><span id=__span-10-54><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;mysqladmin&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;ping&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-h&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;localhost&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-uroot&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;-p$MYSQL_ROOT_PASSWORD&quot;</span><span class="p p-Indicator">]</span><span class=w> </span>
</span><span id=__span-10-55><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-10-56><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id=__span-10-57><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-10-58>
</span><span id=__span-10-59><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-10-60><span class=w>  </span><span class=nt>app-network</span><span class=p>:</span>
</span><span id=__span-10-61><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-10-62>
</span><span id=__span-10-63><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-10-64><span class=w>  </span><span class=nt>mysql_data</span><span class=p>:</span>
</span></code></pre></div></p> <p>üîπ Key Improvements &amp; Explanations Mandatory MySQL variables explicitly defined</p> <p>Added MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, MYSQL_USER, and MYSQL_PASSWORD under environment for clarity. This prevents accidental omission of these critical variables from .env. Still using env_file: - .env</p> <p>This ensures all other optional variables are still loaded dynamically from .env. Healthcheck uses -uroot -p$MYSQL_ROOT_PASSWORD</p> <p>Ensures MySQL is correctly authenticated before marking the service as healthy. Best Practice: restart: unless-stopped</p> <p>Keeps containers running unless manually stopped. üîπ Why Keep MYSQL_USER and MYSQL_PASSWORD in docker-compose.yml? ‚úÖ Ensures MySQL creates a non-root user ‚úÖ Avoids silent failures when .env is missing or incomplete ‚úÖ Follows explicit configuration best practices</p> <p>Now, your setup is fully robust and will work reliably every time. </p> <hr> <p>üîπ Why These Fixes Are Needed? 1Ô∏è‚É£ depends_on Doesn't Guarantee MySQL is Fully Ready Even though MySQL is marked as healthy, it could still be initializing its tables. Spring Boot may try to connect before the database is fully ready, causing connection failures. 2Ô∏è‚É£ Solution: Add spring.datasource.initialization-mode=always This forces Spring Boot to wait for MySQL to be fully initialized before running queries. It prevents the app from crashing due to database connection errors.</p> <p>Yes! Adding Actuator configuration is essential for enabling health checks in docker-compose.yml.</p> <p>Without exposing the health endpoint, your healthcheck in the web service won‚Äôt work correctly.</p> <p>üîπ Final Updated application.properties (Including Actuator)</p> <div class="language-properties highlight"><pre><span></span><code><span id=__span-11-1><span class=c1># ------------------------------</span>
</span><span id=__span-11-2><span class=c1># ‚úÖ Application Name</span>
</span><span id=__span-11-3><span class=c1># ------------------------------</span>
</span><span id=__span-11-4><span class=na>spring.application.name</span><span class=o>=</span><span class=s>${SPRING_APPLICATION_NAME}</span>
</span><span id=__span-11-5>
</span><span id=__span-11-6><span class=c1># ------------------------------</span>
</span><span id=__span-11-7><span class=c1># ‚úÖ Database Connection Properties</span>
</span><span id=__span-11-8><span class=c1># ------------------------------</span>
</span><span id=__span-11-9><span class=na>spring.datasource.url</span><span class=o>=</span><span class=s>${SPRING_DATASOURCE_URL}  </span>
</span><span id=__span-11-10><span class=na>spring.datasource.username</span><span class=o>=</span><span class=s>${SPRING_DATASOURCE_USERNAME}  </span>
</span><span id=__span-11-11><span class=na>spring.datasource.password</span><span class=o>=</span><span class=s>${SPRING_DATASOURCE_PASSWORD}  </span>
</span><span id=__span-11-12><span class=na>spring.datasource.driver-class-name</span><span class=o>=</span><span class=s>${SPRING_DATASOURCE_DRIVER_CLASS_NAME}  </span>
</span><span id=__span-11-13>
</span><span id=__span-11-14><span class=c1># ------------------------------</span>
</span><span id=__span-11-15><span class=c1># ‚úÖ Hibernate (JPA) Settings</span>
</span><span id=__span-11-16><span class=c1># ------------------------------</span>
</span><span id=__span-11-17><span class=na>spring.jpa.hibernate.ddl-auto</span><span class=o>=</span><span class=s>update  </span>
</span><span id=__span-11-18><span class=na>spring.jpa.database-platform</span><span class=o>=</span><span class=s>${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT}  </span>
</span><span id=__span-11-19><span class=na>spring.jpa.show-sql</span><span class=o>=</span><span class=s>${SPRING_JPA_SHOW_SQL}  </span>
</span><span id=__span-11-20>
</span><span id=__span-11-21><span class=c1># ------------------------------</span>
</span><span id=__span-11-22><span class=c1># ‚úÖ Fix for MySQL Startup Delay</span>
</span><span id=__span-11-23><span class=c1># ------------------------------</span>
</span><span id=__span-11-24><span class=c1># Ensures Spring Boot waits for MySQL to be fully initialized</span>
</span><span id=__span-11-25><span class=na>spring.datasource.initialization-mode</span><span class=o>=</span><span class=s>always  </span>
</span><span id=__span-11-26><span class=na>spring.sql.init.mode</span><span class=o>=</span><span class=s>always  </span>
</span><span id=__span-11-27>
</span><span id=__span-11-28><span class=c1># ------------------------------</span>
</span><span id=__span-11-29><span class=c1># ‚úÖ Actuator Configuration (New)</span>
</span><span id=__span-11-30><span class=c1># ------------------------------</span>
</span><span id=__span-11-31><span class=c1># üü¢ Exposes the &quot;health&quot; endpoint for Docker health checks</span>
</span><span id=__span-11-32><span class=na>management.endpoints.web.exposure.include</span><span class=o>=</span><span class=s>health  </span>
</span><span id=__span-11-33>
</span><span id=__span-11-34><span class=c1># ------------------------------</span>
</span><span id=__span-11-35><span class=c1># ‚úÖ Other Optional Settings</span>
</span><span id=__span-11-36><span class=c1># ------------------------------</span>
</span><span id=__span-11-37><span class=na>server.port</span><span class=o>=</span><span class=s>8080</span>
</span></code></pre></div> <p>üîπ Why is Actuator Needed? Your docker-compose.yml already has this health check:</p> <p>yaml Copy Edit healthcheck: test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]<br> But Spring Boot doesn't expose the health endpoint by default. So, the health check would fail without explicitly enabling it. Fix: management.endpoints.web.exposure.include=health</p> <p>This enables /actuator/health, allowing docker-compose to correctly detect if the app is running. üîπ What If I Want More Actuator Endpoints? Instead of just health, you can enable all actuator endpoints: properties Copy Edit management.endpoints.web.exposure.include=*<br> This will expose other useful endpoints like: /actuator/info ‚Üí Displays application metadata /actuator/metrics ‚Üí Shows performance metrics /actuator/loggers ‚Üí Allows runtime log level adjustments ‚úÖ Now Your Setup is 100% Ready! MySQL won't cause early connection failures ‚úÖ Spring Boot will correctly expose the health endpoint ‚úÖ Docker Compose can monitor the app's health ‚úÖ</p> <hr> <p>Good question! Let's break it down.</p> <p>üîπ mvn dependency:go-offline (Your Current Approach) dockerfile Copy Edit RUN mvn dependency:go-offline What it does:</p> <p>Downloads all dependencies that are mentioned in pom.xml, including transitive dependencies. Ensures offline builds later (i.e., Maven won‚Äôt need the internet after this step). Limitations:</p> <p>It fetches everything whether they‚Äôre needed or not. Doesn't guarantee that all required dependencies for a specific build phase (like package or compile) are fully resolved. Caching is suboptimal ‚Üí Docker might not effectively reuse layers when dependencies change. üîπ mvn dependency:resolve (Better for Caching) dockerfile Copy Edit RUN mvn dependency:resolve What it does: Fetches and resolves dependencies only for the current project and phase. Better caching ‚Üí If pom.xml changes slightly, Docker doesn‚Äôt re-download everything. Speeds up rebuilds ‚Üí It minimizes unnecessary dependency downloads. üîπ Which One to Use? Command Pros Cons mvn dependency:go-offline Ensures full offline builds Can fetch unnecessary dependencies mvn dependency:resolve Faster rebuilds &amp; better caching Might require additional resolutions for some phases üöÄ Final Recommendation If you want Docker caching optimization ‚Üí Use mvn dependency:resolve ‚úÖ If you plan to build entirely offline in the future ‚Üí Stick with mvn dependency:go-offline For your Dockerfile, I recommend:</p> <p>dockerfile Copy Edit RUN mvn dependency:resolve # Caches dependencies efficiently This ensures faster incremental builds while still resolving necessary dependencies!</p> <hr> <p>Improve depends_on Behavior with wait-for-it.sh While you've added:</p> <p>properties Copy Edit spring.datasource.initialization-mode=always spring.sql.init.mode=always MySQL might still not be fully ready (even though health check passes).</p> <p>Alternative Fix (Recommended): Use wait-for-it.sh or dockerize in your Dockerfile.</p> <p>Example (Add to web service in docker-compose.yml):</p> <p>yaml Copy Edit entrypoint: ["./wait-for-it.sh", "db:3306", "--", "java", "-jar", "app.jar"] This ensures MySQL is fully ready before Spring Boot starts.</p> <p>üìå What is wait-for-it.sh? wait-for-it.sh is a shell script that waits for a specific service (like a database) to be ready before starting another service.</p> <p>‚úÖ Why do we need it?</p> <p>In Docker Compose, even if a service is marked as healthy (depends_on with condition: service_healthy), it doesn‚Äôt guarantee that MySQL is fully initialized. wait-for-it.sh ensures that MySQL is actually accepting connections before starting the Spring Boot application. ‚úÖ How does it work?</p> <p>It pings a specified host and port (e.g., db:3306) until it's reachable. Once MySQL is ready, it executes the given command (in our case, java -jar app.jar).</p> <p>üõ†Ô∏è Next Steps 1Ô∏è‚É£ Add wait-for-it.sh to Your Project Since wait-for-it.sh is not included in official images, you need to add it manually.</p> <p>Download it into your project root: sh Copy Edit curl -o wait-for-it.sh https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh Give execution permissions: sh Copy Edit chmod +x wait-for-it.sh Make sure it is in your .dockerignore (so it doesn‚Äôt get copied unnecessarily).</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../Compose/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Home"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Home </div> </div> </a> <a href=../Nodejs/ class="md-footer__link md-footer__link--next" aria-label="Next: Node.js Application"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Node.js Application </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 <a href=https://www.linkedin.com/in/ibtisam-iq/ target=_blank rel=noopener>Muhammad Ibtisam</a>. All rights reserved. </div> </div> <div class=md-social> <a href=https://www.credly.com/users/ibtisam-iq/badges#credly target=_blank rel=noopener title="View my Credly badges" class=md-social__link> <?xml version="1.0" encoding="utf-8"?> <svg width=800px height=800px viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <circle cx=512 cy=512 r=512 style=fill:#f36c21 /> <path style=fill:#fff d="M671.2 371.6h3c3.7.3 7.4 2.1 9.7 5 3.4 4.2 4.3 9.8 4.6 15.1.8 16.1-2.7 32.1-7.3 47.5-5.9 20.4-14.2 40-21 60.1-1.2 3.5-2.4 7.1-3.3 10.7-1.5 6-1.3 12.3-1.5 18.5-.2 5.8.2 11.6 1.3 17.3.6 3.1 1.9 6.4 4.3 8.6 2.2 2 5.4 2.9 8.3 2 3.9-1.2 7-4.2 9.8-7.1 3.9-4.3 7.6-8.7 10.3-13.8 3.8-6.8 6-14.3 7.1-22 1.5-11.6 2.7-23.4 6.9-34.4 1.6-4.2 3.6-8.5 7.4-11.1 5.1-3.6 12.8-2.1 16.7 2.7 1.9 2.4 2.4 5.5 2.4 8.4-.2 3.9-1 7.8-2.3 11.5-4.5 13.2-7.1 27.1-6.6 41.1.1 3.2.4 6.6 2.1 9.5 1.4 2.4 3.8 4.3 6.6 4.3 3.2 0 6-1.9 8-4.2 3.1-3.5 5.6-7.5 7.6-11.7 4-8.5 5.9-17.8 7.6-27 1.4-7.8 2.8-15.6 5-23.2 1.2-3.9 2.7-7.8 5.6-10.8 1.9-2.1 4.8-2.9 7.5-2.9 2.8.1 5.4 1.7 7.3 3.8 2.6 2.9 3.1 6.9 2.8 10.6-2.8 22.1-5.9 44.2-8.4 66.3-1.8 13.8-3.4 27.6-4.6 41.4-.1 1.5 1.7 2.4 2.7 1.4 7.2-6.9 14.3-14.1 19.7-22.5 2.5-3.8 4.3-7.9 6.7-11.7 1-1.7 2.2-3.4 4.1-4 2.9-1.4 6.6-1 9.1 1 1.9 1.4 2.9 3.7 3.2 6v2.7c-.6 4.6-3.3 8.5-5.3 12.5-5.5 11-13.1 21-22.6 28.9-6.8 5.8-14.8 10.2-23.2 13.2-.5.2-1.3.3-1.4 1-3.1 12.7-10 24.4-19.3 33.5-10.3 10.2-23.6 17.2-37.7 20.5-7.7 1.7-15.8 2.4-23.6 1-8-1.5-15.8-5.2-21.5-11-5.2-5.2-8.7-12.1-9.3-19.5-.6-6.7 1.1-13.5 4.3-19.4 3.7-6.7 9.3-12.3 15.9-16.2 6.3-3.8 13.5-5.6 20.6-6.5 8.1-.9 16.4-.9 24.6-.2 5.1.4 10.2.9 15.3 1.3 2.8.2 5.9 1.2 8.6-.2 1.9-.9 2.5-3.2 2.8-5.1 1.2-9 3-18.1 1.9-27.3-.2-1.2-.5-3-2-3.1-1.8.8-2.7 2.7-3.7 4.3-3.1 6-8.9 10.6-15.6 11.9-6.7 1.3-14-2.1-17.1-8.1-1.5-2.5-2.2-5.5-4.4-7.6-1.5-1.4-3.7-1.4-5.5-.6-3.2 1.4-5.3 4.3-7.9 6.5-6.8 6.1-15.4 10.7-24.7 11.2-10.8.7-21.9-5.4-26.4-15.4-.6-1.4-1.1-3.4-2.9-3.6-2-.3-3.5 1.3-4.6 2.7-5.3 6.7-10.3 13.9-17.3 18.9-4.5 3.2-9.9 5.4-15.5 5.3-5.9-.1-11.8-3.3-14.6-8.5-1.3-2.3-1.8-5.2-3.9-7-1.6-1.4-4.1-1.2-5.8-.1-2.6 1.5-4.1 4.2-6.2 6.3-5.8 5.8-14.2 8.7-22.3 7.9-9.8-1-18.7-7.8-22.3-17-.5-1.3-1.2-2.8-2.6-3.2-1.1-.4-2 .4-2.7 1.1-5.4 5-10.8 10.1-17.3 13.6-6.6 3.5-13.9 5.8-21.4 5.6-7.9.1-15.8-2.3-22.2-6.8-5.4-3.7-9.7-8.9-12.2-15-.7-1.6-1.6-3.4-3.4-3.8-1.6-.4-3 .8-3.9 2-2.7 3.8-6.2 7.1-10.1 9.6-6 3.9-13 6.6-20.3 6.6-5.6 0-11.2-2.1-15.2-6-4.3-4.2-6.6-10.1-7.5-16-1.1-7.7.5-15.5 2.7-22.8 1.4-4.8 3.2-9.4 4.3-14.3.6-2.5.8-5.2-.3-7.5-.9-1.8-2.8-2.9-4.6-3.7-2-.8-4.1.3-5.5 1.6-1.4 1.3-2.1 3-2.9 4.7-4.9 11.8-11.5 22.9-19.6 32.8-7.8 9.6-17.1 17.9-27.1 25.2-11.4 8.1-24.5 14-38.4 15.9-10.1 1.4-20.6.6-30.4-2.3-5.8-1.7-11.5-4.1-16.5-7.6-8.6-6-15.5-14.3-20.4-23.5-3.8-7.1-6.7-14.7-8.8-22.5-2.9-11.1-3.9-22.5-4.4-33.9v-7.8c.2-8.4 1-16.8 2.7-25 3-14.9 8.4-29.2 15.7-42.5 5.8-10.4 12.7-20.2 21.4-28.3 9.5-8.9 21-15.8 33.7-18.6 12.1-2.7 25.1-2 36.4 3.2 3.4 1.5 6.4 3.7 10 4.8 2.5.8 5.4.5 7.5-1.1 3.2-2.5 4.7-6.5 7.4-9.5 3.4-3.7 8.9-5.2 13.7-3.8 4.5 1.3 8 5.2 9.1 9.7.7 3 .3 6.1-.6 9-1.4 4.1-3.7 7.8-5.9 11.5-7.3 12.6-12.8 26.2-16.3 40.3-1.1 4.3-2 8.8-3.7 12.9-1.6 3.9-4.1 7.6-7.7 10-3.1 2.1-7.2 3.1-10.9 2-3.4-1-6-3.8-7.4-7-1.6-3.4-2.1-7.3-1.6-11.1 1-8.9 5.9-17 6.1-26.1.2-5.1-1.5-10.4-5.5-13.7-5.6-4.8-13.5-6.1-20.6-5.1-8.4 1.1-16.3 5.1-22.5 10.8-6.7 6.2-11.7 14-15.7 22.1-11.6 23.2-16.7 49.8-13.7 75.6 1 8.4 3 16.8 7 24.4 2.5 4.8 5.8 9.1 9.9 12.5 5.3 4.4 11.7 7.4 18.5 8.7 9.7 1.9 19.9.6 29-2.9 12.2-4.7 22.8-13.1 31.2-23 4.5-5.1 8.4-10.7 12.2-16.4 3.8-5.3 7.8-10.9 9.3-17.4 1-4.3.1-8.7-.9-12.9-.7-5.8 1.5-11.7 5.3-16 2.4-2.5 5.4-4.8 8.9-5.5 3.3-.6 7 0 9.8 2.1 3.1 2.2 4.7 6.4 3.6 10.1-.7 2.4-1.5 4.9-.8 7.4.7 2.1 2.8 3.4 4.9 3.5 4.8.4 9.8-.5 14.4 1.1 5.4 2.1 10.2 6.4 12 12.1 1.2 3.8 1.6 8.1.4 11.9-2.1 7.4-4.7 14.7-6.1 22.3-.4 2.5-.8 5.1-.1 7.6.4 1.8 2 3.4 3.9 3.5 3.3.3 6.3-1.5 8.6-3.7 4.7-4.7 7.8-10.7 10-16.9 2.7-7.5 4.1-15.4 6.1-23.1 2.1-7.9 5.3-15.6 10.3-22.1 7.4-9.8 19.4-16.1 31.8-15.8 6.9.1 13.7 2.8 18.6 7.8 4.1 4.2 6.3 9.9 7.2 15.7 1.5 9.8-.3 20.1-4.8 29-6.2 12.2-18.9 20.9-32.6 22-2 .2-4.3.1-5.8 1.6-1.3 1.3-1.2 3.3-1 5 .5 4.6 2 9.3 5.1 12.9 3.6 3.7 9 6.3 14.3 5.1 6.1-1.3 11.3-5.2 15.6-9.4 4.1-4.1 7.7-8.7 11-13.5 4.6-6.6 7.4-14.2 10.2-21.6 2.7-7.3 5.2-14.7 9.7-21.1 3.6-5.4 8.3-10.1 13.9-13.5 6.2-3.9 13.6-5.9 21-5.5 2.3.1 4.9.2 6.8-1.2 1.7-1.3 2.3-3.6 2.3-5.7 0-3.8.4-7.5.7-11.3.5-5.9 1-11.8 1.8-17.6 1.7-14.6 4.7-29 8.6-43.1 2-7.1 4.6-14.3 9.1-20.3 1.9-2.7 4.2-5.3 7.2-6.9 2.9-1.7 6.6-1.6 9.7-.7 4 1.2 6.6 5 8.2 8.6 2.9 7.1 2.1 15 1.5 22.5-.8 11.8-3.6 23.4-6 35-2.1 10.2-3.8 20.5-5.7 30.7-2.6 14-5.1 28.1-7.7 42.1-2.2 11.5-4.7 23.2-3.3 35 .4 3.1.8 6.5 2.9 8.9 1.5 1.7 4 2.1 6 1.4 2.7-.9 4.6-3.3 6-5.7 3.3-5.6 6.2-11.5 9.1-17.4 4.2-8.2 8.4-16.7 9.8-25.9 2.2-14 3.7-28.2 5.7-42.3 1.6-10.5 3.4-21 5.1-31.4 2.1-13.1 4.5-26.1 8.2-38.8 1.8-6 4.2-11.9 8.4-16.6 3.8-3.8 8.3-6.5 13.3-7zM478 487.8c-2 .6-3.6 2.2-4.9 3.8-2.9 3.7-5.1 7.9-6.6 12.4-1.6 4.8-3.1 9.8-2.5 14.8.1 1.5 1.6 2.6 3 2.6 2.7.1 5.1-1.4 7.2-3 4.7-3.3 7.7-8.4 9.8-13.6 1.3-3.3 2.2-6.9 1.9-10.5-.2-2.4-1.4-4.9-3.5-6.1-1.3-.8-3-.9-4.4-.4zm85.7 11.2c-5.6 1-10.6 4.3-14.2 8.7-3.9 4.7-6.6 10.4-8 16.4-2.1 8.5-2.3 17.5 0 26 .7 2.6 1.9 5.2 3.9 7.1 1.3 1.3 3.1 2 4.9 2.1 4.7.7 9.1-1.9 12.7-4.6 4.5-3.3 7.4-8.2 9.2-13.4 1.1-3.2.4-6.6.1-9.9-.5-6.7-.5-13.4-.1-20.1.1-2.3.8-4.5.8-6.8 0-1.8-.7-3.8-2.4-4.8-2.1-1.3-4.6-1.1-6.9-.7zm133.7 119.6c-4.8.3-9.6 1.3-14.1 3.2-4.9 2-9.1 5.7-11.2 10.5-1.4 3-2 6.6-.5 9.6 1.5 3.1 4.3 5.4 7.4 6.8 4.3 1.9 9.1 2.2 13.6 1.7 14.2-1.6 27.7-8.9 36.7-20 1.8-2.2 3.2-4.7 4.7-7.1.4-.8 1-2.1.1-2.8-1.1-.8-2.5-.5-3.7-.5-5.1-.3-10.2-.8-15.3-1-5.9-.3-11.8-.8-17.7-.4z"/> </svg> </a> <a href=https://www.linkedin.com/in/ibtisam-iq/ target=_blank rel=noopener title="Connect with me on LinkedIn" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/ibtisam-iq target=_blank rel=noopener title="Follow me on GitHub" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://hub.docker.com/u/mibtisam target=_blank rel=noopener title="View my Docker Hub repositories" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg> </a> <a href=https://ibtisam-iq.com target=_blank rel=noopener title="Visit my personal website" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs.sticky", "navigation.path", "navigation.prune", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.tabs.link", "content.tooltips"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>