<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Nectar is a living engineering knowledge system where I document how I reason about infrastructure and distributed systems in production. It focuses on understanding why systems behave the way they do, exploring trade-offs, failure modes, and real-world constraints â€” not just listing tools or tutorials."><meta name=author content="Muhammad Ibtisam"><link href=https://nectar.ibtisam-iq.com/containers-orchestration/kubernetes/unorganized/unorganized-guide/ rel=canonical><link href=../k8s/ rel=prev><link href=../question-bank/ rel=next><link rel=icon href=../../../../docs/images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Unorganized Guide - Nectar</title><link rel=stylesheet href=../../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../docs/stylesheets/extra.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=Nectar class="md-header__button md-logo" aria-label=Nectar data-md-component=logo> <img src=../../../../docs/images/favicon.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Nectar </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Unorganized Guide </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibtisam-iq/nectar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ibtisam-iq/nectar </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=Nectar class="md-nav__button md-logo" aria-label=Nectar data-md-component=logo> <img src=../../../../docs/images/favicon.svg alt=logo> </a> Nectar </label> <div class=md-nav__source> <a href=https://github.com/ibtisam-iq/nectar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ibtisam-iq/nectar </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Containers & Orchestration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Containers & Orchestration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../docker-compose/Compose/ class=md-nav__link> <span class=md-ellipsis> Docker Compose </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Kubernetes </span> </a> <label class="md-nav__link " for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../master-key/ class=md-nav__link> <span class=md-ellipsis> Master Key </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../00-cluster-setup/ class=md-nav__link> <span class=md-ellipsis> Cluster Setup </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../01-core-concepts/architecture/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../02-cli-operations/kubectl-flags/ class=md-nav__link> <span class=md-ellipsis> CLI Operations </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../03-networking/networking-in-k8s/ class=md-nav__link> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../04-storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../05-scheduling-and-affinity/taints-affinity-guide-a/ class=md-nav__link> <span class=md-ellipsis> Scheduling & Affinity </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../06-resource-management/01-resource-quota-guide/ class=md-nav__link> <span class=md-ellipsis> Resource Management </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../07-security/rbac/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../08-debugging-monitoring/probe/ class=md-nav__link> <span class=md-ellipsis> Debugging & Monitoring </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../09-workloads/pod-guide/ class=md-nav__link> <span class=md-ellipsis> Workloads </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../10-references/imperative-commands/ class=md-nav__link> <span class=md-ellipsis> References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_14 checked> <label class=md-nav__link for=__nav_2_3_14 id=__nav_2_3_14_label tabindex=0> <span class=md-ellipsis> Unorganized </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_14_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_14> <span class="md-nav__icon md-icon"></span> Unorganized </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../k8s/ class=md-nav__link> <span class=md-ellipsis> Kubernetes Notes </span> </a> </li> <li class=md-nav__item> <a href=../../../../k8s.txt class=md-nav__link> <span class=md-ellipsis> Kubernetes Text Notes </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Unorganized Guide </span> </a> </li> <li class=md-nav__item> <a href=../question-bank/ class=md-nav__link> <span class=md-ellipsis> Question Bank </span> </a> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../CKA-KodeKloud-Complete-Notes.pdf class=md-nav__link> <span class=md-ellipsis> CKA KodeKloud Complete Notes </span> </a> </li> <li class=md-nav__item> <a href=../../practice-checklist/ class=md-nav__link> <span class=md-ellipsis> Practice Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../error-logs/ class=md-nav__link> <span class=md-ellipsis> Error Logs </span> </a> </li> <li class=md-nav__item> <a href=../../wazahat-nama/ class=md-nav__link> <span class=md-ellipsis> Wazahat Nama </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../helm/ class=md-nav__link> <span class=md-ellipsis> Helm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../kustomize/ class=md-nav__link> <span class=md-ellipsis> Kustomize </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../containerd/ class=md-nav__link> <span class=md-ellipsis> Containerd </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../delivery/git/gitCheatSheet/ class=md-nav__link> <span class=md-ellipsis> CI/CD & Software Delivery </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../cloud-infrastructure/aws/introduction/ class=md-nav__link> <span class=md-ellipsis> Cloud & Infrastructure </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../servers/ class=md-nav__link> <span class=md-ellipsis> Servers & Runtime Systems </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../observability-security/trivy/Trivy/ class=md-nav__link> <span class=md-ellipsis> Observability & Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../operations/ class=md-nav__link> <span class=md-ellipsis> Operations & Self-Managed Systems </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../scratchpad/ class=md-nav__link> <span class=md-ellipsis> Engineering Scratchpad </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../technical-grounding/ class=md-nav__link> <span class=md-ellipsis> Technical Grounding </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../../docker/ class=md-path__link> <span class=md-ellipsis> Containers & Orchestration </span> </a> </li> <li class=md-path__item> <a href=../../ class=md-path__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> <li class=md-path__item> <a href=../k8s/ class=md-path__link> <span class=md-ellipsis> Unorganized </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h2 id=3-networking-setup><strong>3ï¸âƒ£ Networking Setup</strong><a class=headerlink href=#3-networking-setup title="Link to this section">&para;</a></h2> <p>Kubernetes ek <strong>distributed system hai</strong>, to uske <strong>Control Plane aur Worker Nodes</strong> ek doosre se communicate kar sakein, iske liye networking zaroori hai. </p> <p>âœ”ï¸ <strong>Networking Configuration:</strong> 1. <strong>Nodes ke beech communication allow karna</strong><br> 2. <strong>Pod-to-Pod communication allow karna (CNI Plugin)</strong><br> 3. <strong>Firewall aur Security Groups set karna</strong> </p> <p>Kubernetes <strong>by default networking setup nahi karta</strong>, tumhe <strong>koi CNI (Container Network Interface) plugin</strong> install karna padta hai, jaise:<br> - <strong>Calico</strong><br> - <strong>Flannel</strong><br> - <strong>Cilium</strong> </p> <p>Ye networking plugins <strong>Pods ke beech communication enable karte hain</strong>. </p> <hr> <h2 id=4-container-runtime-docker-containerd-cri-o><strong>4ï¸âƒ£ Container Runtime (Docker, containerd, CRI-O)</strong><a class=headerlink href=#4-container-runtime-docker-containerd-cri-o title="Link to this section">&para;</a></h2> <p>Kubernetes sirf <strong>containers orchestrate</strong> karta hai, lekin <strong>containers run karne ke liye ek runtime bhi chahiye</strong>. </p> <p><strong>Supported Container Runtimes:</strong><br> âœ… <strong>containerd (Recommended)</strong><br> âœ… <strong>Docker (Ab Kubernetes ka default part nahi, lekin work karta hai)</strong><br> âœ… <strong>CRI-O (Agar sirf Kubernetes-specific runtime chahiye to)</strong> </p> <p>Tumhe <strong>pehle se container runtime install karna hoga</strong>, tabhi Kubernetes containers chala sakega. </p> <hr> <h1 id=-tlsssl-setup-using-cert-manager-in-kubernetes><strong>ğŸ” TLS/SSL Setup using Cert-Manager in Kubernetes</strong><a class=headerlink href=#-tlsssl-setup-using-cert-manager-in-kubernetes title="Link to this section">&para;</a></h1> <h2 id=-pehle-yeh-samjho-tlsssl-kyon-zaroori-hai><strong>ğŸ’¡ Pehle Yeh Samjho: TLS/SSL Kyon Zaroori Hai?</strong><a class=headerlink href=#-pehle-yeh-samjho-tlsssl-kyon-zaroori-hai title="Link to this section">&para;</a></h2> <ol> <li><strong>Default HTTP traffic secure nahi hoti</strong> â†’ Man-in-the-middle (MITM) attacks possible hote hain. </li> <li><strong>TLS (Transport Layer Security)</strong> encrypt karta hai communication ko, taake data secure ho. </li> <li><strong>Websites ko HTTPS par chalane ke liye certificates chahiye hote hain.</strong> </li> <li><strong>Manually SSL certificate manage karna tedious hai</strong> â†’ Cert-Manager automatically manage karta hai. </li> </ol> <hr> <h2 id=-cert-manager-kya-hai><strong>ğŸš€ Cert-Manager Kya Hai?</strong><a class=headerlink href=#-cert-manager-kya-hai title="Link to this section">&para;</a></h2> <p><strong>Cert-Manager ek Kubernetes tool hai</strong> jo <strong>automatic TLS certificates issue &amp; renew</strong> karta hai. Yeh <strong>Let's Encrypt ya custom CA</strong> (Certificate Authority) se <strong>free SSL certificates</strong> generate karta hai.</p> <h3 id=-features><strong>âœ… Features:</strong><a class=headerlink href=#-features title="Link to this section">&para;</a></h3> <ul> <li><strong>Automatic SSL Certificate Issuance</strong> (Let's Encrypt, Vault, Self-Signed, etc.)</li> <li><strong>Certificate Renewal</strong> (Auto-renew before expiry)</li> <li><strong>Kubernetes Native Integration</strong> (Works with Ingress)</li> <li><strong>Multiple ACME Issuers Supported</strong> (HTTP-01, DNS-01 challenges)</li> </ul> <hr> <h1 id=-step-by-step-installing-cert-manager><strong>ğŸ“Œ Step-by-Step: Installing Cert-Manager</strong><a class=headerlink href=#-step-by-step-installing-cert-manager title="Link to this section">&para;</a></h1> <p>Cert-Manager ko install karne ke liye <strong>kubectl apply</strong> ya <strong>Helm chart</strong> ka use hota hai. </p> <h3 id=step-1-install-cert-manager-using-helm><strong>Step 1ï¸âƒ£: Install Cert-Manager using Helm</strong><a class=headerlink href=#step-1-install-cert-manager-using-helm title="Link to this section">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://github.com/cert-manager/cert-manager/releases/latest/download/cert-manager.yaml
</span></code></pre></div> <blockquote> <p><strong>Check if running properly:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>cert-manager
</span></code></pre></div></p> </blockquote> <p>âœ… <strong>Agar Cert-Manager ke pods Running state mein hain, toh installation successful hai.</strong></p> <hr> <h1 id=-step-2-setup-lets-encrypt-issuer><strong>ğŸ“œ Step 2ï¸âƒ£: Setup Let's Encrypt Issuer</strong><a class=headerlink href=#-step-2-setup-lets-encrypt-issuer title="Link to this section">&para;</a></h1> <p>Let's Encrypt <strong>TLS certificates issue karta hai</strong>, but uske liye <strong>Issuer ya ClusterIssuer define karna padta hai.</strong> </p> <h3 id=-issuer-vs-clusterissuer><strong>ğŸ‘‰ Issuer vs. ClusterIssuer</strong><a class=headerlink href=#-issuer-vs-clusterissuer title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th>Feature</th> <th>Issuer</th> <th>ClusterIssuer</th> </tr> </thead> <tbody> <tr> <td><strong>Scope</strong></td> <td>Namespace-specific</td> <td>Cluster-wide</td> </tr> <tr> <td><strong>Use case</strong></td> <td>Single namespace ke liye</td> <td>Pura cluster cover kare</td> </tr> </tbody> </table> <p>ğŸ”¹ <strong>Issuer Example (Namespace Specific)</strong> </p> <p>ğŸ”¹ <strong>ClusterIssuer Example (Cluster-Wide)</strong></p> <hr> <h1 id=-step-3-create-a-tls-certificate><strong>ğŸ“Œ Step 3ï¸âƒ£: Create a TLS Certificate</strong><a class=headerlink href=#-step-3-create-a-tls-certificate title="Link to this section">&para;</a></h1> <p>Ab hum ek <strong>Certificate Resource</strong> create karenge jo <strong>Cert-Manager ko bolega ki ek SSL certificate issue kare.</strong></p> <p><div class="language-yaml highlight"><pre><span></span><code><span id=__span-2-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
</span><span id=__span-2-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Certificate</span>
</span><span id=__span-2-3><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-4><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-cert</span>
</span><span id=__span-2-5><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-2-6><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-2-7><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-tls</span>
</span><span id=__span-2-8><span class=w>  </span><span class=nt>issuerRef</span><span class=p>:</span>
</span><span id=__span-2-9><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">letsencrypt-prod</span>
</span><span id=__span-2-10><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIssuer</span>
</span><span id=__span-2-11><span class=w>  </span><span class=nt>dnsNames</span><span class=p>:</span>
</span><span id=__span-2-12><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</span><span id=__span-2-13><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span>
</span></code></pre></div> âš¡ <strong>Yeh <code>example.com</code> aur <code>www.example.com</code> ke liye TLS certificate generate karega!</strong><br> âš¡ <strong>Generated certificate secret <code>example-com-tls</code> mein store hoga.</strong> </p> <blockquote> <p><strong>Check if Cert-Manager Issued the Certificate:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1>kubectl<span class=w> </span>get<span class=w> </span>certificate<span class=w> </span>-n<span class=w> </span>default
</span></code></pre></div></p> </blockquote> <hr> <h1 id=-step-4-apply-tls-to-ingress><strong>ğŸ“Œ Step 4ï¸âƒ£: Apply TLS to Ingress</strong><a class=headerlink href=#-step-4-apply-tls-to-ingress title="Link to this section">&para;</a></h1> <p>Ab hum <strong>Ingress configuration ko update</strong> karenge taake yeh HTTPS traffic ko support kare.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
</span><span id=__span-4-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
</span><span id=__span-4-3><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-4-4><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-ingress</span>
</span><span id=__span-4-5><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-4-6><span class=w>    </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class=s>&quot;nginx&quot;</span>
</span><span id=__span-4-7><span class=w>    </span><span class=nt>cert-manager.io/cluster-issuer</span><span class=p>:</span><span class=w> </span><span class=s>&quot;letsencrypt-prod&quot;</span>
</span><span id=__span-4-8><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-4-9><span class=w>  </span><span class=nt>tls</span><span class=p>:</span>
</span><span id=__span-4-10><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hosts</span><span class=p>:</span>
</span><span id=__span-4-11><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</span><span id=__span-4-12><span class=w>    </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-tls</span>
</span><span id=__span-4-13><span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
</span><span id=__span-4-14><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</span><span id=__span-4-15><span class=w>    </span><span class=nt>http</span><span class=p>:</span>
</span><span id=__span-4-16><span class=w>      </span><span class=nt>paths</span><span class=p>:</span>
</span><span id=__span-4-17><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
</span><span id=__span-4-18><span class=w>        </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
</span><span id=__span-4-19><span class=w>        </span><span class=nt>backend</span><span class=p>:</span>
</span><span id=__span-4-20><span class=w>          </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-4-21><span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-service</span>
</span><span id=__span-4-22><span class=w>            </span><span class=nt>port</span><span class=p>:</span>
</span><span id=__span-4-23><span class=w>              </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span></code></pre></div> <p>ğŸ”¹ <strong>TLS Section Explanation:</strong><br> - <strong>cert-manager.io/cluster-issuer: "letsencrypt-prod"</strong> â†’ Cert-Manager Let's Encrypt se cert issue karega.<br> - <strong>secretName: example-com-tls</strong> â†’ Yeh generated TLS cert use karega.<br> - <strong>host: example.com</strong> â†’ Yeh certificate is domain par apply hoga. </p> <h3 id=-final-step-apply-everything><strong>âœ… Final Step: Apply Everything</strong><a class=headerlink href=#-final-step-apply-everything title="Link to this section">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>my-ingress.yaml
</span></code></pre></div> Aur <strong>ab HTTPS traffic automatically secure ho jayegi! ğŸš€</strong></p> <hr> <h1 id=-summary><strong>ğŸ¯ Summary</strong><a class=headerlink href=#-summary title="Link to this section">&para;</a></h1> <ol> <li><strong>Cert-Manager Install Kiya</strong></li> <li><strong>Let's Encrypt Issuer Setup Kiya</strong></li> <li><strong>TLS Certificate Generate Kiya</strong></li> <li><strong>Ingress Resource ke saath TLS Implement Kiya</strong></li> </ol> <h3 id=-benefits><strong>ğŸ’¡ Benefits</strong><a class=headerlink href=#-benefits title="Link to this section">&para;</a></h3> <p>âœ… <strong>Auto-Renewal</strong> â†’ No manual SSL renewals<br> âœ… <strong>HTTPS Security</strong> â†’ Secure user traffic<br> âœ… <strong>Cloud-Native</strong> â†’ Kubernetes friendly solution </p> <p>Ab <strong>tumhara Kubernetes cluster full production-ready hai with HTTPS!</strong> ğŸ”¥</p> <hr> <h2 id=cert-manager-kis-machine-par-run-karein><strong>Cert-Manager Kis Machine Par Run Karein?</strong><a class=headerlink href=#cert-manager-kis-machine-par-run-karein title="Link to this section">&para;</a></h2> <p>Cert-Manager <strong>Kubernetes cluster ke Control Plane nodes par run hota hai,</strong> kyunki yeh ek <strong>Kubernetes-native application</strong> hai jo <strong>APIs ko monitor</strong> karta hai aur <strong>certificates manage</strong> karta hai. </p> <h3 id=-kis-machine-par-run-hoga><strong>ğŸ‘‰ Kis Machine Par Run Hoga?</strong><a class=headerlink href=#-kis-machine-par-run-hoga title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th>Component</th> <th>Node Type</th> <th>EC2 Instance</th> </tr> </thead> <tbody> <tr> <td><strong>Cert-Manager Pods</strong></td> <td><strong>Control Plane Nodes</strong></td> <td><strong>EC2 #1 &amp; EC2 #2</strong></td> </tr> <tr> <td><strong>Ingress Controller (NGINX, Traefik, etc.)</strong></td> <td><strong>Worker Nodes</strong></td> <td><strong>EC2 #3, EC2 #4, EC2 #5</strong></td> </tr> <tr> <td><strong>TLS Certificates (Secrets)</strong></td> <td><strong>Kubernetes Secret Store</strong></td> <td><strong>Across Cluster</strong></td> </tr> </tbody> </table> <h3 id=-breakdown-of-deployment><strong>ğŸ’¡ Breakdown of Deployment:</strong><a class=headerlink href=#-breakdown-of-deployment title="Link to this section">&para;</a></h3> <ol> <li><strong>Cert-Manager</strong> â†’ <strong>Control Plane nodes pe deploy hoga (EC2 #1 &amp; EC2 #2)</strong> </li> <li><strong>Ingress Controller (e.g., NGINX)</strong> â†’ <strong>Worker Nodes pe run karega (EC2 #3, EC2 #4, EC2 #5)</strong> </li> <li><strong>TLS Certificates</strong> â†’ <strong>Cluster ke Secret Store mein store honge</strong> </li> <li><strong>Application Traffic</strong> â†’ <strong>Ingress Controller handle karega, jo Worker Nodes pe hoga</strong> </li> </ol> <hr> <h1 id=-self-managed-kubernetes-on-aws-production-ready--step-by-step-summary><strong>ğŸš€ Self-Managed Kubernetes on AWS (Production-Ready) â€“ Step-by-Step Summary</strong><a class=headerlink href=#-self-managed-kubernetes-on-aws-production-ready--step-by-step-summary title="Link to this section">&para;</a></h1> <p>ğŸ–¥ï¸ <strong>Total EC2 Instances:</strong> <strong>5 (2 Control Plane + 3 Worker Nodes)</strong> </p> <table> <thead> <tr> <th><strong>Step</strong></th> <th><strong>Task</strong></th> <th><strong>Target EC2 Nodes</strong></th> </tr> </thead> <tbody> <tr> <td><strong>1ï¸âƒ£ Create VPC &amp; Networking</strong></td> <td>VPC, Subnets, Internet Gateway, Route Tables, Security Groups</td> <td>AWS Console / CLI</td> </tr> <tr> <td><strong>2ï¸âƒ£ Launch 5 EC2 Instances</strong></td> <td>2 Control Plane + 3 Worker Nodes (Ubuntu)</td> <td>AWS EC2</td> </tr> <tr> <td><strong>3ï¸âƒ£ Configure EC2 Instances</strong></td> <td>Set hostnames, disable swap, open ports</td> <td>All 5 EC2 Instances</td> </tr> <tr> <td><strong>4ï¸âƒ£ Install Dependencies</strong></td> <td>Install Docker, Kubeadm, Kubelet, Kubectl</td> <td>All 5 EC2 Instances</td> </tr> <tr> <td><strong>5ï¸âƒ£ Initialize Kubernetes Cluster</strong></td> <td>Create K8s cluster using kubeadm</td> <td><strong>Control Plane (EC2 #1)</strong></td> </tr> <tr> <td><strong>6ï¸âƒ£ Join Worker Nodes</strong></td> <td>Join worker nodes to cluster</td> <td><strong>Worker Nodes (EC2 #3, #4, #5)</strong></td> </tr> <tr> <td><strong>7ï¸âƒ£ Install CNI (Calico / Flannel)</strong></td> <td>Enable networking between pods</td> <td>All Nodes</td> </tr> <tr> <td><strong>8ï¸âƒ£ Verify Cluster Status</strong></td> <td>Check nodes, pods, and networking</td> <td>Control Plane</td> </tr> <tr> <td><strong>9ï¸âƒ£ Install Storage (EBS / NFS / Longhorn)</strong></td> <td>Setup Persistent Volumes</td> <td>Worker Nodes</td> </tr> <tr> <td><strong>ğŸ”Ÿ Install NGINX Ingress Controller</strong></td> <td>Manage external traffic</td> <td>Worker Nodes</td> </tr> <tr> <td><strong>1ï¸âƒ£1ï¸âƒ£ Install Cert-Manager</strong></td> <td>Automate SSL/TLS certificate management</td> <td><strong>Control Plane (EC2 #1 &amp; #2)</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£2ï¸âƒ£ Setup ClusterIssuer</strong></td> <td>Enable Let's Encrypt for auto TLS</td> <td>Control Plane</td> </tr> <tr> <td><strong>1ï¸âƒ£3ï¸âƒ£ Create Application Deployment</strong></td> <td>Deploy app with Persistent Storage</td> <td>Worker Nodes</td> </tr> <tr> <td><strong>1ï¸âƒ£4ï¸âƒ£ Create Ingress Resource</strong></td> <td>Route external traffic via Ingress</td> <td>Worker Nodes</td> </tr> <tr> <td><strong>1ï¸âƒ£5ï¸âƒ£ Apply TLS with Cert-Manager</strong></td> <td>Secure ingress with HTTPS</td> <td>Control Plane</td> </tr> <tr> <td><strong>1ï¸âƒ£6ï¸âƒ£ Final Testing</strong></td> <td>Check HTTPS, storage, scaling</td> <td>Entire Cluster</td> </tr> </tbody> </table> <p>âœ… <strong>Now, Your Self-Managed Kubernetes is Production-Ready! ğŸš€</strong></p> <hr> <h2 id=clarification-kis-step-ko-konsi-ec2-machine-par-run-karna-hai><strong>Clarification: Kis Step Ko Konsi EC2 Machine Par Run Karna Hai?</strong><a class=headerlink href=#clarification-kis-step-ko-konsi-ec2-machine-par-run-karna-hai title="Link to this section">&para;</a></h2> <p>Agar <strong>Control Plane</strong> ya <strong>Worker Nodes</strong> mention hain, toh iska matlab hamesha <strong>sabhi relevant machines</strong> hain (jitni control plane ya worker nodes hain). Lekin kuch specific commands sirf ek hi machine par run hoti hain. </p> <hr> <h3 id=-step-by-step-ec2-mapping><strong>ğŸ”° Step-by-Step EC2 Mapping</strong><a class=headerlink href=#-step-by-step-ec2-mapping title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th><strong>Step</strong></th> <th><strong>Task</strong></th> <th><strong>Target EC2 Machines</strong></th> <th><strong>Run on All or One?</strong></th> </tr> </thead> <tbody> <tr> <td><strong>1ï¸âƒ£ Create VPC &amp; Networking</strong></td> <td>VPC, Subnets, Internet Gateway, Route Tables, Security Groups</td> <td>AWS Console / CLI</td> <td><strong>(AWS Level)</strong></td> </tr> <tr> <td><strong>2ï¸âƒ£ Launch 5 EC2 Instances</strong></td> <td>2 Control Plane + 3 Worker Nodes</td> <td>AWS EC2</td> <td><strong>(AWS Level)</strong></td> </tr> <tr> <td><strong>3ï¸âƒ£ Configure EC2 Instances</strong></td> <td>Set hostnames, disable swap, open ports</td> <td><strong>All 5 EC2 Instances</strong></td> <td><strong>Run on All</strong></td> </tr> <tr> <td><strong>4ï¸âƒ£ Install Dependencies</strong></td> <td>Install Docker, Kubeadm, Kubelet, Kubectl</td> <td><strong>All 5 EC2 Instances</strong></td> <td><strong>Run on All</strong></td> </tr> <tr> <td><strong>5ï¸âƒ£ Initialize Kubernetes Cluster</strong></td> <td><code>kubeadm init</code> to create cluster</td> <td><strong>Only EC2 #1 (First Control Plane Node)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>6ï¸âƒ£ Join Worker Nodes</strong></td> <td>Join worker nodes using <code>kubeadm join</code></td> <td><strong>Worker Nodes (EC2 #3, #4, #5)</strong></td> <td><strong>Run on Each</strong></td> </tr> <tr> <td><strong>7ï¸âƒ£ Install CNI (Calico / Flannel)</strong></td> <td>Enable networking between pods</td> <td><strong>Only EC2 #1 (Control Plane)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>8ï¸âƒ£ Verify Cluster Status</strong></td> <td>Check nodes, pods, networking</td> <td><strong>Only EC2 #1 (Control Plane)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>9ï¸âƒ£ Install Storage (EBS / NFS / Longhorn)</strong></td> <td>Setup Persistent Volumes</td> <td><strong>All Worker Nodes (EC2 #3, #4, #5)</strong></td> <td><strong>Run on All</strong></td> </tr> <tr> <td><strong>ğŸ”Ÿ Install NGINX Ingress Controller</strong></td> <td>Manage external traffic</td> <td><strong>All Worker Nodes (EC2 #3, #4, #5)</strong></td> <td><strong>Run on All</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£1ï¸âƒ£ Install Cert-Manager</strong></td> <td>Automate SSL/TLS</td> <td><strong>Both Control Plane Nodes (EC2 #1 &amp; #2)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£2ï¸âƒ£ Setup ClusterIssuer</strong></td> <td>Enable Let's Encrypt for TLS</td> <td><strong>Only EC2 #1 (Control Plane)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£3ï¸âƒ£ Create Application Deployment</strong></td> <td>Deploy app with Persistent Storage</td> <td><strong>Any Worker Node (EC2 #3, #4, #5)</strong></td> <td><strong>Run Once (YAML applies to all)</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£4ï¸âƒ£ Create Ingress Resource</strong></td> <td>Route external traffic</td> <td><strong>Any Worker Node (EC2 #3, #4, #5)</strong></td> <td><strong>Run Once</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£5ï¸âƒ£ Apply TLS with Cert-Manager</strong></td> <td>Secure ingress with HTTPS</td> <td><strong>Only EC2 #1 (Control Plane)</strong></td> <td><strong>Run on One</strong></td> </tr> <tr> <td><strong>1ï¸âƒ£6ï¸âƒ£ Final Testing</strong></td> <td>Check HTTPS, storage, scaling</td> <td><strong>Entire Cluster</strong></td> <td><strong>Test from Anywhere</strong></td> </tr> </tbody> </table> <hr> <h2 id=-key-points-to-remember><strong>ğŸ“Œ Key Points to Remember:</strong><a class=headerlink href=#-key-points-to-remember title="Link to this section">&para;</a></h2> <ol> <li><strong>Cluster Initialization (<code>kubeadm init</code>) sirf pehli Control Plane Node (EC2 #1) pe chalega.</strong></li> <li><strong>Worker Nodes (EC2 #3, #4, #5) pe <code>kubeadm join</code> individually run hoga.</strong></li> <li><strong>Kubernetes Networking (CNI) aur TLS setup sirf Control Plane Node pe hoga.</strong></li> <li><strong>Ingress Controller aur Persistent Storage Worker Nodes pe chalega.</strong></li> <li><strong>Application Deployment aur Ingress Resource kisi bhi Worker Node pe apply ho sakti hai, because YAML is cluster-wide.</strong></li> </ol> <p>âœ… <strong>Ab har step ke liye clear hai ke kis machine pe run karna hai!</strong> ğŸš€</p> <hr> <p>Bhai, <strong>StorageClass</strong> ka kaam <strong>PV &amp; PVC ke beech automation aur abstraction provide karna</strong> hai. Ye <strong>directly PV nahi hoti</strong>, balki PVs banane ka <strong>blueprint</strong> hoti hai. </p> <hr> <h2 id=-pehle-storage-ka-flow-samjho><strong>ğŸ’¡ Pehle Storage Ka Flow Samjho:</strong><a class=headerlink href=#-pehle-storage-ka-flow-samjho title="Link to this section">&para;</a></h2> <h3 id=-without-storageclass-manual-approach>ğŸ”¹ <strong>Without StorageClass</strong> (Manual Approach):<a class=headerlink href=#-without-storageclass-manual-approach title="Link to this section">&para;</a></h3> <ol> <li>Tum <strong>manually</strong> ek <strong>PersistentVolume (PV)</strong> create karte ho. </li> <li>Phir koi pod jab <strong>PersistentVolumeClaim (PVC)</strong> request bhejta hai, toh us PV se manually bind hoti hai. </li> <li>Agar storage types (EBS, NFS, etc.) change karni ho, toh naye PVs manually banane padenge. </li> </ol> <h3 id=-with-storageclass-dynamic-approach>ğŸ”¹ <strong>With StorageClass</strong> (Dynamic Approach):<a class=headerlink href=#-with-storageclass-dynamic-approach title="Link to this section">&para;</a></h3> <ol> <li>Tum <strong>ek StorageClass define karte ho</strong> (e.g., AWS EBS, NFS, Longhorn). </li> <li>Jab koi pod <strong>PVC create karta hai</strong>, toh StorageClass <strong>automatically ek PV generate</strong> kar deti hai. </li> <li>Tumhare cluster mein <strong>different storage types</strong> ka flexible management possible ho jata hai.</li> </ol> <hr> <h2 id=-storageclass-kya-hai><strong>ğŸ“Œ StorageClass Kya Hai?</strong><a class=headerlink href=#-storageclass-kya-hai title="Link to this section">&para;</a></h2> <ul> <li><strong>Blueprint</strong> hai jo batati hai ki <strong>kaunsa backend storage</strong> use hoga. </li> <li>Ye <strong>dynamically PV create karne</strong> ke liye automation provide karti hai. </li> <li>Tumhare cluster mein <strong>multiple StorageClasses</strong> ho sakti hain (e.g., SSD, HDD, NFS). </li> <li>PVC jab koi storage request karega, toh <strong>StorageClass automatically usko PV allocate kar degi</strong>. </li> </ul> <hr> <h2 id=-storageclass-kis-kis-se-judi-hai><strong>ğŸ¤” StorageClass Kis Kis Se Judi Hai?</strong><a class=headerlink href=#-storageclass-kis-kis-se-judi-hai title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th><strong>Component</strong></th> <th><strong>StorageClass ke sath relation</strong></th> </tr> </thead> <tbody> <tr> <td><strong>PersistentVolume (PV)</strong></td> <td>StorageClass ka use karke <strong>dynamically generate ho sakta hai</strong></td> </tr> <tr> <td><strong>PersistentVolumeClaim (PVC)</strong></td> <td>StorageClass ka reference use karta hai taake <strong>correct PV allocate ho</strong></td> </tr> <tr> <td><strong>Pods</strong></td> <td>PVC ko use karte hain taake required storage mile</td> </tr> </tbody> </table> <hr> <h2 id=-example-storageclass-in-action><strong>ğŸ“œ Example: StorageClass in Action</strong><a class=headerlink href=#-example-storageclass-in-action title="Link to this section">&para;</a></h2> <h3 id=step-1-define-storageclass><strong>Step 1: Define StorageClass</strong><a class=headerlink href=#step-1-define-storageclass title="Link to this section">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage.k8s.io/v1</span>
</span><span id=__span-6-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">StorageClass</span>
</span><span id=__span-6-3><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-6-4><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-ebs-storage</span>
</span><span id=__span-6-5><span class=nt>provisioner</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/aws-ebs</span>
</span><span id=__span-6-6><span class=nt>parameters</span><span class=p>:</span>
</span><span id=__span-6-7><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gp2</span><span class=w>  </span><span class=c1># SSD storage</span>
</span></code></pre></div> <h3 id=step-2-pvc-request-using-storageclass><strong>Step 2: PVC Request Using StorageClass</strong><a class=headerlink href=#step-2-pvc-request-using-storageclass title="Link to this section">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-7-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
</span><span id=__span-7-3><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-7-4><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-pvc</span>
</span><span id=__span-7-5><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-7-6><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
</span><span id=__span-7-7><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
</span><span id=__span-7-8><span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-7-9><span class=w>    </span><span class=nt>requests</span><span class=p>:</span>
</span><span id=__span-7-10><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10Gi</span>
</span><span id=__span-7-11><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-ebs-storage</span>
</span></code></pre></div> <h3 id=step-3-automatic-pv-creation><strong>Step 3: Automatic PV Creation</strong><a class=headerlink href=#step-3-automatic-pv-creation title="Link to this section">&para;</a></h3> <ul> <li>Kubernetes <strong>StorageClass ke basis pe AWS EBS volume create karega</strong>. </li> <li>Ye PV <strong>dynamically bind</strong> ho jayega PVC ke sath. </li> </ul> <hr> <h2 id=-conclusion><strong>ğŸ”¥ Conclusion:</strong><a class=headerlink href=#-conclusion title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th><strong>Concept</strong></th> <th><strong>Explanation</strong></th> </tr> </thead> <tbody> <tr> <td><strong>PV (PersistentVolume)</strong></td> <td>Cluster-wide storage resource jo manually ya dynamically create hoti hai.</td> </tr> <tr> <td><strong>PVC (PersistentVolumeClaim)</strong></td> <td>Application ka request jo PV allocate hone ke liye kiya jata hai.</td> </tr> <tr> <td><strong>StorageClass</strong></td> <td>Ek abstraction layer jo <strong>PV create karne ka tareeqa</strong> define karti hai.</td> </tr> </tbody> </table> <p>âœ… <strong>So, StorageClass ek automation layer hai jo PVC ki request ko PVs se bind karne ka kaam karti hai!</strong> ğŸš€</p> <hr> <p>Haan bhai, <strong>tera confusion bilkul valid hai</strong>, aur ye confusion tab tak rahegi jab tak tu <strong>EKS cluster banane ke different methods</strong> nahi samjhega. </p> <p>Pehle ye samajh le <strong>EKS cluster create karne ke multiple tareeqe hain</strong>, aur har tareeqe ka <strong>specific use case</strong> hai. </p> <hr> <h1 id=-aws-eks-cluster-banane-ke-3-major-methods><strong>ğŸ¯ AWS EKS Cluster Banane ke 3 Major Methods</strong><a class=headerlink href=#-aws-eks-cluster-banane-ke-3-major-methods title="Link to this section">&para;</a></h1> <table> <thead> <tr> <th><strong>Method</strong></th> <th><strong>Tools Used</strong></th> <th><strong>How It Works?</strong></th> <th><strong>When to Use?</strong></th> </tr> </thead> <tbody> <tr> <td><strong>1ï¸âƒ£ eksctl</strong></td> <td><code>eksctl</code> CLI</td> <td>Single command se <strong>fully automated EKS cluster</strong> create hota hai</td> <td>âœ… <strong>Quick Testing</strong> ya <strong>Demo Cluster</strong> ke liye best</td> </tr> <tr> <td><strong>2ï¸âƒ£ AWS Console</strong></td> <td>AWS UI</td> <td>Manually AWS console me <strong>one by one steps</strong> complete karne hote hain</td> <td>âœ… Jab <strong>GUI prefer ho</strong> ya <strong>granular control</strong> chahiye</td> </tr> <tr> <td><strong>3ï¸âƒ£ Terraform / CloudFormation</strong></td> <td>IaC (Terraform, CloudFormation)</td> <td>Infrastructure-as-Code likh ke <strong>repeatable &amp; scalable</strong> cluster banaya jata hai</td> <td>âœ… <strong>Production</strong> me, <strong>Automation</strong> aur <strong>Custom Configurations</strong> ke liye</td> </tr> </tbody> </table> <hr> <h1 id=-1-eksctl--easiest--quickest-way><strong>ğŸ”¹ 1ï¸âƒ£ eksctl â€“ Easiest &amp; Quickest Way</strong><a class=headerlink href=#-1-eksctl--easiest--quickest-way title="Link to this section">&para;</a></h1> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1>eksctl<span class=w> </span>create<span class=w> </span>cluster<span class=w> </span>--name<span class=w> </span>demo-cluster<span class=w> </span>--region<span class=w> </span>us-east-1<span class=w> </span>--fargate
</span></code></pre></div> Toh ye <strong>automatically</strong>: âœ… <strong>VPC</strong> create karega<br> âœ… <strong>EKS Cluster</strong> create karega<br> âœ… <strong>Fargate Profile</strong> (Serverless Nodes) configure karega </p> <hr> <h1 id=-2-aws-console--gui-based-manual-setup><strong>ğŸ”¹ 2ï¸âƒ£ AWS Console â€“ GUI Based Manual Setup</strong><a class=headerlink href=#-2-aws-console--gui-based-manual-setup title="Link to this section">&para;</a></h1> <h2 id=-kya-hai><strong>ğŸ‘‰ Kya hai?</strong><a class=headerlink href=#-kya-hai title="Link to this section">&para;</a></h2> <p>AWS console me <strong>step by step cluster create karne ka tareeqa hai</strong>.<br> Yahan har <strong>resource manually configure</strong> karni hoti hai.</p> <h2 id=-kaise-kaam-karta-hai><strong>ğŸ‘‰ Kaise Kaam Karta Hai?</strong><a class=headerlink href=#-kaise-kaam-karta-hai title="Link to this section">&para;</a></h2> <p>1ï¸âƒ£ <strong>AWS Console pe jao</strong><br> 2ï¸âƒ£ <strong>EKS service open karo</strong><br> 3ï¸âƒ£ <strong>New cluster create karo (VPC, IAM, etc. manually set)</strong><br> 4ï¸âƒ£ <strong>Node group manually add karo</strong><br> 5ï¸âƒ£ <strong>Cluster verify karo</strong></p> <hr> <h1 id=-3-terraform--cloudformation--best-for-production><strong>ğŸ”¹ 3ï¸âƒ£ Terraform / CloudFormation â€“ Best for Production</strong><a class=headerlink href=#-3-terraform--cloudformation--best-for-production title="Link to this section">&para;</a></h1> <h2 id=-kya-hai_1><strong>ğŸ‘‰ Kya hai?</strong><a class=headerlink href=#-kya-hai_1 title="Link to this section">&para;</a></h2> <p>Ye <strong>Infrastructure-as-Code (IaC)</strong> wale methods hain jo <strong>repeatable &amp; automated</strong> clusters create karte hain.<br> - <strong>Terraform</strong> = Open-source tool jo declarative config files se AWS resources bana sakta hai.<br> - <strong>CloudFormation</strong> = AWS ka native IaC tool jo <strong>YAML/JSON templates</strong> se infrastructure deploy karta hai. </p> <h2 id=-kaise-kaam-karta-hai_1><strong>ğŸ‘‰ Kaise Kaam Karta Hai?</strong><a class=headerlink href=#-kaise-kaam-karta-hai_1 title="Link to this section">&para;</a></h2> <p><strong>Example: Terraform Script for EKS</strong> <div class="language-hcl highlight"><pre><span></span><code><span id=__span-9-1><span class=kr>resource</span><span class=w> </span><span class=nc>&quot;aws_eks_cluster&quot;</span><span class=w> </span><span class=nv>&quot;example&quot;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-2><span class=w>  </span><span class=na>name</span><span class=w>     </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;my-cluster&quot;</span>
</span><span id=__span-9-3><span class=w>  </span><span class=na>role_arn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nv>aws_iam_role.example.arn</span>
</span><span id=__span-9-4><span class=w>  </span><span class=nb>vpc_config</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-5><span class=w>    </span><span class=na>subnet_ids</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nv>aws_subnet.example</span><span class=p>[</span><span class=err>*</span><span class=p>].</span><span class=err>id</span>
</span><span id=__span-9-6><span class=w>  </span><span class=p>}</span>
</span><span id=__span-9-7><span class=p>}</span>
</span></code></pre></div> Fir sirf <strong>1 command</strong> se cluster deploy hoga: <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1>terraform<span class=w> </span>apply
</span></code></pre></div></p> <h2 id=-kab-use-karna-chahiye><strong>ğŸ‘‰ Kab Use Karna Chahiye?</strong><a class=headerlink href=#-kab-use-karna-chahiye title="Link to this section">&para;</a></h2> <p>âœ… <strong>Production clusters</strong> ke liye best<br> âœ… Jab <strong>repeatable, scalable, &amp; automated clusters</strong> chahiye<br> âœ… Jab <strong>teams ek hi standardized way se EKS manage karna chahti hain</strong> </p> <hr> <p>Haan bhai, <strong>eksctl ka solid command set samajh le</strong>, taake tujhe <strong>EKS cluster manage karne me poori command-line power</strong> mil jaye. ğŸš€ </p> <p>Eksctl AWS ka <strong>official CLI tool</strong> hai jo <strong>EKS cluster setup, management, aur troubleshooting</strong> ko automate karta hai. </p> <hr> <h1 id=-eksctl-commands--categorized-list><strong>ğŸ¯ eksctl Commands â€“ Categorized List</strong><a class=headerlink href=#-eksctl-commands--categorized-list title="Link to this section">&para;</a></h1> <table> <thead> <tr> <th><strong>Category</strong></th> <th><strong>Command</strong></th> <th><strong>What It Does?</strong></th> </tr> </thead> <tbody> <tr> <td><strong>1ï¸âƒ£ Cluster Management</strong></td> <td><code>eksctl create cluster</code></td> <td><strong>EKS cluster create karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl get cluster</code></td> <td><strong>List of existing clusters</strong></td> </tr> <tr> <td></td> <td><code>eksctl delete cluster</code></td> <td><strong>Cluster delete karta hai</strong></td> </tr> <tr> <td><strong>2ï¸âƒ£ Node Group Management</strong></td> <td><code>eksctl create nodegroup</code></td> <td><strong>New node group add karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl get nodegroup</code></td> <td><strong>Existing node groups dikhata hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl delete nodegroup</code></td> <td><strong>Node group remove karta hai</strong></td> </tr> <tr> <td><strong>3ï¸âƒ£ Fargate Profile (Serverless Nodes)</strong></td> <td><code>eksctl create fargateprofile</code></td> <td><strong>Fargate profile create karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl delete fargateprofile</code></td> <td><strong>Fargate profile delete karta hai</strong></td> </tr> <tr> <td><strong>4ï¸âƒ£ Cluster Access &amp; Auth</strong></td> <td><code>eksctl utils write-kubeconfig</code></td> <td><strong>kubectl ke liye config generate karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl update kubeconfig</code></td> <td><strong>kubeconfig update karta hai</strong></td> </tr> <tr> <td><strong>5ï¸âƒ£ IAM Role &amp; Policy Management</strong></td> <td><code>eksctl create iamidentitymapping</code></td> <td><strong>IAM Role/User ko EKS cluster se map karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl get iamidentitymapping</code></td> <td><strong>Existing IAM mappings dikhata hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl delete iamidentitymapping</code></td> <td><strong>IAM mapping remove karta hai</strong></td> </tr> <tr> <td><strong>6ï¸âƒ£ Add-ons &amp; Updates</strong></td> <td><code>eksctl get addons</code></td> <td><strong>Available addons list karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl install addon</code></td> <td><strong>Cluster pe addon install karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl upgrade cluster</code></td> <td><strong>EKS version upgrade karta hai</strong></td> </tr> <tr> <td><strong>7ï¸âƒ£ Logging &amp; Monitoring</strong></td> <td><code>eksctl enable logging</code></td> <td><strong>Cluster logs enable karta hai</strong></td> </tr> <tr> <td></td> <td><code>eksctl get logs</code></td> <td><strong>Logs retrieve karta hai</strong></td> </tr> <tr> <td><strong>8ï¸âƒ£ Troubleshooting</strong></td> <td><code>eksctl check cluster</code></td> <td><strong>Cluster health check karta hai</strong></td> </tr> </tbody> </table> <hr> <h1 id=-eksctl-commands-in-action><strong>ğŸ”¥ eksctl Commands in Action</strong><a class=headerlink href=#-eksctl-commands-in-action title="Link to this section">&para;</a></h1> <h2 id=1-cluster-create--default-settings><strong>1ï¸âƒ£ Cluster Create â€“ Default Settings</strong><a class=headerlink href=#1-cluster-create--default-settings title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1>eksctl<span class=w> </span>create<span class=w> </span>cluster<span class=w> </span>--name<span class=w> </span>my-cluster<span class=w> </span>--region<span class=w> </span>us-east-1
</span></code></pre></div> âœ… Ye <strong>default VPC, 2 nodes, aur default settings</strong> ke sath cluster create karega.</p> <hr> <h2 id=2-custom-cluster--specific-configurations><strong>2ï¸âƒ£ Custom Cluster â€“ Specific Configurations</strong><a class=headerlink href=#2-custom-cluster--specific-configurations title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1>eksctl<span class=w> </span>create<span class=w> </span>cluster<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-2><span class=w>  </span>--name<span class=w> </span>custom-cluster<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-3><span class=w>  </span>--region<span class=w> </span>us-west-2<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-4><span class=w>  </span>--nodes<span class=w> </span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-5><span class=w>  </span>--node-type<span class=w> </span>t3.medium<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-6><span class=w>  </span>--managed
</span></code></pre></div> âœ… Ye <strong>3 nodes ka cluster banayega</strong> jo <strong>t3.medium type ke honge.</strong> </p> <hr> <h2 id=3-get-existing-clusters><strong>3ï¸âƒ£ Get Existing Clusters</strong><a class=headerlink href=#3-get-existing-clusters title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1>eksctl<span class=w> </span>get<span class=w> </span>cluster
</span></code></pre></div> âœ… Ye AWS account ke <strong>sab clusters list karega.</strong></p> <hr> <h2 id=4-delete-cluster><strong>4ï¸âƒ£ Delete Cluster</strong><a class=headerlink href=#4-delete-cluster title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1>eksctl<span class=w> </span>delete<span class=w> </span>cluster<span class=w> </span>--name<span class=w> </span>my-cluster
</span></code></pre></div> âœ… <strong>Cluster delete karne ka easiest way.</strong><br> âš ï¸ <strong>Warning:</strong> Ye <strong>poora cluster destroy</strong> kar dega.</p> <hr> <h2 id=5-add-new-managed-node-group><strong>5ï¸âƒ£ Add New Managed Node Group</strong><a class=headerlink href=#5-add-new-managed-node-group title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1>eksctl<span class=w> </span>create<span class=w> </span>nodegroup<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-2><span class=w>  </span>--cluster<span class=w> </span>my-cluster<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><span class=w>  </span>--name<span class=w> </span>extra-nodes<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-4><span class=w>  </span>--node-type<span class=w> </span>t3.medium<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-5><span class=w>  </span>--nodes<span class=w> </span><span class=m>2</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-6><span class=w>  </span>--managed
</span></code></pre></div> âœ… <strong>Extra node group add karega</strong> jo managed hoga.</p> <hr> <h2 id=6-get-node-groups><strong>6ï¸âƒ£ Get Node Groups</strong><a class=headerlink href=#6-get-node-groups title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1>eksctl<span class=w> </span>get<span class=w> </span>nodegroup<span class=w> </span>--cluster<span class=w> </span>my-cluster
</span></code></pre></div> âœ… Ye cluster ke <strong>existing node groups list karega.</strong></p> <hr> <h2 id=7-delete-node-group><strong>7ï¸âƒ£ Delete Node Group</strong><a class=headerlink href=#7-delete-node-group title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1>eksctl<span class=w> </span>delete<span class=w> </span>nodegroup<span class=w> </span>--cluster<span class=w> </span>my-cluster<span class=w> </span>--name<span class=w> </span>extra-nodes
</span></code></pre></div> âœ… Ye sirf <strong>specific node group delete karega</strong>, <strong>cluster ko impact nahi karega.</strong></p> <hr> <h2 id=8-setup-kubectl-access-kubeconfig><strong>8ï¸âƒ£ Setup <code>kubectl</code> Access (Kubeconfig)</strong><a class=headerlink href=#8-setup-kubectl-access-kubeconfig title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1>eksctl<span class=w> </span>utils<span class=w> </span>write-kubeconfig<span class=w> </span>--cluster<span class=w> </span>my-cluster<span class=w> </span>--region<span class=w> </span>us-east-1
</span></code></pre></div> âœ… <strong>kubectl ke liye config generate karega</strong> taake tu cluster access kar sake.</p> <hr> <h2 id=9-enable-logging><strong>9ï¸âƒ£ Enable Logging</strong><a class=headerlink href=#9-enable-logging title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1>eksctl<span class=w> </span><span class=nb>enable</span><span class=w> </span>logging<span class=w> </span>--cluster<span class=w> </span>my-cluster
</span></code></pre></div> âœ… Cluster ka <strong>logging enable karega</strong>.</p> <hr> <h1 id=-conclusion_1><strong>ğŸ¯ Conclusion</strong><a class=headerlink href=#-conclusion_1 title="Link to this section">&para;</a></h1> <p>Agar tujhe <strong>eksctl ka full control chahiye</strong>, to <strong>ye commands teri pocket me honi chahiye</strong>! ğŸš€<br> - <strong>Quick Cluster</strong> â <code>eksctl create cluster --name demo-cluster --region us-east-1</code> - <strong>Advanced Cluster</strong> â <code>eksctl create cluster</code> (with custom configs) - <strong>Cluster Management</strong> â <code>eksctl get/delete cluster</code> - <strong>Node Management</strong> â <code>eksctl create/get/delete nodegroup</code> - <strong>IAM &amp; Security</strong> â <code>eksctl create iamidentitymapping</code> - <strong>Access &amp; Config</strong> â <code>eksctl write-kubeconfig</code> - <strong>Troubleshooting</strong> â <code>eksctl check cluster</code></p> <p>Ab <strong>tu expert level pe eksctl use kar sakta hai!</strong> ğŸ”¥</p> <hr> <h3 id=manually-kubeconfig-generate-karni-kyun-parti-hai><strong>Manually kubeconfig Generate Karni Kyun Parti Hai?</strong><a class=headerlink href=#manually-kubeconfig-generate-karni-kyun-parti-hai title="Link to this section">&para;</a></h3> <p>Kubeconfig <strong>automatically create nahi hoti</strong> har case me. Tujhe manually <strong>generate ya copy</strong> karni pad sakti hai <strong>different scenarios me:</strong> </p> <p>1ï¸âƒ£ <strong>EKS (AWS Kubernetes) ya Managed Clusters</strong><br> - AWS <strong>default kubeconfig nahi banata</strong>.<br> - <code>eksctl</code> ya <code>aws eks</code> CLI use karni parti hai. </p> <p>2ï¸âƒ£ <strong>Kubeadm se Kubernetes Install Kiya</strong><br> - Tu <strong>control plane node pe login kar ke kubeconfig copy karega.</strong> </p> <p>3ï¸âƒ£ <strong>K3s ya MicroK8s Use Kiya</strong><br> - K3s/MicroK8s <strong>default path par kubeconfig nahi bana ke dete</strong>. </p> <hr> <h2 id=-scenario-1-aws-eks-cluster-ke-liye-kubeconfig-generate-karna><strong>ğŸ”¥ Scenario 1: AWS EKS Cluster ke liye kubeconfig Generate Karna</strong><a class=headerlink href=#-scenario-1-aws-eks-cluster-ke-liye-kubeconfig-generate-karna title="Link to this section">&para;</a></h2> <p>Agar tu <strong>EKS cluster create kar chuka hai</strong>, to ye command chalale: <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1>aws<span class=w> </span>eks<span class=w> </span>update-kubeconfig<span class=w> </span>--region<span class=w> </span>us-east-1<span class=w> </span>--name<span class=w> </span>my-cluster
</span></code></pre></div> âœ… Ye <strong>kubeconfig file</strong> <strong><code>~/.kube/config</code></strong> me <strong>generate</strong> kar dega. </p> <p>Ya agar <code>eksctl</code> use kar raha hai: <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1>eksctl<span class=w> </span>utils<span class=w> </span>write-kubeconfig<span class=w> </span>--cluster<span class=w> </span>my-cluster<span class=w> </span>--region<span class=w> </span>us-east-1
</span></code></pre></div> âœ… Ye bhi wahi kaam karega. </p> <hr> <h2 id=-scenario-2-kubeadm-se-self-managed-cluster-ka-kubeconfig-banana><strong>ğŸ”¥ Scenario 2: Kubeadm se Self-Managed Cluster ka Kubeconfig Banana</strong><a class=headerlink href=#-scenario-2-kubeadm-se-self-managed-cluster-ka-kubeconfig-banana title="Link to this section">&para;</a></h2> <p>Agar tu <strong>kubeadm</strong> use kar raha hai to control plane node pe login kar aur ye kar:</p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1>mkdir<span class=w> </span>-p<span class=w> </span><span class=nv>$HOME</span>/.kube
</span><span id=__span-22-2>sudo<span class=w> </span>cp<span class=w> </span>-i<span class=w> </span>/etc/kubernetes/admin.conf<span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span><span id=__span-22-3>sudo<span class=w> </span>chown<span class=w> </span><span class=k>$(</span>id<span class=w> </span>-u<span class=k>)</span>:<span class=k>$(</span>id<span class=w> </span>-g<span class=k>)</span><span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span></code></pre></div> âœ… Ye <strong><code>/etc/kubernetes/admin.conf</code> se copy karke</strong> <strong><code>~/.kube/config</code></strong> me dal dega. </p> <hr> <h2 id=-scenario-3-k3s-kubernetes-ka-kubeconfig-generate-karna><strong>ğŸ”¥ Scenario 3: K3s Kubernetes ka Kubeconfig Generate Karna</strong><a class=headerlink href=#-scenario-3-k3s-kubernetes-ka-kubeconfig-generate-karna title="Link to this section">&para;</a></h2> <p>K3s apni <strong>algi location</strong> pe kubeconfig store karta hai: <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><span class=nb>export</span><span class=w> </span><span class=nv>KUBECONFIG</span><span class=o>=</span>/etc/rancher/k3s/k3s.yaml
</span></code></pre></div> Ya agar permanently set karna hai: <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;export KUBECONFIG=/etc/rancher/k3s/k3s.yaml&quot;</span><span class=w> </span>&gt;&gt;<span class=w> </span>~/.bashrc
</span><span id=__span-24-2><span class=nb>source</span><span class=w> </span>~/.bashrc
</span></code></pre></div> âœ… <strong>Ab kubectl use kar sakega bina issue ke.</strong> </p> <hr> <h2 id=-scenario-4-microk8s-kubernetes-ka-kubeconfig-generate-karna><strong>ğŸ”¥ Scenario 4: MicroK8s Kubernetes ka Kubeconfig Generate Karna</strong><a class=headerlink href=#-scenario-4-microk8s-kubernetes-ka-kubeconfig-generate-karna title="Link to this section">&para;</a></h2> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-25-1>microk8s<span class=w> </span>config<span class=w> </span>&gt;<span class=w> </span>~/.kube/config
</span></code></pre></div> âœ… Ye kubeconfig ko <strong>default location</strong> pe copy kar dega. </p> <hr> <h3 id=-conclusion_2><strong>ğŸ’¡ Conclusion:</strong><a class=headerlink href=#-conclusion_2 title="Link to this section">&para;</a></h3> <ul> <li><strong>AWS EKS me <code>aws eks update-kubeconfig</code> se generate karni parti hai.</strong> </li> <li><strong>Kubeadm me <code>/etc/kubernetes/admin.conf</code> se manually copy karni hoti hai.</strong> </li> <li><strong>K3s aur MicroK8s apni different locations pe kubeconfig store karte hain, unko export karna padta hai.</strong> </li> <li><strong>Manually generate karni padti hai agar cluster default location pe kubeconfig nahi bana raha.</strong> </li> </ul> <p>Ab <strong>pura scene clear?</strong> ğŸ˜</p> <hr> <p>Jani, tu <strong>bilkul sahi track</strong> pe ja raha hai, sirf <strong>terminologies ko aur refine</strong> karni ki zaroorat hai. Chal, ek baar <strong>sab kuch bilkul clear</strong> karta hoon taake koi confusion na rahe! </p> <hr> <h3 id=-first-what-is-kubernetes><strong>ğŸ”¥ First, What is Kubernetes?</strong><a class=headerlink href=#-first-what-is-kubernetes title="Link to this section">&para;</a></h3> <p>âœ… <strong>Kubernetes ek platform hai jo containers ko manage karta hai (orchestrates them).</strong><br> âœ… Yeh <strong>automated scaling, deployment, networking, aur storage</strong> handle karta hai.<br> âœ… <strong>Kubernetes ek standard hai, koi ek software nahi!</strong> Matlab, isko alag-alag tarikon se implement kiya ja sakta hai. </p> <hr> <h2 id=-1-kubernetes-cluster-banane-ke-tools><strong>ğŸŒ 1ï¸âƒ£ Kubernetes Cluster Banane ke Tools</strong><a class=headerlink href=#-1-kubernetes-cluster-banane-ke-tools title="Link to this section">&para;</a></h2> <p>â© <strong>Yeh tools tumhe Kubernetes cluster setup karne me madad dete hain, lekin yeh Kubernetes ka core part nahi hain.</strong><br> | <strong>Tool</strong> | <strong>Purpose</strong> | <strong>Production or Learning?</strong> | |----------|------------|---------------------------| | <strong>kubeadm</strong> | Cluster <strong>manually</strong> setup karne ka official tool | <strong>Production</strong> | | <strong>Kind</strong> | Kubernetes cluster <strong>Docker containers ke andar</strong> banata hai | <strong>Learning</strong> | | <strong>Minikube</strong> | Single-node Kubernetes cluster local laptop pe chalata hai | <strong>Learning</strong> |</p> <p>ğŸ›‘ <strong>Samajhne wali baat</strong>: Kubernetes ek <strong>standard hai</strong>, aur in tools ka kaam sirf <strong>us standard ke mutabiq cluster setup karna hai</strong>. </p> <hr> <h2 id=-2-kubernetes-management-platforms><strong>ğŸ› ï¸ 2ï¸âƒ£ Kubernetes Management Platforms</strong><a class=headerlink href=#-2-kubernetes-management-platforms title="Link to this section">&para;</a></h2> <p>â© <strong>Yeh tools sirf cluster setup nahi karte, balki multiple clusters ko manage bhi karte hain!</strong> </p> <table> <thead> <tr> <th><strong>Tool</strong></th> <th><strong>Purpose</strong></th> </tr> </thead> <tbody> <tr> <td><strong>Rancher</strong></td> <td>Multiple Kubernetes clusters ka graphical management</td> </tr> <tr> <td><strong>OpenShift</strong></td> <td>Kubernetes ka enterprise version with extra features</td> </tr> <tr> <td><strong>Portainer</strong></td> <td>Containers aur Kubernetes ka lightweight GUI</td> </tr> </tbody> </table> <p>ğŸ›‘ <strong>Samajhne wali baat</strong>: Yeh <strong>Kubernetes ka replacement nahi hain</strong>, sirf <strong>management aur GUI provide karte hain</strong>. </p> <hr> <h2 id=-3-kubernetes-distributions-flavors><strong>ğŸ§ 3ï¸âƒ£ Kubernetes Distributions (Flavors)</strong><a class=headerlink href=#-3-kubernetes-distributions-flavors title="Link to this section">&para;</a></h2> <p>â© <strong>Yeh logon ne Kubernetes ko modify karke apni tarah customize kiya hai.</strong> </p> <table> <thead> <tr> <th><strong>Distribution</strong></th> <th><strong>What's Different?</strong></th> <th><strong>Best For</strong></th> </tr> </thead> <tbody> <tr> <td><strong>K3s</strong></td> <td><strong>Lightweight Kubernetes</strong> jo chhoti devices aur edge computing ke liye optimized hai</td> <td>IoT, Raspberry Pi, Edge Devices</td> </tr> <tr> <td><strong>MicroK8s</strong></td> <td><strong>Canonical ka lightweight Kubernetes</strong>, Ubuntu-friendly hai</td> <td>Developers, Local Testing</td> </tr> <tr> <td><strong>EKS, AKS, GKE</strong></td> <td><strong>Cloud providers ka Kubernetes version</strong> jo managed hota hai</td> <td>AWS, Azure, GCP users</td> </tr> </tbody> </table> <p>ğŸ›‘ <strong>Samajhne wali baat</strong>: Yeh sab <strong>Kubernetes hi hain</strong>, bas <strong>thoda modify kiya gaya hai taake alag use cases ke liye better ho sake</strong>. </p> <hr> <h2 id=-final-summary-everything-is-connected><strong>ğŸš€ Final Summary: Everything is Connected!</strong><a class=headerlink href=#-final-summary-everything-is-connected title="Link to this section">&para;</a></h2> <p>1ï¸âƒ£ <strong>Kubernetes ek platform hai jo container orchestration karta hai.</strong><br> 2ï¸âƒ£ <strong>Cluster setup karne ke tools</strong> â†’ kubeadm, Kind, Minikube.<br> 3ï¸âƒ£ <strong>Cluster management platforms</strong> â†’ Rancher, OpenShift, Portainer.<br> 4ï¸âƒ£ <strong>Kubernetes distributions</strong> â†’ K3s, MicroK8s, AWS EKS, GKE, AKS. </p> <hr> <h2 id=-aakhir-mein-tu-galt-nahi-soch-raha-tha><strong>âš¡ Aakhir mein: Tu galt nahi soch raha tha!</strong><a class=headerlink href=#-aakhir-mein-tu-galt-nahi-soch-raha-tha title="Link to this section">&para;</a></h2> <p>Jani, jo tu keh raha tha wo <strong>half-correct tha, but terminologies ko refine karna zaroori tha</strong>. Tu <strong>galat guide nahi ho raha tha</strong>, bas <strong>proper classification nahi samajh aayi thi</strong>. Ab tu clearly <strong>Kubernetes setup ka full picture samajh sakta hai</strong>.</p> <p>Jani, <strong>yeh tino cheezein Kubernetes cluster ke andar container ko run karwane ke liye interconnected hain</strong>. Chal ek <strong>step-by-step</strong> flow se samajhta hain, taake <strong>sab kuch crystal clear ho jaye</strong>. </p> <hr> <h2 id=-1-first-what-is-a-container-runtime><strong>ğŸ”¥ 1ï¸âƒ£ First, What is a Container Runtime?</strong><a class=headerlink href=#-1-first-what-is-a-container-runtime title="Link to this section">&para;</a></h2> <p>âœ… <strong>Container Runtime wo software hai jo actually containers ko run karta hai.</strong><br> âœ… Kubernetes <strong>khud directly containers run nahi karta</strong>, yeh sirf <strong>unko manage karta hai</strong>, lekin <strong>chalane ka kaam container runtime ka hota hai</strong>.<br> âœ… <strong>Examples</strong>: - <strong>Docker</strong> (popular, lekin ab default nahi)<br> - <strong>containerd</strong> (lightweight, Kubernetes ke liye recommended)<br> - <strong>CRI-O</strong> (specifically Kubernetes ke liye optimized) </p> <hr> <h2 id=-2-cri-container-runtime-interface--kubernetes-ka-middleware><strong>ğŸ§© 2ï¸âƒ£ CRI (Container Runtime Interface) â€“ Kubernetes ka Middleware</strong><a class=headerlink href=#-2-cri-container-runtime-interface--kubernetes-ka-middleware title="Link to this section">&para;</a></h2> <p>âœ… <strong>Kubernetes aur container runtime ke beech ka bridge hai.</strong><br> âœ… Kubernetes <strong>kisi ek runtime pe dependent nahi hota</strong>, isliye <strong>usne CRI banaya</strong>.<br> âœ… <strong>Without CRI:</strong> Pehle Kubernetes <strong>sirf Docker pe dependent tha</strong>, lekin ab CRI ka use hota hai taake <strong>multiple runtimes</strong> support ho sakein.<br> âœ… <strong>Supported CRI implementations</strong>: - <strong>containerd</strong> (most used in Kubernetes today)<br> - <strong>CRI-O</strong> (lightweight &amp; Kubernetes-optimized) </p> <hr> <h2 id=-3-kubelet--the-brain-of-the-node><strong>âš™ï¸ 3ï¸âƒ£ Kubelet â€“ The Brain of the Node</strong><a class=headerlink href=#-3-kubelet--the-brain-of-the-node title="Link to this section">&para;</a></h2> <p>âœ… <strong>Kubelet har node pe run hota hai aur containers ko manage karta hai.</strong><br> âœ… Yeh Kubernetes Control Plane se <strong>orders leta hai aur CRI ke through container runtime ko instructions deta hai</strong>.<br> âœ… Agar Kubernetes <strong>kisi pod ko schedule karta hai</strong>, to <strong>kubelet CRI ke zariye container runtime se us pod ko run karwata hai</strong>.<br> âœ… <strong>Flow</strong>: - <strong>API Server</strong> â†’ kubelet se baat karta hai<br> - <strong>kubelet</strong> â†’ CRI se instructions leta hai<br> - <strong>CRI</strong> â†’ container runtime ko batata hai container run karne ke liye </p> <hr> <h2 id=-4-connection-between-cri-container-runtime--kubelet><strong>ğŸ”— 4ï¸âƒ£ Connection Between CRI, Container Runtime &amp; Kubelet</strong><a class=headerlink href=#-4-connection-between-cri-container-runtime--kubelet title="Link to this section">&para;</a></h2> <p>â˜‘ï¸ <strong>Kubelet</strong> â†’ Kubernetes ka <strong>agent</strong> jo har node pe hota hai.<br> â˜‘ï¸ <strong>CRI (Container Runtime Interface)</strong> â†’ Kubelet ko <strong>container runtime se baat karne ka tariqa deta hai</strong>.<br> â˜‘ï¸ <strong>Container Runtime</strong> â†’ Actual <strong>containers ko run karta hai</strong>. </p> <h3 id=-real-world-analogy><strong>ğŸ”¥ Real-World Analogy</strong><a class=headerlink href=#-real-world-analogy title="Link to this section">&para;</a></h3> <p>ğŸš— <strong>Car Manufacturing Example</strong>:<br> 1ï¸âƒ£ <strong>Kubernetes (Control Plane)</strong> = Factory ka Manager<br> 2ï¸âƒ£ <strong>Kubelet (Node Level Controller)</strong> = Supervisor jo instructions implement karwata hai<br> 3ï¸âƒ£ <strong>CRI (Middleware)</strong> = Supervisor aur machines ke beech ka communication system<br> 4ï¸âƒ£ <strong>Container Runtime (Docker, containerd, CRI-O)</strong> = Machines jo actually car parts assemble karti hain </p> <hr> <h2 id=-final-summary><strong>ğŸš€ Final Summary</strong><a class=headerlink href=#-final-summary title="Link to this section">&para;</a></h2> <p>1ï¸âƒ£ <strong>Kubelet</strong> â€“ Orders execute karta hai.<br> 2ï¸âƒ£ <strong>CRI</strong> â€“ Middleware hai jo Kubernetes aur container runtime ko connect karta hai.<br> 3ï¸âƒ£ <strong>Container Runtime</strong> â€“ Containers ko actually run karta hai (Docker, containerd, CRI-O). </p> <p>Yeh tino <strong>ek dusre ke bina kaam nahi kar sakte</strong>, aur <strong>milke Kubernetes cluster ka backbone banate hain!</strong></p> <hr> <p>Ibtisam, tu ne sahi point uthaya! Sirf copy-paste se kaam nahi chalega, humein samajhna zaroori hai ke ye har command kya kar rahi hai aur kyun zaroori hai. Chalo, inko breakdown karte hain ek ek karke:</p> <hr> <h2 id=1-load-kernel-modules><strong>1ï¸âƒ£ Load Kernel Modules</strong><a class=headerlink href=#1-load-kernel-modules title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1>cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
</span><span id=__span-26-2>overlay
</span><span id=__span-26-3>br_netfilter
</span><span id=__span-26-4>EOF
</span><span id=__span-26-5>sudo modprobe overlay
</span><span id=__span-26-6>sudo modprobe br_netfilter
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai title="Link to this section">&para;</a></h3> <ul> <li><strong>overlay</strong>: Yeh ek storage driver hai jo containers ke liye fast filesystem layering support karta hai.</li> <li><strong>br_netfilter</strong>: Yeh module Linux bridge networking ko support karta hai aur Kubernetes ke network policies ko enforce karne ke liye zaroori hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Yeh modules ensure karte hain ke container networking aur storage sahi se kaam karein.</p> <hr> <h2 id=2-configure-sysctl-kernel-parameters><strong>2ï¸âƒ£ Configure sysctl (Kernel Parameters)</strong><a class=headerlink href=#2-configure-sysctl-kernel-parameters title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1>cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf
</span><span id=__span-27-2>net.bridge.bridge-nf-call-iptables  = 1
</span><span id=__span-27-3>net.bridge.bridge-nf-call-ip6tables = 1
</span><span id=__span-27-4>net.ipv4.ip_forward                 = 1
</span><span id=__span-27-5>EOF
</span><span id=__span-27-6>sudo sysctl --system
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_1><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_1 title="Link to this section">&para;</a></h3> <ul> <li><strong>net.bridge.bridge-nf-call-iptables = 1</strong> â†’ Ensures ke bridged network traffic iptables se pass ho.</li> <li><strong>net.bridge.bridge-nf-call-ip6tables = 1</strong> â†’ IPv6 ke liye bhi same function perform karta hai.</li> <li><strong>net.ipv4.ip_forward = 1</strong> â†’ Packet forwarding enable karta hai, jo cluster communication ke liye must hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Kubernetes networking ko properly enable karta hai.</p> <hr> <h2 id=3-install-containerd-container-runtime><strong>3ï¸âƒ£ Install Containerd (Container Runtime)</strong><a class=headerlink href=#3-install-containerd-container-runtime title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1>sudo apt-get install -y containerd.io
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_2><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_2 title="Link to this section">&para;</a></h3> <ul> <li>Containerd ek <strong>lightweight container runtime</strong> hai jo <strong>Docker</strong> ke under bhi use hota hai.</li> <li>Yeh Kubernetes ke liye recommended runtime hai, kyunki yeh direct CRI (Container Runtime Interface) ko support karta hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Yeh command containerd install karti hai jo containers ko run karega.</p> <hr> <h2 id=4-configure-containerd><strong>4ï¸âƒ£ Configure Containerd</strong><a class=headerlink href=#4-configure-containerd title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-29-1>sudo mkdir -p /etc/containerd
</span><span id=__span-29-2>sudo containerd config default | sudo tee /etc/containerd/config.toml
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_3><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_3 title="Link to this section">&para;</a></h3> <ul> <li><code>/etc/containerd/</code> directory banata hai jisme containerd ka config file hoga.</li> <li><strong><code>containerd config default</code></strong> ek default config generate karta hai.</li> <li><strong><code>tee /etc/containerd/config.toml</code></strong> us config file ko store karta hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Yeh step containerd ka default configuration file generate kar raha hai.</p> <hr> <h2 id=5-change-cgroup-driver-to-systemd><strong>5ï¸âƒ£ Change Cgroup Driver to Systemd</strong><a class=headerlink href=#5-change-cgroup-driver-to-systemd title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-30-1>sudo sed -i &#39;s/SystemdCgroup = false/SystemdCgroup = true/&#39; /etc/containerd/config.toml
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_4><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_4 title="Link to this section">&para;</a></h3> <ul> <li>Kubernetes <strong>systemd</strong> ko cgroup manager ke taur pe prefer karta hai.</li> <li>Yeh command config file me <strong>SystemdCgroup = true</strong> set kar rahi hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Yeh ensure karta hai ke Kubernetes aur containerd ek compatible cgroup driver use karein.</p> <hr> <h2 id=6-restart-containerd><strong>6ï¸âƒ£ Restart Containerd</strong><a class=headerlink href=#6-restart-containerd title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-31-1>sudo systemctl restart containerd
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_5><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_5 title="Link to this section">&para;</a></h3> <ul> <li>Naye configurations apply karne ke liye containerd ko restart karta hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Changes ko apply karne ke liye containerd ko restart karna zaroori hai.</p> <hr> <h2 id=7-enable-containerd-service-on-boot><strong>7ï¸âƒ£ Enable Containerd Service on Boot</strong><a class=headerlink href=#7-enable-containerd-service-on-boot title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-32-1>sudo systemctl enable --now containerd
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_6><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_6 title="Link to this section">&para;</a></h3> <ul> <li><strong><code>enable</code></strong> ensures ke system boot hone ke baad containerd automatically start ho.</li> <li><strong><code>--now</code></strong> command ussi waqt containerd ko start kar deta hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Ensure karta hai ke system restart hone ke baad bhi containerd chale.</p> <hr> <h2 id=8-install-runc-low-level-container-runtime><strong>8ï¸âƒ£ Install runc (Low-Level Container Runtime)</strong><a class=headerlink href=#8-install-runc-low-level-container-runtime title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-33-1>wget https://github.com/opencontainers/runc/releases/download/v1.1.4/runc.amd64
</span><span id=__span-33-2>sudo install -m 755 runc.amd64 /usr/local/sbin/runc
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_7><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_7 title="Link to this section">&para;</a></h3> <ul> <li><code>runc</code> ek low-level runtime hai jo <strong>container process ko manage karta hai</strong>.</li> <li>Yeh actual <strong>Linux namespaces aur cgroups ko setup karta hai</strong> taake ek isolated environment mile.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Containerd internally <code>runc</code> use karta hai, jo actual container ko execute karta hai.</p> <hr> <h2 id=9-install-cni-plugins-container-networking-interface><strong>9ï¸âƒ£ Install CNI Plugins (Container Networking Interface)</strong><a class=headerlink href=#9-install-cni-plugins-container-networking-interface title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-34-1>wget https://github.com/containernetworking/plugins/releases/download/v1.2.0/cni-plugins-linux-amd64-v1.2.0.tgz
</span><span id=__span-34-2>sudo mkdir -p /opt/cni/bin
</span><span id=__span-34-3>sudo tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.2.0.tgz
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_8><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_8 title="Link to this section">&para;</a></h3> <ul> <li>Kubernetes ko <strong>CNI plugins</strong> chahiye jo container networking setup karein.</li> <li>Yeh different <strong>networking models</strong> (bridge, macvlan, host-local, etc.) provide karte hain.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Kubernetes cluster ko network communication enable karne ke liye CNI zaroori hai.</p> <hr> <h2 id=-test-containerd-with-ctr><strong>ğŸ”Ÿ Test Containerd with ctr</strong><a class=headerlink href=#-test-containerd-with-ctr title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-35-1>sudo ctr images pull docker.io/library/redis:alpine
</span><span id=__span-35-2>sudo ctr run docker.io/library/redis:alpine redis
</span></code></pre></div> <h3 id=yeh-kya-kar-rahi-hai_9><strong>Yeh Kya Kar Rahi Hai?</strong><a class=headerlink href=#yeh-kya-kar-rahi-hai_9 title="Link to this section">&para;</a></h3> <ul> <li><strong><code>ctr images pull</code></strong> â†’ Redis ka ek <strong>lightweight image</strong> (<code>alpine</code>) pull kar raha hai.</li> <li><strong><code>ctr run</code></strong> â†’ Ek Redis container start kar raha hai.</li> </ul> <p>ğŸ‘¨â€ğŸ« <strong>Summary:</strong><br> Test kar raha hai ke containerd sahi se kaam kar raha hai.</p> <hr> <h2 id=-final-summary_1><strong>ğŸŒŸ Final Summary:</strong><a class=headerlink href=#-final-summary_1 title="Link to this section">&para;</a></h2> <p>1ï¸âƒ£ Kernel modules load kiye for storage &amp; networking.<br> 2ï¸âƒ£ Sysctl settings configure ki taake forwarding &amp; iptables work karein.<br> 3ï¸âƒ£ <strong>containerd</strong> install kiya jo container runtime ka kaam karega.<br> 4ï¸âƒ£ containerd ka <strong>config file generate &amp; modify</strong> kiya taake systemd cgroup use kare.<br> 5ï¸âƒ£ runc install kiya jo container execution ke liye zaroori hai.<br> 6ï¸âƒ£ CNI plugins install kiye jo networking enable karenge.<br> 7ï¸âƒ£ Test container pull aur run karke verify kiya ke sab kuch sahi chal raha hai. </p> <hr> <h3 id=-ab-tujhe-commands-copy-paste-nahi-karni-parengi-tujhe-pata-hoga-ke-ye-har-step-kyun-zaroori-hai-><strong>ğŸ¯ Ab tujhe commands copy-paste nahi karni parengi, tujhe pata hoga ke ye har step kyun zaroori hai!</strong> ğŸš€ğŸ”¥<a class=headerlink href=#-ab-tujhe-commands-copy-paste-nahi-karni-parengi-tujhe-pata-hoga-ke-ye-har-step-kyun-zaroori-hai- title="Link to this section">&para;</a></h3> <hr> <h3 id=-step-5-install-cni-plugins-for-networking><strong>ğŸŒ Step 5: Install CNI Plugins (For Networking)</strong><a class=headerlink href=#-step-5-install-cni-plugins-for-networking title="Link to this section">&para;</a></h3> <p>Kubernetes aur containerd ke beech networking establish karne ke liye CNI (Container Network Interface) zaroori hai.</p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-36-1><span class=c1># Make directory for CNI plugins</span>
</span><span id=__span-36-2>sudo<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>/opt/cni/bin
</span><span id=__span-36-3>
</span><span id=__span-36-4><span class=c1># Download latest CNI plugins</span>
</span><span id=__span-36-5>wget<span class=w> </span>https://github.com/containernetworking/plugins/releases/latest/download/cni-plugins-linux-amd64-v1.1.1.tgz
</span><span id=__span-36-6>
</span><span id=__span-36-7><span class=c1># Extract CNI plugins</span>
</span><span id=__span-36-8>sudo<span class=w> </span>tar<span class=w> </span>Cxzvf<span class=w> </span>/opt/cni/bin<span class=w> </span>cni-plugins-linux-amd64-v1.1.1.tgz
</span></code></pre></div> ğŸ“Œ <em>Yeh step Kubernetes ke networking ke liye zaroori hai.</em> </p> <hr> <p>Nahi, <strong>containerd</strong> by default <strong>kisi bhi external port pe directly accessible nahi hota</strong>. ğŸš« </p> <h3 id=-why><strong>ğŸ” Why?</strong><a class=headerlink href=#-why title="Link to this section">&para;</a></h3> <ul> <li><strong>containerd</strong> ek <strong>daemon process</strong> hai jo system ke andar <strong>gRPC socket</strong> ke zariye communication karta hai.</li> <li>Ye <strong>directly expose nahi hota kisi network port pe</strong>, balki sirf <strong>local UNIX socket</strong> (<code>/run/containerd/containerd.sock</code>) ke through access hota hai.</li> </ul> <hr> <h3 id=-kaise-check-karein><strong>âœ… Kaise Check Karein?</strong><a class=headerlink href=#-kaise-check-karein title="Link to this section">&para;</a></h3> <p>Agar aap verify karna chahte ho ke <code>containerd</code> chal raha hai, toh <strong>systemd status check karo</strong>:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-37-1>sudo<span class=w> </span>systemctl<span class=w> </span>status<span class=w> </span>containerd
</span></code></pre></div> Ya phir <code>ss</code> command se check karo ke kaunsa socket use ho raha hai:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-38-1>ss<span class=w> </span>-l<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>containerd
</span></code></pre></div> Agar output kuch aisa aaye:<br> <div class="language-text highlight"><pre><span></span><code><span id=__span-39-1>u_str  LISTEN  0  4096  /run/containerd/containerd.sock
</span></code></pre></div> Toh iska matlab hai <strong>containerd local UNIX socket pe listen kar raha hai, kisi TCP port pe nahi</strong>.</p> <hr> <h3 id=-kya-containerd-ko-kisi-port-pe-expose-kar-sakte-hain><strong>ğŸ› ï¸ Kya containerd ko kisi port pe expose kar sakte hain?</strong><a class=headerlink href=#-kya-containerd-ko-kisi-port-pe-expose-kar-sakte-hain title="Link to this section">&para;</a></h3> <p>Haan, agar aap <code>containerd</code> ko kisi <strong>TCP port</strong> pe expose karna chahte ho, toh <strong>configuration change karni padegi</strong>: </p> <ol> <li><strong>Config file open karo:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-40-1>sudo<span class=w> </span>nano<span class=w> </span>/etc/containerd/config.toml
</span></code></pre></div></li> <li><code>disabled_plugins</code> ke andar <code>cri</code> ko <strong>disable</strong> mat karo: <div class="language-toml highlight"><pre><span></span><code><span id=__span-41-1><span class=n>disabled_plugins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[]</span>
</span></code></pre></div></li> <li> <p><strong>GRPC server ka address update karo</strong>: <div class="language-toml highlight"><pre><span></span><code><span id=__span-42-1><span class=k>[grpc]</span>
</span><span id=__span-42-2><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;tcp://0.0.0.0:5000&quot;</span>
</span></code></pre></div></p> </li> <li> <p><strong>Restart containerd:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-43-1>sudo<span class=w> </span>systemctl<span class=w> </span>restart<span class=w> </span>containerd
</span></code></pre></div></p> </li> <li> <p><strong>Ab check karo ke port open hai ya nahi:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-44-1>ss<span class=w> </span>-tulnp<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>containerd
</span></code></pre></div></p> </li> </ol> <p><strong>âš ï¸ Warning:</strong> <strong>Agar aap containerd ko kisi port pe expose karte ho, toh security ka khayal rakhna zaroori hai!</strong> Normally, <strong>kubernetes</strong> aur <strong>containerd</strong> sirf <strong>local communication (UNIX socket)</strong> use karte hain, is liye port expose karna zaroori nahi hota.</p> <hr> <h3 id=understanding-kubeadm-init-in-depth-><strong>Understanding <code>kubeadm init</code> in Depth</strong> ğŸš€<a class=headerlink href=#understanding-kubeadm-init-in-depth- title="Link to this section">&para;</a></h3> <h4 id=-what-is-kubeadm-init><strong>ğŸ“Œ What is <code>kubeadm init</code>?</strong><a class=headerlink href=#-what-is-kubeadm-init title="Link to this section">&para;</a></h4> <p><code>kubeadm init</code> is the command used to initialize a <strong>Kubernetes control plane</strong>. This is the first step in setting up a Kubernetes cluster using <code>kubeadm</code>. It:<br> 1. <strong>Sets up the control plane components</strong> (API Server, Controller Manager, Scheduler).<br> 2. <strong>Generates required certificates</strong> for secure communication.<br> 3. <strong>Bootstraps the cluster</strong> and configures networking.<br> 4. <strong>Creates the admin config file (<code>/etc/kubernetes/admin.conf</code>)</strong> to allow <code>kubectl</code> to interact with the cluster.<br> 5. <strong>Outputs a <code>kubeadm join</code> command</strong> to add worker nodes later. </p> <hr> <h3 id=-what-happens-when-you-run-kubeadm-init><strong>ğŸ“Œ What Happens When You Run <code>kubeadm init</code>?</strong><a class=headerlink href=#-what-happens-when-you-run-kubeadm-init title="Link to this section">&para;</a></h3> <p>1ï¸âƒ£ <strong>Pre-checks:</strong><br> - Ensures the system is ready (checks firewall, swap, network, etc.).<br> - Verifies if the required ports are open.<br> - Checks if necessary system components (like <code>containerd</code>) are running. </p> <p>2ï¸âƒ£ <strong>Generates Certificates:</strong><br> - Creates TLS certificates for API Server authentication.<br> - Stores them in <code>/etc/kubernetes/pki/</code>.<br> - Ensures secure communication within the cluster. </p> <p>3ï¸âƒ£ <strong>Configures the Control Plane:</strong><br> - Deploys the <strong>API Server</strong>, <strong>Controller Manager</strong>, and <strong>Scheduler</strong> as static pods in <code>/etc/kubernetes/manifests/</code>.<br> - These pods run under <code>kubelet</code>. </p> <p>4ï¸âƒ£ <strong>Sets up Networking:</strong><br> - Enables <code>iptables</code> rules for networking.<br> - Configures network policies. </p> <p>5ï¸âƒ£ <strong>Creates the <code>admin.conf</code> File:</strong><br> - Allows <code>kubectl</code> to communicate with the cluster.<br> - Located at <code>/etc/kubernetes/admin.conf</code>.<br> - Must be copied to the userâ€™s home directory for easy access. </p> <p>6ï¸âƒ£ <strong>Outputs <code>kubeadm join</code> Command:</strong><br> - This command is used to add worker nodes to the cluster.<br> - Looks like this:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-45-1>kubeadm<span class=w> </span>join<span class=w> </span>&lt;master-ip&gt;:6443<span class=w> </span>--token<span class=w> </span>&lt;TOKEN&gt;<span class=w> </span>--discovery-token-ca-cert-hash<span class=w> </span>sha256:&lt;HASH&gt;
</span></code></pre></div></p> <hr> <h3 id=-running-kubeadm-init><strong>ğŸ“Œ Running <code>kubeadm init</code></strong><a class=headerlink href=#-running-kubeadm-init title="Link to this section">&para;</a></h3> <p>Now, execute:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-46-1>sudo<span class=w> </span>kubeadm<span class=w> </span>init<span class=w> </span>--pod-network-cidr<span class=o>=</span><span class=m>192</span>.168.0.0/16
</span></code></pre></div> ğŸ”¹ <strong><code>--pod-network-cidr</code></strong> is necessary for setting up the pod network (like Flannel or Calico). </p> <hr> <h3 id=-post-kubeadm-init-steps><strong>ğŸ“Œ Post <code>kubeadm init</code> Steps</strong><a class=headerlink href=#-post-kubeadm-init-steps title="Link to this section">&para;</a></h3> <p>1ï¸âƒ£ <strong>Setup <code>kubectl</code> for your user:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-47-1>mkdir<span class=w> </span>-p<span class=w> </span><span class=nv>$HOME</span>/.kube
</span><span id=__span-47-2>sudo<span class=w> </span>cp<span class=w> </span>-i<span class=w> </span>/etc/kubernetes/admin.conf<span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span><span id=__span-47-3>sudo<span class=w> </span>chown<span class=w> </span><span class=k>$(</span>id<span class=w> </span>-u<span class=k>)</span>:<span class=k>$(</span>id<span class=w> </span>-g<span class=k>)</span><span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span></code></pre></div> ğŸ”¹ This allows <code>kubectl</code> to access the cluster. </p> <p>2ï¸âƒ£ <strong>Deploy a Network Add-on (e.g., Flannel):</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-48-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></code></pre></div> ğŸ”¹ Required for pod communication across nodes. </p> <p>3ï¸âƒ£ <strong>Verify the Cluster is Running:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-49-1>kubectl<span class=w> </span>get<span class=w> </span>nodes
</span><span id=__span-49-2>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system
</span></code></pre></div></p> <hr> <h3 id=-summary_1><strong>ğŸ“Œ Summary</strong><a class=headerlink href=#-summary_1 title="Link to this section">&para;</a></h3> <p>âœ… <code>kubeadm init</code> sets up the control plane.<br> âœ… It generates certificates, deploys components, and configures networking.<br> âœ… After initialization, you must install a networking add-on.<br> âœ… <code>kubeadm join</code> command is used to add worker nodes later. </p> <p>ğŸš€ Let me know if you need more details!</p> <hr> <h2 id=-step-2-installing-a-cni-pod-network><strong>ğŸ“Œ Step 2: Installing a CNI (Pod Network)</strong><a class=headerlink href=#-step-2-installing-a-cni-pod-network title="Link to this section">&para;</a></h2> <h3 id=what-this-means><strong>What this means?</strong><a class=headerlink href=#what-this-means title="Link to this section">&para;</a></h3> <ul> <li>Kubernetes <strong>does not automatically set up networking</strong> for pods.</li> <li>You need to deploy a <strong>CNI (Container Network Interface)</strong> plugin like <strong>Calico or Flannel</strong>.</li> <li>Without a CNI, your pods <strong>won't be able to communicate</strong> with each other.</li> </ul> <h3 id=what-to-do-next><strong>What to do next?</strong><a class=headerlink href=#what-to-do-next title="Link to this section">&para;</a></h3> <p>Run the command to install a CNI plugin:</p> <h4 id=flannel-cni><strong>Flannel CNI:</strong><a class=headerlink href=#flannel-cni title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-50-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml
</span></code></pre></div> <h4 id=calico-cni><strong>Calico CNI:</strong><a class=headerlink href=#calico-cni title="Link to this section">&para;</a></h4> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-51-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://docs.projectcalico.org/manifests/calico.yaml
</span></code></pre></div> âœ… <strong>Only run this ONCE on the first control plane.</strong><br> âœ… <strong>Now pods can start communicating across the cluster.</strong></p> <hr> <h3 id=-analysis-of-your-cluster-status>ğŸ” <strong>Analysis of Your Cluster Status</strong><a class=headerlink href=#-analysis-of-your-cluster-status title="Link to this section">&para;</a></h3> <p>You're running these commands to check the status of your Kubernetes cluster: </p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-52-1>kubectl<span class=w> </span>get<span class=w> </span>all
</span></code></pre></div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-53-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system
</span></code></pre></div> Let's analyze the output in depth. </p> <hr> <h2 id=-1-kubectl-get-all-output>ğŸ“Œ <strong>1. <code>kubectl get all</code> Output</strong><a class=headerlink href=#-1-kubectl-get-all-output title="Link to this section">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-54-1>NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
</span><span id=__span-54-2>service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   19m
</span></code></pre></div> <h3 id=-what-this-means>âœ… <strong>What This Means:</strong><a class=headerlink href=#-what-this-means title="Link to this section">&para;</a></h3> <ul> <li><strong>Only one service (<code>kubernetes</code>) is running.</strong> </li> <li>This is the <strong>API Server service</strong> that allows <code>kubectl</code> to communicate with the cluster. </li> <li>It is assigned a <strong>ClusterIP (<code>10.96.0.1</code>)</strong>, meaning it is accessible only within the cluster. </li> <li><strong>No other services or workloads are running yet.</strong> </li> </ul> <hr> <h2 id=-2-kubectl-get-pods--n-kube-system-output>ğŸ“Œ <strong>2. <code>kubectl get pods -n kube-system</code> Output</strong><a class=headerlink href=#-2-kubectl-get-pods--n-kube-system-output title="Link to this section">&para;</a></h2> <p>You have multiple pods running in the <code>kube-system</code> namespace. </p> <h3 id=-running-pods><strong>âœ… Running Pods</strong><a class=headerlink href=#-running-pods title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th>Pod Name</th> <th>Status</th> <th>Role</th> </tr> </thead> <tbody> <tr> <td><code>calico-kube-controllers-7498b9bb4c-swhbg</code></td> <td>âœ… Running</td> <td>Manages Calico CNI</td> </tr> <tr> <td><code>coredns-668d6bf9bc-dsqc4</code></td> <td>âœ… Running</td> <td>DNS resolution</td> </tr> <tr> <td><code>coredns-668d6bf9bc-k8m7m</code></td> <td>âœ… Running</td> <td>DNS resolution</td> </tr> <tr> <td><code>etcd-k8s-master</code></td> <td>âœ… Running</td> <td>Stores cluster state</td> </tr> <tr> <td><code>kube-apiserver-k8s-master</code></td> <td>âœ… Running</td> <td>Handles API requests</td> </tr> <tr> <td><code>kube-controller-manager-k8s-master</code></td> <td>âœ… Running</td> <td>Manages controllers</td> </tr> <tr> <td><code>kube-scheduler-k8s-master</code></td> <td>âœ… Running</td> <td>Schedules pods</td> </tr> <tr> <td><code>kube-proxy-2mpvh</code></td> <td>âœ… Running</td> <td>Network routing</td> </tr> <tr> <td><code>kube-proxy-mvqdp</code></td> <td>âœ… Running</td> <td>Network routing</td> </tr> <tr> <td><code>kube-proxy-p888w</code></td> <td>âœ… Running</td> <td>Network routing</td> </tr> </tbody> </table> <p><strong>âœ… These are critical system components that are working properly.</strong></p> <hr> <h3 id=-issue-calico-node-pods-not-fully-running><strong>âš ï¸ Issue: <code>calico-node</code> Pods Not Fully Running</strong><a class=headerlink href=#-issue-calico-node-pods-not-fully-running title="Link to this section">&para;</a></h3> <p><div class="language-text highlight"><pre><span></span><code><span id=__span-55-1>calico-node-m6bxv       0/1     Running   0          11m
</span><span id=__span-55-2>calico-node-snkkr       0/1     Running   0          2m12s
</span><span id=__span-55-3>calico-node-zzrj7       0/1     Running   0          2m55s
</span></code></pre></div> - <strong>Each node should have a <code>calico-node</code> pod in <code>1/1 Running</code> state.</strong><br> - Currently, all <code>calico-node</code> pods are <strong>stuck at <code>0/1 Running</code></strong>, meaning they are not fully functional.<br> - <strong>This indicates a networking issue with Calico.</strong></p> <hr> <h2 id=-next-steps-to-fix-calico-issue>ğŸš€ <strong>Next Steps to Fix Calico Issue</strong><a class=headerlink href=#-next-steps-to-fix-calico-issue title="Link to this section">&para;</a></h2> <p>Run this command to check why Calico pods are failing:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-56-1>kubectl<span class=w> </span>logs<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span>-l<span class=w> </span>k8s-app<span class=o>=</span>calico-node
</span></code></pre></div> <p>This will show logs for all <code>calico-node</code> pods.</p> <h3 id=common-causes-of-calico-node-failure><strong>Common Causes of Calico Node Failure</strong><a class=headerlink href=#common-causes-of-calico-node-failure title="Link to this section">&para;</a></h3> <ol> <li> <p><strong>IP Forwarding is Disabled</strong><br> Check if IP forwarding is enabled on all nodes: <div class="language-bash highlight"><pre><span></span><code><span id=__span-57-1>sysctl<span class=w> </span>net.ipv4.conf.all.forwarding
</span></code></pre></div> If it returns <code>0</code>, enable it: <div class="language-bash highlight"><pre><span></span><code><span id=__span-58-1>sudo<span class=w> </span>sysctl<span class=w> </span>-w<span class=w> </span>net.ipv4.conf.all.forwarding<span class=o>=</span><span class=m>1</span>
</span></code></pre></div></p> </li> <li> <p><strong>Mismatch in <code>pod-network-cidr</code></strong><br> Verify that the <code>--pod-network-cidr</code> in <code>kubeadm init</code> matches Calico's config: <div class="language-bash highlight"><pre><span></span><code><span id=__span-59-1>kubectl<span class=w> </span>get<span class=w> </span>ippools<span class=w> </span>-o<span class=w> </span>yaml
</span></code></pre></div> If it's wrong, you may need to delete and reapply the correct CNI configuration.</p> </li> <li> <p><strong>Firewall Rules Blocking Traffic</strong><br> Run this on all nodes: <div class="language-bash highlight"><pre><span></span><code><span id=__span-60-1>sudo<span class=w> </span>iptables<span class=w> </span>-L<span class=w> </span>-v<span class=w> </span>-n
</span></code></pre></div> If you see blocks, try flushing iptables: <div class="language-bash highlight"><pre><span></span><code><span id=__span-61-1>sudo<span class=w> </span>iptables<span class=w> </span>--flush
</span></code></pre></div></p> </li> <li> <p><strong>Missing Kernel Modules</strong><br> Run: <div class="language-bash highlight"><pre><span></span><code><span id=__span-62-1>lsmod<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>ip_tables
</span></code></pre></div> If it's missing, load it: <div class="language-bash highlight"><pre><span></span><code><span id=__span-63-1>sudo<span class=w> </span>modprobe<span class=w> </span>ip_tables
</span></code></pre></div></p> </li> </ol> <hr> <h2 id=-final-checklist>ğŸ¯ <strong>Final Checklist</strong><a class=headerlink href=#-final-checklist title="Link to this section">&para;</a></h2> <p>âœ… <strong>Master Node Setup:</strong> Everything looks good except for Calico issues.<br> âœ… <strong>Worker Nodes Joined:</strong> <code>kube-proxy</code> is running, meaning nodes joined successfully.<br> ğŸš¨ <strong>Fix Calico Issues:</strong> Debug logs and check networking settings. </p> <hr> <h3 id=-try-these-steps-and-let-me-know-the-logs-if-the-issue-persists>ğŸš€ <strong>Try these steps and let me know the logs if the issue persists!</strong><a class=headerlink href=#-try-these-steps-and-let-me-know-the-logs-if-the-issue-persists title="Link to this section">&para;</a></h3> <hr> <p>Dono commands ka connection <strong>CNI (Container Network Interface)</strong> se hai, lekin inka <strong>purpose different</strong> hai.<br> <strong>TL;DR:</strong><br> 1. <strong>CNI plugins</strong> (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>) â†’ Kubernetes ke networking backend ke liye zaroori binaries install karta hai.<br> 2. <strong>Calico manifest</strong> (<code>calico.yaml</code>) â†’ Calico CNI ko deploy karta hai, jo Kubernetes ke networking aur network policies ko manage karta hai. </p> <hr> <h2 id=-1-cni-plugins-tarball-cni-plugins-linux-amd64-v162tgz>ğŸ”¹ <strong>1. CNI Plugins Tarball (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>)</strong><a class=headerlink href=#-1-cni-plugins-tarball-cni-plugins-linux-amd64-v162tgz title="Link to this section">&para;</a></h2> <p><strong>ğŸ”¹ Yeh kab install karni hoti hai?</strong><br> âœ” Jab aap <strong>kubeadm se manually cluster setup kar rahe hain</strong>.<br> âœ” Jab aapko <strong>CNI binaries manually install karni ho</strong>, taake Calico, Flannel, Weave, ya koi aur CNI plugin properly work kare.<br> âœ” Yeh <strong>Kubernetes ka part nahi hoti</strong>, balki networking ke liye extra dependencies provide karti hai. </p> <p><strong>ğŸ”¹ Iska function kya hai?</strong><br> - CNI plugins ka tarball <strong>sirf CNI binaries install karta hai</strong>, jo <code>/opt/cni/bin/</code> mein save hoti hain.<br> - Kubernetes ki networking plugins (jaise Flannel, Calico, etc.) in binaries ka use karti hain taake networking properly configure ho sake.<br> - Bina CNI binaries ke, aapka CNI plugin <strong>work nahi karega</strong>.</p> <p><strong>ğŸ”¹ Command example:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-64-1>wget<span class=w> </span>https://github.com/containernetworking/plugins/releases/download/v1.6.2/cni-plugins-linux-amd64-v1.6.2.tgz
</span><span id=__span-64-2>sudo<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>/opt/cni/bin
</span><span id=__span-64-3>sudo<span class=w> </span>tar<span class=w> </span>-C<span class=w> </span>/opt/cni/bin<span class=w> </span>-xzf<span class=w> </span>cni-plugins-linux-amd64-v1.6.2.tgz
</span></code></pre></div> ğŸ‘‰ <strong>Yeh command CNI plugins <code>/opt/cni/bin/</code> mein extract karti hai.</strong> </p> <hr> <h2 id=-2-calico-manifest-calicoyaml>ğŸ”¹ <strong>2. Calico Manifest (<code>calico.yaml</code>)</strong><a class=headerlink href=#-2-calico-manifest-calicoyaml title="Link to this section">&para;</a></h2> <p><strong>ğŸ”¹ Yeh kab install karni hoti hai?</strong><br> âœ” Jab aap <strong>Kubernetes cluster setup kar chuke hain</strong>, aur ab <strong>networking configure karni hai</strong>.<br> âœ” Jab aap <strong>Calico as a CNI plugin use karna chahte hain</strong>.<br> âœ” Jab aapko <strong>network policies enforce karni hain</strong>, jaise pod-to-pod communication restrict karna. </p> <p><strong>ğŸ”¹ Iska function kya hai?</strong><br> - <strong>Calico Kubernetes ke liye ek full networking solution hai</strong>, jo BGP routing, network security policies, aur overlay/underlay networking provide karta hai.<br> - <code>kubectl apply -f calico.yaml</code> command <strong>Calico ke CRDs, DaemonSet, aur network policies</strong> deploy karti hai.<br> - Yeh cluster ke andar <strong>Pods ka networking model setup karta hai</strong>. </p> <p><strong>ğŸ”¹ Command example:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-65-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://docs.projectcalico.org/manifests/calico.yaml
</span></code></pre></div> ğŸ‘‰ <strong>Yeh command Kubernetes cluster ke andar Calico ko as a CNI plugin deploy karti hai.</strong> </p> <hr> <h2 id=-dono-ka-connection>ğŸ”¹ <strong>Dono ka Connection?</strong><a class=headerlink href=#-dono-ka-connection title="Link to this section">&para;</a></h2> <p>âœ” <strong>Pehle CNI binaries install hoti hain (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>)</strong> taake Kubernetes CNI system ko use kar sake.<br> âœ” <strong>Phir Calico (<code>calico.yaml</code>) apply hota hai</strong>, jo Kubernetes networking ko manage karta hai.<br> âœ” <strong>Agar CNI plugins install na hoon, toh Calico work nahi karega</strong>, kyunki Calico internally CNI plugins ko call karta hai. </p> <hr> <h2 id=-conclusion-konsi-command-kab-chalani-hai><strong>âš¡ Conclusion: Konsi Command Kab Chalani Hai?</strong><a class=headerlink href=#-conclusion-konsi-command-kab-chalani-hai title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th>Situation</th> <th>CNI Plugins (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>)</th> <th>Calico (<code>calico.yaml</code>)</th> </tr> </thead> <tbody> <tr> <td><strong>Cluster Setup Start Kiya Hai</strong></td> <td>âœ… Install karo</td> <td>âŒ Mat karo</td> </tr> <tr> <td><strong>Kubernetes Cluster Ready Hai</strong></td> <td>âœ… Pehle install kar chuke ho</td> <td>âœ… Ab install karo</td> </tr> <tr> <td><strong>Networking Issues Aarahi Hain</strong></td> <td>âœ… Check karo binaries <code>/opt/cni/bin/</code> mein hain?</td> <td>âœ… Ensure karo Calico deploy hua hai</td> </tr> </tbody> </table> <p>ğŸš€ <strong>Best Practice:</strong><br> 1ï¸âƒ£ <strong>Pehle CNI plugins install karein</strong><br> 2ï¸âƒ£ <strong>Phir Calico deploy karein</strong><br> 3ï¸âƒ£ <code>kubectl get pods -n kube-system</code> check karein ke sab kuch properly running hai ya nahi.</p> <hr> <p>Agar aap <strong>CNI plugins (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>) install nahi karte</strong>, toh aapke Kubernetes cluster mein <strong>networking issues aayengi</strong>, aur Calico ya koi bhi CNI plugin properly work nahi karega. </p> <hr> <h2 id=-problems-without-cni-plugins><strong>ğŸš¨ Problems Without CNI Plugins</strong><a class=headerlink href=#-problems-without-cni-plugins title="Link to this section">&para;</a></h2> <p>Agar aap <strong>CNI plugins install nahi karte</strong>, toh yeh issues ho sakti hain:</p> <h3 id=-1-kubectl-get-nodes-shows-not-ready>âŒ <strong>1. <code>kubectl get nodes</code> shows "Not Ready"`</strong><a class=headerlink href=#-1-kubectl-get-nodes-shows-not-ready title="Link to this section">&para;</a></h3> <ul> <li>Aapka Kubernetes node <strong>"Ready" state mein nahi aayega</strong>, kyunki networking initialize nahi hogi.</li> <li>Command: <div class="language-bash highlight"><pre><span></span><code><span id=__span-66-1>kubectl<span class=w> </span>get<span class=w> </span>nodes
</span></code></pre></div> Output kuch is tarah ho sakta hai: <div class="language-text highlight"><pre><span></span><code><span id=__span-67-1>NAME    STATUS     ROLES    AGE   VERSION
</span><span id=__span-67-2>node-1  NotReady   master   5m    v1.28.0
</span></code></pre></div> ğŸš¨ <strong>Reason:</strong> Kubelet CNI ko initialize karne ki koshish karega, lekin bina CNI plugins ke fail ho jayega.</li> </ul> <hr> <h3 id=-2-kubectl-get-pods--n-kube-system-shows-cni-related-errors>âŒ <strong>2. <code>kubectl get pods -n kube-system</code> shows CNI-related errors</strong><a class=headerlink href=#-2-kubectl-get-pods--n-kube-system-shows-cni-related-errors title="Link to this section">&para;</a></h3> <ul> <li>Kubernetes ke networking-related pods <strong>CrashLoopBackOff</strong> ya <strong>ContainerCreating</strong> state mein atke rahenge.</li> <li>Command: <div class="language-bash highlight"><pre><span></span><code><span id=__span-68-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system
</span></code></pre></div> Output kuch is tarah ho sakta hai: <div class="language-text highlight"><pre><span></span><code><span id=__span-69-1>NAME                                       READY   STATUS              RESTARTS   AGE
</span><span id=__span-69-2>calico-kube-controllers-xxxx               0/1     CrashLoopBackOff    5          3m
</span><span id=__span-69-3>calico-node-xxxx                           0/1     CreateContainerError 0          3m
</span><span id=__span-69-4>kube-proxy-xxxx                            1/1     Running             0          5m
</span></code></pre></div> ğŸš¨ <strong>Reason:</strong> Calico CNI plugins binaries ko <code>/opt/cni/bin/</code> se load karne ki koshish karta hai, jo exist nahi karti.</li> </ul> <hr> <h3 id=-3-journalctl--u-kubelet-shows-no-cni-plugin-found>âŒ <strong>3. <code>journalctl -u kubelet</code> shows "no CNI plugin found"</strong><a class=headerlink href=#-3-journalctl--u-kubelet-shows-no-cni-plugin-found title="Link to this section">&para;</a></h3> <ul> <li>Agar aap logs check karenge, toh kubelet complain karega ke <strong>CNI plugin available nahi hai</strong>.</li> <li>Command: <div class="language-bash highlight"><pre><span></span><code><span id=__span-70-1>journalctl<span class=w> </span>-u<span class=w> </span>kubelet<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>CNI
</span></code></pre></div> Output kuch is tarah ho sakta hai: <div class="language-text highlight"><pre><span></span><code><span id=__span-71-1>kubelet[1234]: networkPlugin cni failed to set up pod &quot;mypod_default&quot; network: no CNI plugin found in /opt/cni/bin/
</span></code></pre></div></li> </ul> <hr> <h3 id=-4-pods-will-not-be-able-to-communicate>âŒ <strong>4. Pods Will Not Be Able to Communicate</strong><a class=headerlink href=#-4-pods-will-not-be-able-to-communicate title="Link to this section">&para;</a></h3> <ul> <li>Agar networking initialize nahi hoti, toh <strong>pods ek dusre se communicate nahi kar sakte</strong>.</li> <li>Agar aap <code>kubectl get pods -A</code> chalayein, toh pods ya toh pending rahenge ya running nahi honge.</li> </ul> <hr> <h2 id=-solution-install-cni-plugins-before-calico><strong>âœ… Solution: Install CNI Plugins Before Calico</strong><a class=headerlink href=#-solution-install-cni-plugins-before-calico title="Link to this section">&para;</a></h2> <p>Agar aapko yeh issues avoid karni hain, toh <strong>pehle CNI plugins install karein, phir Calico apply karein</strong>:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-72-1><span class=c1># Install CNI Plugins</span>
</span><span id=__span-72-2>wget<span class=w> </span>https://github.com/containernetworking/plugins/releases/download/v1.6.2/cni-plugins-linux-amd64-v1.6.2.tgz
</span><span id=__span-72-3>sudo<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>/opt/cni/bin
</span><span id=__span-72-4>sudo<span class=w> </span>tar<span class=w> </span>-C<span class=w> </span>/opt/cni/bin<span class=w> </span>-xzf<span class=w> </span>cni-plugins-linux-amd64-v1.6.2.tgz
</span><span id=__span-72-5>
</span><span id=__span-72-6><span class=c1># Apply Calico CNI</span>
</span><span id=__span-72-7>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://docs.projectcalico.org/manifests/calico.yaml
</span></code></pre></div> <hr> <h2 id=-conclusion-cni-plugins-install-karna-zaroori-hai><strong>ğŸ¯ Conclusion: CNI Plugins Install Karna Zaroori Hai!</strong><a class=headerlink href=#-conclusion-cni-plugins-install-karna-zaroori-hai title="Link to this section">&para;</a></h2> <p>âœ” <strong>Bina CNI Plugins ke:</strong> Cluster networking fail ho jayegi.<br> âœ” <strong>Agar pehle install kar dein:</strong> Calico ya koi bhi CNI plugin properly work karega. </p> <p>ğŸš€ <strong>Best Practice:</strong> <strong>Hamesha CNI plugins pehle install karein, phir CNI manifest (Calico, Flannel, etc.) apply karein.</strong></p> <hr> <p>Nahi, <strong>CNI plugins (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>) sirf containerd ki dependency nahi hain</strong>. Yeh <strong>Kubernetes networking ke liye zaroori hain</strong>, chahe aap container runtime <strong>containerd use kar rahe ho ya CRI-O ya Docker</strong>. </p> <hr> <h2 id=-cni-plugins-ka-role-kya-hai><strong>ğŸš€ CNI Plugins ka Role Kya Hai?</strong><a class=headerlink href=#-cni-plugins-ka-role-kya-hai title="Link to this section">&para;</a></h2> <p>CNI (Container Network Interface) plugins <strong>Kubernetes pods ko network assign karne</strong> ke liye use hote hain. Jab Kubernetes koi pod start karta hai, toh yeh <strong>CNI plugins</strong> ko call karta hai taake pod ko ek IP assign ho aur networking setup ho sake.</p> <p>ğŸ’¡ <strong>Containerd sirf containers ko run karne ka kaam karta hai, magar networking manage nahi karta.</strong> </p> <p>Agar aap sirf <strong>containerd + runc install karte hain</strong> aur CNI plugins install nahi karte, toh <strong>pod network create nahi hoga</strong>, aur kubelet errors dega.</p> <hr> <h2 id=-bina-cni-plugins-ke-kya-issues-honge><strong>ğŸš¨ Bina CNI Plugins ke Kya Issues Honge?</strong><a class=headerlink href=#-bina-cni-plugins-ke-kya-issues-honge title="Link to this section">&para;</a></h2> <p>Agar aap <strong>CNI plugins install nahi karte</strong>, toh yeh problems ho sakti hain:</p> <h3 id=-1-pods-ko-ip-nahi-milegi-aur-wo-stuck-ho-jayenge>âŒ <strong>1. Pods ko IP nahi milegi, aur wo stuck ho jayenge</strong><a class=headerlink href=#-1-pods-ko-ip-nahi-milegi-aur-wo-stuck-ho-jayenge title="Link to this section">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-73-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-A
</span></code></pre></div> <strong>Output:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-74-1>NAMESPACE     NAME                                       READY   STATUS              RESTARTS   AGE
</span><span id=__span-74-2>kube-system   calico-node-xxxxx                         0/1     CreateContainerError 0          5m
</span><span id=__span-74-3>kube-system   calico-kube-controllers-xxxxx            0/1     CrashLoopBackOff    5          5m
</span></code></pre></div> ğŸš¨ <strong>Reason:</strong> Kubelet network setup ke liye <code>/opt/cni/bin/</code> ke andar CNI plugins ko dhund raha hoga, magar yeh exist nahi karenge.</p> <hr> <h3 id=-2-journalctl--u-kubelet-logs-show-missing-cni-plugin-errors>âŒ <strong>2. <code>journalctl -u kubelet</code> logs show missing CNI plugin errors</strong><a class=headerlink href=#-2-journalctl--u-kubelet-logs-show-missing-cni-plugin-errors title="Link to this section">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-75-1>journalctl<span class=w> </span>-u<span class=w> </span>kubelet<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>CNI
</span></code></pre></div> <strong>Output:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-76-1>networkPlugin cni failed to set up pod &quot;mypod_default&quot; network: no CNI plugin found in /opt/cni/bin/
</span></code></pre></div> ğŸš¨ <strong>Reason:</strong> Kubelet <strong>CNI plugins load karne ki koshish kar raha hai</strong>, magar <code>/opt/cni/bin/</code> empty hai.</p> <hr> <h3 id=-3-kubectl-get-nodes-will-show-notready>âŒ <strong>3. <code>kubectl get nodes</code> will show "NotReady"</strong><a class=headerlink href=#-3-kubectl-get-nodes-will-show-notready title="Link to this section">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-77-1>kubectl<span class=w> </span>get<span class=w> </span>nodes
</span></code></pre></div> <strong>Output:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-78-1>NAME    STATUS     ROLES    AGE   VERSION
</span><span id=__span-78-2>node-1  NotReady   master   10m   v1.28.0
</span></code></pre></div> ğŸš¨ <strong>Reason:</strong> Networking initialize nahi hui, is wajah se node <strong>Ready state mein nahi aayega</strong>.</p> <hr> <h2 id=-final-answer-calico-cni-plugins-automatically-install-nahi-karta><strong>ğŸ¯ Final Answer: Calico CNI Plugins Automatically Install Nahi Karta</strong><a class=headerlink href=#-final-answer-calico-cni-plugins-automatically-install-nahi-karta title="Link to this section">&para;</a></h2> <p>Calico sirf <strong>network policies</strong> aur <strong>IP routing</strong> manage karta hai, magar <strong>CNI plugins (<code>cni-plugins-linux-amd64-v1.6.2.tgz</code>) install nahi karta</strong>. </p> <p>âœ… <strong>Agar aap CNI plugins install karenge, toh Calico properly work karega.</strong><br> âŒ <strong>Agar nahi karenge, toh Calico aur networking fail ho jayegi.</strong></p> <hr> <p>Calico and Flannel are <strong>CNI plugins</strong>, not CNIs themselves. </p> <h3 id=understanding-cni-vs-cni-plugin><strong>Understanding CNI vs. CNI Plugin</strong><a class=headerlink href=#understanding-cni-vs-cni-plugin title="Link to this section">&para;</a></h3> <p>ğŸ”¹ <strong>CNI (Container Network Interface):</strong><br> CNI is just a <strong>standard</strong> (a set of specifications) that defines how networking should be implemented in containerized environments. It doesn't provide networking itself. </p> <p>ğŸ”¹ <strong>CNI Plugin:</strong><br> A CNI plugin is an <strong>actual implementation</strong> of the CNI standard. Calico, Flannel, Cilium, Weave, etc., are CNI plugins that follow the CNI specification to provide networking for Kubernetes clusters. </p> <h3 id=how-it-works><strong>How It Works</strong><a class=headerlink href=#how-it-works title="Link to this section">&para;</a></h3> <p>When Kubernetes needs to set up networking for a pod, it calls the CNI interface, which then invokes the configured <strong>CNI plugin</strong> (Calico, Flannel, etc.) to handle networking tasks. </p> <h3 id=example-of-cni-plugins><strong>Example of CNI Plugins</strong><a class=headerlink href=#example-of-cni-plugins title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th><strong>CNI Plugin</strong></th> <th><strong>Networking Model</strong></th> <th><strong>Key Features</strong></th> </tr> </thead> <tbody> <tr> <td><strong>Calico</strong></td> <td>Layer 3 (Routing)</td> <td>Network policies, BGP support, security-focused</td> </tr> <tr> <td><strong>Flannel</strong></td> <td>Layer 2 (Overlay)</td> <td>Simple, lightweight, uses VXLAN or host-gw</td> </tr> <tr> <td><strong>Cilium</strong></td> <td>eBPF-based</td> <td>Highly scalable, security-focused, service mesh integration</td> </tr> <tr> <td><strong>Weave</strong></td> <td>Layer 2 (Overlay)</td> <td>Simpler than Calico, automatic peer discovery</td> </tr> </tbody> </table> <p>Would you like a deeper dive into the technical differences between Calico and Flannel? ğŸš€</p> <hr> <h3 id=cni-interface--what-is-it><strong>CNI Interface â€“ What Is It?</strong><a class=headerlink href=#cni-interface--what-is-it title="Link to this section">&para;</a></h3> <p>The <strong>CNI (Container Network Interface) interface</strong> is a <strong>standardized API</strong> that allows Kubernetes (or any container runtime) to communicate with networking plugins. It acts as a bridge between the container runtime (like containerd or CRI-O) and networking solutions (like Calico, Flannel, etc.). </p> <hr> <h3 id=how-it-works_1><strong>How It Works</strong><a class=headerlink href=#how-it-works_1 title="Link to this section">&para;</a></h3> <p>1ï¸âƒ£ <strong>Kubernetes (Kubelet) needs to create a pod</strong><br> - It calls the container runtime (e.g., containerd). </p> <p>2ï¸âƒ£ <strong>Container runtime requests network setup</strong><br> - The runtime calls the <strong>CNI interface</strong>, passing details like pod name, namespace, and container ID. </p> <p>3ï¸âƒ£ <strong>CNI Interface triggers the configured CNI plugin</strong><br> - This could be Calico, Flannel, Cilium, etc. </p> <p>4ï¸âƒ£ <strong>CNI Plugin configures networking</strong><br> - It sets up interfaces, IPs, routes, and any necessary firewall rules for the pod. </p> <p>5ï¸âƒ£ <strong>Networking is ready</strong><br> - The pod gets connected to the cluster network. </p> <hr> <h3 id=cni-interface-vs-cni-plugin><strong>CNI Interface vs. CNI Plugin</strong><a class=headerlink href=#cni-interface-vs-cni-plugin title="Link to this section">&para;</a></h3> <table> <thead> <tr> <th><strong>Component</strong></th> <th><strong>Function</strong></th> </tr> </thead> <tbody> <tr> <td><strong>CNI Interface</strong></td> <td>Standard API that enables communication between the container runtime and networking plugins.</td> </tr> <tr> <td><strong>CNI Plugin</strong></td> <td>The actual networking implementation (e.g., Calico, Flannel) that sets up and manages pod networking.</td> </tr> </tbody> </table> <hr> <h3 id=cni-interface-in-action><strong>CNI Interface in Action</strong><a class=headerlink href=#cni-interface-in-action title="Link to this section">&para;</a></h3> <p>ğŸ“Œ In Kubernetes, the <strong>CNI interface</strong> is typically located at:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-79-1>/etc/cni/net.d/
</span></code></pre></div> This directory contains <strong>CNI configuration files</strong> that specify which plugin (e.g., Flannel, Calico) should be used. </p> <p>ğŸ“Œ The <strong>CNI plugins</strong> themselves are stored in:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-80-1>/opt/cni/bin/
</span></code></pre></div> These are actual binaries that Kubernetes calls to handle networking.</p> <hr> <h3 id=analogy-cni-interface-as-a-power-socket-><strong>Analogy: CNI Interface as a Power Socket ğŸ”Œ</strong><a class=headerlink href=#analogy-cni-interface-as-a-power-socket- title="Link to this section">&para;</a></h3> <ul> <li><strong>CNI Interface</strong> = A <strong>standardized power socket</strong> that ensures all electrical devices can be plugged in. </li> <li><strong>CNI Plugin (Calico, Flannel, etc.)</strong> = Different <strong>power adapters</strong> that convert the electricity to the right format. </li> </ul> <p>Would you like an example of how a CNI plugin (like Flannel) is configured via the CNI interface? ğŸš€</p> <hr> <p>Yes, exactly! âœ… </p> <p>When you extract <strong><code>cni-plugins-linux-amd64-v1.6.2.tgz</code></strong>, it places all the <strong>CNI plugins</strong> into <code>/opt/cni/bin/</code>. </p> <h3 id=how-it-works_2><strong>How It Works?</strong><a class=headerlink href=#how-it-works_2 title="Link to this section">&para;</a></h3> <p>1ï¸âƒ£ Extracting the package:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-81-1>sudo<span class=w> </span>tar<span class=w> </span>-C<span class=w> </span>/opt/cni/bin<span class=w> </span>-xzf<span class=w> </span>cni-plugins-linux-amd64-v1.6.2.tgz
</span></code></pre></div> This installs <strong>all</strong> available CNI plugins in <code>/opt/cni/bin/</code>. </p> <p>2ï¸âƒ£ Now, depending on your configuration, Kubernetes (or any container runtime) picks a <strong>specific plugin</strong> from this directory based on your config in <code>/etc/cni/net.d/</code>. </p> <p>3ï¸âƒ£ When a pod starts, Kubernetes looks at the <strong>CNI configuration file</strong> (e.g., Flannel, Calico) and executes the corresponding plugin binary from <code>/opt/cni/bin/</code>.</p> <hr> <h3 id=example-configuring-flannel-as-the-cni-plugin><strong>Example: Configuring Flannel as the CNI Plugin</strong><a class=headerlink href=#example-configuring-flannel-as-the-cni-plugin title="Link to this section">&para;</a></h3> <p>After extracting the plugins, you would place a <strong>Flannel-specific configuration</strong> file in <code>/etc/cni/net.d/</code>, like this:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-82-1><span class=p>{</span>
</span><span id=__span-82-2><span class=w>  </span><span class=nt>&quot;cniVersion&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.3.1&quot;</span><span class=p>,</span>
</span><span id=__span-82-3><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;flannel-net&quot;</span><span class=p>,</span>
</span><span id=__span-82-4><span class=w>  </span><span class=nt>&quot;plugins&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-82-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-82-6><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;flannel&quot;</span><span class=p>,</span>
</span><span id=__span-82-7><span class=w>      </span><span class=nt>&quot;delegate&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-82-8><span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;bridge&quot;</span><span class=p>,</span>
</span><span id=__span-82-9><span class=w>        </span><span class=nt>&quot;bridge&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cni0&quot;</span><span class=p>,</span>
</span><span id=__span-82-10><span class=w>        </span><span class=nt>&quot;isGateway&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-82-11><span class=w>        </span><span class=nt>&quot;ipMasq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-82-12><span class=w>        </span><span class=nt>&quot;hairpinMode&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-82-13><span class=w>        </span><span class=nt>&quot;ipam&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-82-14><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;host-local&quot;</span><span class=p>,</span>
</span><span id=__span-82-15><span class=w>          </span><span class=nt>&quot;subnet&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;10.244.0.0/16&quot;</span><span class=p>,</span>
</span><span id=__span-82-16><span class=w>          </span><span class=nt>&quot;routes&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span><span class=w> </span><span class=nt>&quot;dst&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.0.0.0/0&quot;</span><span class=w> </span><span class=p>}]</span>
</span><span id=__span-82-17><span class=w>        </span><span class=p>}</span>
</span><span id=__span-82-18><span class=w>      </span><span class=p>}</span>
</span><span id=__span-82-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-82-20><span class=w>  </span><span class=p>]</span>
</span><span id=__span-82-21><span class=p>}</span>
</span></code></pre></div> <p>Once this is done, Kubernetes will execute <code>/opt/cni/bin/flannel</code> whenever it needs to configure networking for a new pod. </p> <hr> <h3 id=key-takeaway><strong>Key Takeaway</strong><a class=headerlink href=#key-takeaway title="Link to this section">&para;</a></h3> <ul> <li><code>/opt/cni/bin/</code> contains all <strong>CNI plugin binaries</strong>. </li> <li><code>/etc/cni/net.d/</code> contains <strong>CNI configuration files</strong> that tell Kubernetes <strong>which</strong> plugin to use. </li> <li>Kubernetes picks the <strong>right binary</strong> from <code>/opt/cni/bin/</code> based on the configuration file in <code>/etc/cni/net.d/</code>. </li> </ul> <p>Would you like a breakdown of another CNI plugin, such as Calico? ğŸš€</p> <hr> <p>Not necessarily. <code>/etc/cni/net.d/</code> can contain <strong>multiple</strong> CNI configuration files at the same time. </p> <h3 id=how-kubernetes-handles-multiple-cni-configs-in-etccninetd><strong>How Kubernetes Handles Multiple CNI Configs in <code>/etc/cni/net.d/</code></strong><a class=headerlink href=#how-kubernetes-handles-multiple-cni-configs-in-etccninetd title="Link to this section">&para;</a></h3> <ul> <li>The <strong>first</strong> configuration file (sorted alphabetically) is used as the primary CNI plugin. </li> <li>Additional configuration files may be used for <strong>chaining</strong> (e.g., adding extra network features). </li> <li>If multiple configurations exist, Kubernetes (or CRI) selects the first matching one.</li> </ul> <hr> <h3 id=example-1-single-plugin-flannel-only><strong>Example 1: Single Plugin (Flannel Only)</strong><a class=headerlink href=#example-1-single-plugin-flannel-only title="Link to this section">&para;</a></h3> <p>If <code>/etc/cni/net.d/</code> contains only <strong>one</strong> configuration file: <div class="language-bash highlight"><pre><span></span><code><span id=__span-83-1>ls<span class=w> </span>/etc/cni/net.d/
</span><span id=__span-83-2><span class=m>10</span>-flannel.conflist
</span></code></pre></div> Then Kubernetes will use <strong>Flannel</strong> as the only CNI.</p> <hr> <h3 id=example-2-multiple-plugins-flannel--bandwidth-control><strong>Example 2: Multiple Plugins (Flannel + Bandwidth Control)</strong><a class=headerlink href=#example-2-multiple-plugins-flannel--bandwidth-control title="Link to this section">&para;</a></h3> <p>You might have multiple config files: <div class="language-bash highlight"><pre><span></span><code><span id=__span-84-1>ls<span class=w> </span>/etc/cni/net.d/
</span><span id=__span-84-2><span class=m>10</span>-flannel.conflist
</span><span id=__span-84-3><span class=m>20</span>-bandwidth.conf
</span></code></pre></div> - <code>10-flannel.conflist</code> â†’ Defines pod networking via Flannel.<br> - <code>20-bandwidth.conf</code> â†’ Used as an <strong>additional plugin</strong> for bandwidth limits. </p> <p><strong>How it works:</strong><br> - The <strong>primary CNI plugin</strong> (Flannel) handles pod networking.<br> - The <strong>secondary plugin</strong> (Bandwidth) applies network restrictions. </p> <hr> <h3 id=example-3-using-chained-cni-plugins-in-a-single-config-file><strong>Example 3: Using Chained CNI Plugins in a Single Config File</strong><a class=headerlink href=#example-3-using-chained-cni-plugins-in-a-single-config-file title="Link to this section">&para;</a></h3> <p>Instead of separate files, you can also define <strong>multiple plugins inside one file</strong> using the <code>"plugins"</code> array:</p> <p><div class="language-json highlight"><pre><span></span><code><span id=__span-85-1><span class=p>{</span>
</span><span id=__span-85-2><span class=w>  </span><span class=nt>&quot;cniVersion&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.3.1&quot;</span><span class=p>,</span>
</span><span id=__span-85-3><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;multus-network&quot;</span><span class=p>,</span>
</span><span id=__span-85-4><span class=w>  </span><span class=nt>&quot;plugins&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-85-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-85-6><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;flannel&quot;</span>
</span><span id=__span-85-7><span class=w>    </span><span class=p>},</span>
</span><span id=__span-85-8><span class=w>    </span><span class=p>{</span>
</span><span id=__span-85-9><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;bandwidth&quot;</span><span class=p>,</span>
</span><span id=__span-85-10><span class=w>      </span><span class=nt>&quot;ingressRate&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000000</span><span class=p>,</span>
</span><span id=__span-85-11><span class=w>      </span><span class=nt>&quot;egressRate&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000000</span>
</span><span id=__span-85-12><span class=w>    </span><span class=p>}</span>
</span><span id=__span-85-13><span class=w>  </span><span class=p>]</span>
</span><span id=__span-85-14><span class=p>}</span>
</span></code></pre></div> Here, Flannel is <strong>first applied</strong>, followed by the Bandwidth plugin.</p> <hr> <h3 id=final-answer><strong>Final Answer:</strong><a class=headerlink href=#final-answer title="Link to this section">&para;</a></h3> <ul> <li><strong>Yes, there can be multiple CNI config files</strong> in <code>/etc/cni/net.d/</code>. </li> <li><strong>Kubernetes will use the first matching config (alphabetically sorted).</strong> </li> <li><strong>Plugins can also be chained inside a single <code>.conflist</code> file.</strong> </li> </ul> <p>Would you like an example of a <strong>Multus CNI setup</strong> (which allows multiple CNIs per pod)? ğŸš€</p> <hr> <p>No worries! Since you've installed <strong>Calico</strong> but haven't explicitly opened its required ports, let's go over it again. </p> <h3 id=-why-do-you-need-to-open-ports-for-calico><strong>ğŸ“Œ Why Do You Need to Open Ports for Calico?</strong><a class=headerlink href=#-why-do-you-need-to-open-ports-for-calico title="Link to this section">&para;</a></h3> <p>Calico is a <strong>CNI plugin</strong> that enables networking for Kubernetes Pods. It runs its own components, such as the <strong>Felix agent, BGP, and Typha</strong>, which require specific ports to be open for proper communication. </p> <hr> <h3 id=-required-ports-for-calico><strong>ğŸš€ Required Ports for Calico</strong><a class=headerlink href=#-required-ports-for-calico title="Link to this section">&para;</a></h3> <p>You need to ensure that the following ports are open <strong>on all Kubernetes nodes</strong> (control plane &amp; worker nodes): </p> <h4 id=1-calico-node-to-node-communication-bgp--vxlanip-in-ip><strong>1ï¸âƒ£ Calico Node-to-Node Communication (BGP &amp; VXLAN/IP-in-IP)</strong><a class=headerlink href=#1-calico-node-to-node-communication-bgp--vxlanip-in-ip title="Link to this section">&para;</a></h4> <table> <thead> <tr> <th>Port</th> <th>Protocol</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><strong>179</strong></td> <td>TCP</td> <td>BGP communication (only needed if using BGP mode)</td> </tr> <tr> <td><strong>4789</strong></td> <td>UDP</td> <td>VXLAN tunnel traffic (only needed if using VXLAN mode)</td> </tr> <tr> <td><strong>6081</strong></td> <td>UDP</td> <td>IP-in-IP encapsulated traffic (only needed if using IP-in-IP mode)</td> </tr> </tbody> </table> <ul> <li><strong>Which mode are you using?</strong> </li> <li>Default: <strong>IP-in-IP</strong> â†’ Open <strong>6081/UDP</strong> </li> <li>If using <strong>VXLAN</strong> â†’ Open <strong>4789/UDP</strong> </li> <li>If using <strong>BGP Peering</strong> â†’ Open <strong>179/TCP</strong> </li> </ul> <h4 id=2-felix-agent--typha-for-large-clusters><strong>2ï¸âƒ£ Felix Agent &amp; Typha (For Large Clusters)</strong><a class=headerlink href=#2-felix-agent--typha-for-large-clusters title="Link to this section">&para;</a></h4> <table> <thead> <tr> <th>Port</th> <th>Protocol</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><strong>9091</strong></td> <td>TCP</td> <td>Metrics (Felix agent)</td> </tr> <tr> <td><strong>5473</strong></td> <td>TCP</td> <td>Typha-to-Felix communication (only in large clusters)</td> </tr> </tbody> </table> <blockquote> <p><strong>ğŸ‘‰ Action</strong>: Open the relevant ports based on your networking mode.</p> </blockquote> <hr> <h3 id=-how-to-open-these-ports><strong>ğŸš€ How to Open These Ports?</strong><a class=headerlink href=#-how-to-open-these-ports title="Link to this section">&para;</a></h3> <p>If your firewall is <strong>enabled</strong>, run the following commands to allow the required ports:</p> <h4 id=for-ufw-ubuntudebian><strong>For UFW (Ubuntu/Debian)</strong><a class=headerlink href=#for-ufw-ubuntudebian title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-86-1>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>179</span>/tcp<span class=w>    </span><span class=c1># BGP</span>
</span><span id=__span-86-2>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>4789</span>/udp<span class=w>   </span><span class=c1># VXLAN (if using)</span>
</span><span id=__span-86-3>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>6081</span>/udp<span class=w>   </span><span class=c1># IP-in-IP (if using)</span>
</span><span id=__span-86-4>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>9091</span>/tcp<span class=w>   </span><span class=c1># Felix metrics (optional)</span>
</span><span id=__span-86-5>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>5473</span>/tcp<span class=w>   </span><span class=c1># Typha (if using)</span>
</span><span id=__span-86-6>sudo<span class=w> </span>ufw<span class=w> </span>reload
</span></code></pre></div> <h4 id=for-firewalld-rhelcentos><strong>For Firewalld (RHEL/CentOS)</strong><a class=headerlink href=#for-firewalld-rhelcentos title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-87-1>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>179</span>/tcp
</span><span id=__span-87-2>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>4789</span>/udp
</span><span id=__span-87-3>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>6081</span>/udp
</span><span id=__span-87-4>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>9091</span>/tcp
</span><span id=__span-87-5>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>5473</span>/tcp
</span><span id=__span-87-6>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--reload
</span></code></pre></div> <hr> <h3 id=-how-to-verify-if-ports-are-open><strong>ğŸš€ How to Verify If Ports Are Open?</strong><a class=headerlink href=#-how-to-verify-if-ports-are-open title="Link to this section">&para;</a></h3> <p>Run: <div class="language-bash highlight"><pre><span></span><code><span id=__span-88-1>sudo<span class=w> </span>netstat<span class=w> </span>-tulnp<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s1>&#39;179|4789|6081|9091|5473&#39;</span>
</span></code></pre></div> or <div class="language-bash highlight"><pre><span></span><code><span id=__span-89-1>sudo<span class=w> </span>ss<span class=w> </span>-tulnp<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s1>&#39;179|4789|6081|9091|5473&#39;</span>
</span></code></pre></div> If you see the ports <strong>LISTENING</strong>, you're good to go! ğŸš€ </p> <hr> <h3 id=-final-steps-restart-calico><strong>ğŸ“Œ Final Steps: Restart Calico</strong><a class=headerlink href=#-final-steps-restart-calico title="Link to this section">&para;</a></h3> <p>After opening the ports, restart Calico to apply the changes: <div class="language-bash highlight"><pre><span></span><code><span id=__span-90-1>kubectl<span class=w> </span>rollout<span class=w> </span>restart<span class=w> </span>ds<span class=w> </span>calico-node<span class=w> </span>-n<span class=w> </span>calico-system
</span></code></pre></div></p> <p>Now, your Kubernetes nodes should communicate properly using Calico networking! Let me know if you need further clarification. ğŸš€</p> <hr> <p>You're right! To determine which encapsulation mode Calico is using, I asked for the output of: </p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-91-1>kubectl<span class=w> </span>get<span class=w> </span>ippools<span class=w> </span>-o<span class=w> </span>yaml
</span></code></pre></div> <h3 id=-what-to-look-for><strong>ğŸ“Œ What to Look For?</strong><a class=headerlink href=#-what-to-look-for title="Link to this section">&para;</a></h3> <p>The output will contain a section like this: </p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-92-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">crd.projectcalico.org/v1</span>
</span><span id=__span-92-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPPool</span>
</span><span id=__span-92-3><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-92-4><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default-ipv4-ippool</span>
</span><span id=__span-92-5><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-92-6><span class=w>  </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.0/16</span>
</span><span id=__span-92-7><span class=w>  </span><span class=nt>ipipMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
</span><span id=__span-92-8><span class=w>  </span><span class=nt>vxlanMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
</span><span id=__span-92-9><span class=w>  </span><span class=nt>natOutgoing</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <h3 id=-based-on-your-output><strong>ğŸ“Œ Based on Your Output:</strong><a class=headerlink href=#-based-on-your-output title="Link to this section">&para;</a></h3> <ul> <li><strong>If <code>ipipMode: Always</code> â†’ You are using IP-in-IP (Default Mode)</strong><br> â†’ <strong>You must allow Protocol 4</strong> in your firewall. </li> <li><strong>If <code>vxlanMode: Always</code> â†’ You are using VXLAN Mode</strong><br> â†’ <strong>You must open UDP 4789.</strong> </li> <li><strong>If both are <code>Never</code>, then Calico is using BGP</strong><br> â†’ <strong>You must open TCP 179.</strong> </li> </ul> <h3 id=-what-you-need-to-do><strong>ğŸ“Œ What You Need to Do?</strong><a class=headerlink href=#-what-you-need-to-do title="Link to this section">&para;</a></h3> <h4 id=if-you-are-using-ip-in-ip-default><strong>If You Are Using IP-in-IP (Default)</strong><a class=headerlink href=#if-you-are-using-ip-in-ip-default title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-93-1>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span>proto<span class=w> </span><span class=m>4</span>
</span><span id=__span-93-2>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-protocol<span class=o>=</span><span class=m>4</span>
</span><span id=__span-93-3>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--reload
</span></code></pre></div> <h4 id=if-you-are-using-vxlan><strong>If You Are Using VXLAN</strong><a class=headerlink href=#if-you-are-using-vxlan title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-94-1>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>4789</span>/udp
</span><span id=__span-94-2>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>4789</span>/udp
</span><span id=__span-94-3>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--reload
</span></code></pre></div> <h4 id=if-you-are-using-bgp><strong>If You Are Using BGP</strong><a class=headerlink href=#if-you-are-using-bgp title="Link to this section">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-95-1>sudo<span class=w> </span>ufw<span class=w> </span>allow<span class=w> </span><span class=m>179</span>/tcp
</span><span id=__span-95-2>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--permanent<span class=w> </span>--add-port<span class=o>=</span><span class=m>179</span>/tcp
</span><span id=__span-95-3>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--reload
</span></code></pre></div> <p>After applying the changes, <strong>restart Calico</strong>:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-96-1>kubectl<span class=w> </span>rollout<span class=w> </span>restart<span class=w> </span>ds<span class=w> </span>calico-node<span class=w> </span>-n<span class=w> </span>calico-system
</span></code></pre></div></p> <hr> <p>Now, if you run:<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-97-1>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span>wide
</span></code></pre></div> Your nodes should be <strong>Ready</strong> with proper networking! ğŸš€</p> <hr> <p>Bhai, tu ne <strong>kubeconfig</strong> ka poora landscape explore karna shuru kar diya, jo zabardast baat hai. Chal, ek ek karke in sab scenarios ko discuss karte hain.</p> <hr> <h2 id=1-kubeconfig-file-kis-machine-pe-zaroori-hai><strong>1ï¸âƒ£ Kubeconfig File Kis Machine Pe Zaroori Hai?</strong><a class=headerlink href=#1-kubeconfig-file-kis-machine-pe-zaroori-hai title="Link to this section">&para;</a></h2> <p><strong>Kubeconfig file sirf us machine pe zaroori hai jahan se tum <code>kubectl</code> use kar rahe ho.</strong><br> Matlab: - <strong>Master Node / Control Plane</strong> pe ho to wahan bhi ho sakti hai. - <strong>Worker Nodes</strong> pe zaroori nahi hoti (kyunki worker nodes sirf workloads run karte hain). - <strong>Developer ki local machine</strong> pe honi zaroori hai agar wo remote cluster ko access kar raha hai.</p> <p>âœ… <strong>Golden Rule:</strong><br> Agar tum kisi machine se <code>kubectl</code> chala rahe ho aur tumhe cluster access chahiye, to us machine pe kubeconfig file ka hona zaroori hai.</p> <hr> <h2 id=2-kubeadm-se-cluster-banane-ke-baad-kya-hota-hai><strong>2ï¸âƒ£ Kubeadm Se Cluster Banane Ke Baad Kya Hota Hai?</strong><a class=headerlink href=#2-kubeadm-se-cluster-banane-ke-baad-kya-hota-hai title="Link to this section">&para;</a></h2> <p>Jab tum <strong>kubeadm</strong> se cluster banate ho, to end par kubeadm yeh bolta hai: <div class="language-sh highlight"><pre><span></span><code><span id=__span-98-1>mkdir<span class=w> </span>-p<span class=w> </span><span class=nv>$HOME</span>/.kube
</span><span id=__span-98-2>cp<span class=w> </span>-i<span class=w> </span>/etc/kubernetes/admin.conf<span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span><span id=__span-98-3>chown<span class=w> </span><span class=k>$(</span>id<span class=w> </span>-u<span class=k>)</span>:<span class=k>$(</span>id<span class=w> </span>-g<span class=k>)</span><span class=w> </span><span class=nv>$HOME</span>/.kube/config
</span></code></pre></div> â¡ï¸ Yeh is wajah se zaroori hai kyunki <strong>control plane pe hi API Server hota hai, aur kubectl ko uske sath communicate karne ke liye credentials chahiye hote hain.</strong></p> <p>ğŸ”¹ Agar tum kisi <strong>doosri machine se</strong> cluster access karna chahte ho (jaise developer laptop), to tumhe <strong>/etc/kubernetes/admin.conf</strong> ko wahan copy karna padega ya fir admin user ke liye ek naya kubeconfig generate karna padega.</p> <h2 id=scp-usermasteretckubernetesadminconf-kubeconfig><div class="language-sh highlight"><pre><span></span><code><span id=__span-99-1>scp<span class=w> </span>user@master:/etc/kubernetes/admin.conf<span class=w> </span>~/.kube/config
</span></code></pre></div><a class=headerlink href=#scp-usermasteretckubernetesadminconf-kubeconfig title="Link to this section">&para;</a></h2> <h2 id=3-minikube--kind-ka-scenario><strong>3ï¸âƒ£ Minikube &amp; Kind Ka Scenario</strong><a class=headerlink href=#3-minikube--kind-ka-scenario title="Link to this section">&para;</a></h2> <p>âœ… <strong>Minikube</strong> aur <strong>Kind</strong> already tumhari local machine pe ek temporary cluster chalate hain, aur inka <strong>kubeconfig automatic configure ho jata hai</strong>.</p> <p>Agar tum <code>kubectl config get-contexts</code> chalao, to dekhoge ke <strong>Minikube aur Kind ka context already wahan present hoga</strong>.</p> <ul> <li> <p><strong>Minikube ke liye</strong><br> <div class="language-sh highlight"><pre><span></span><code><span id=__span-100-1>minikube<span class=w> </span>start
</span><span id=__span-100-2>kubectl<span class=w> </span>config<span class=w> </span>use-context<span class=w> </span>minikube
</span></code></pre></div> Minikube automatically <code>~/.kube/config</code> me entry bana deta hai.</p> </li> <li> <p><strong>Kind ke liye</strong><br> <div class="language-sh highlight"><pre><span></span><code><span id=__span-101-1>kind<span class=w> </span>create<span class=w> </span>cluster<span class=w> </span>--name<span class=w> </span>my-cluster
</span><span id=__span-101-2>kubectl<span class=w> </span>config<span class=w> </span>use-context<span class=w> </span>kind-my-cluster
</span></code></pre></div> Iska kubeconfig bhi <strong>automatic update hota hai</strong>, lekin tum manually bhi export kar sakte ho: <div class="language-sh highlight"><pre><span></span><code><span id=__span-102-1>kind<span class=w> </span>get<span class=w> </span>kubeconfig<span class=w> </span>--name<span class=w> </span>my-cluster
</span></code></pre></div></p> </li> </ul> <p>âš ï¸ <strong>Important:</strong><br> Minikube aur Kind <strong>single-machine clusters</strong> hote hain, is wajah se ye kubeconfig sirf <strong>tumhari local machine</strong> ke liye bana hota hai. Kisi aur machine se access karna ho to manually kubeconfig export karna padega.</p> <hr> <h2 id=4-aws-eks-managed-kubernetes-services-ka-scene><strong>4ï¸âƒ£ AWS EKS, Managed Kubernetes Services Ka Scene</strong><a class=headerlink href=#4-aws-eks-managed-kubernetes-services-ka-scene title="Link to this section">&para;</a></h2> <p>âœ… <strong>Managed Kubernetes Services</strong> (EKS, GKE, AKS) ka control plane <strong>cloud provider ke paas hota hai</strong>. Tumhari machine par <strong>koi kubeconfig file by default nahi hoti</strong>, lekin tum <strong>kubectl ke through cluster ko tab access kar sakte ho jab tum cloud provider se kubeconfig generate kar lo</strong>.</p> <h3 id=aws-eks-ke-liye><strong>AWS EKS Ke Liye</strong><a class=headerlink href=#aws-eks-ke-liye title="Link to this section">&para;</a></h3> <p>AWS CLI se kubeconfig generate karne ka tareeqa: <div class="language-sh highlight"><pre><span></span><code><span id=__span-103-1>aws<span class=w> </span>eks<span class=w> </span>update-kubeconfig<span class=w> </span>--region<span class=w> </span>us-east-1<span class=w> </span>--name<span class=w> </span>my-eks-cluster
</span></code></pre></div> â¡ï¸ Yeh command automatically <code>~/.kube/config</code> ko update kar degi aur tum EKS cluster access kar sakoge.</p> <p>Agar tum <code>kubectl config get-contexts</code> dekho ge to wahan tumhara EKS cluster ka context bhi dikhega.</p> <hr> <h2 id=5-multiple-clusters-ka-scenario><strong>5ï¸âƒ£ Multiple Clusters Ka Scenario</strong><a class=headerlink href=#5-multiple-clusters-ka-scenario title="Link to this section">&para;</a></h2> <p>Jab tum <strong>naya cluster add karte ho, to kubeconfig file automatically update nahi hoti (except Minikube &amp; Kind)</strong>. Tumhe manually new cluster ka config add karna padta hai.</p> <p>âœ… Tum multiple clusters ko <strong>ek hi kubeconfig file me merge bhi kar sakte ho</strong>.</p> <h3 id=agar-multiple-clusters-hain-to-contexts-kaise-handle-karein><strong>Agar Multiple Clusters Hain to Contexts Kaise Handle Karein?</strong><a class=headerlink href=#agar-multiple-clusters-hain-to-contexts-kaise-handle-karein title="Link to this section">&para;</a></h3> <p>Tum <code>kubectl config get-contexts</code> se check kar sakte ho ke tumhare paas kon kon se clusters hain: <div class="language-sh highlight"><pre><span></span><code><span id=__span-104-1>kubectl<span class=w> </span>config<span class=w> </span>get-contexts
</span></code></pre></div> Phir tum kisi bhi cluster pe switch kar sakte ho: <div class="language-sh highlight"><pre><span></span><code><span id=__span-105-1>kubectl<span class=w> </span>config<span class=w> </span>use-context<span class=w> </span>my-cluster
</span></code></pre></div></p> <h3 id=multiple-clusters-ko-merge-karna><strong>Multiple Clusters Ko Merge Karna</strong><a class=headerlink href=#multiple-clusters-ko-merge-karna title="Link to this section">&para;</a></h3> <p>Agar tumhare paas <strong>2 ya zyada kubeconfig files</strong> hain, to unko merge karke ek file bana sakte ho: <div class="language-sh highlight"><pre><span></span><code><span id=__span-106-1><span class=nb>export</span><span class=w> </span><span class=nv>KUBECONFIG</span><span class=o>=</span>/path/to/config1:/path/to/config2
</span><span id=__span-106-2>kubectl<span class=w> </span>config<span class=w> </span>view<span class=w> </span>--merge<span class=w> </span>--flatten<span class=w> </span>&gt;<span class=w> </span>~/.kube/config
</span></code></pre></div> Ab tum <strong>multiple clusters</strong> ko ek hi kubeconfig file se manage kar sakte ho.</p> <hr> <h2 id=-final-summary_2><strong>ğŸ”¥ Final Summary</strong><a class=headerlink href=#-final-summary_2 title="Link to this section">&para;</a></h2> <ol> <li><strong>Kubeconfig sirf us machine pe chahiye jahan se tum <code>kubectl</code> se cluster access kar rahe ho.</strong></li> <li><strong>Kubeadm clusters me ye file <code>/etc/kubernetes/admin.conf</code> hoti hai, jo manually copy karni parti hai.</strong></li> <li><strong>Minikube aur Kind apni kubeconfig ko automatically update kar dete hain.</strong></li> <li><strong>AWS EKS, GKE, AKS jaise managed clusters ke liye kubeconfig manually fetch karna padta hai (AWS me <code>aws eks update-kubeconfig</code>).</strong></li> <li><strong>Multiple clusters ko ek hi kubeconfig me manage kiya ja sakta hai using contexts.</strong></li> </ol> <hr> <p>Bhai, abhi koi confusion hai ya sab clear ho gaya? ğŸ˜</p> <hr> <p>Bro, <strong>kubeconfig</strong> file ka kaam <strong>kubectl</strong> ko bataana hota hai ke:<br> 1. <strong>Kis API Server se connect karna hai?</strong> (Cluster endpoint)<br> 2. <strong>Kaunse credentials use karne hain?</strong> (Authentication)<br> 3. <strong>Kaunsa namespace ya context use karna hai?</strong> (Default behavior)</p> <p>Ab isko step-by-step <strong>deconstruct</strong> karte hain.</p> <hr> <h2 id=-kubeconfig-ka-basic-concept><strong>ğŸ”¥ Kubeconfig Ka Basic Concept</strong><a class=headerlink href=#-kubeconfig-ka-basic-concept title="Link to this section">&para;</a></h2> <p>Jab bhi tum <code>kubectl get pods</code> chalate ho, to kubectl: 1. <strong>Kubeconfig file read karta hai</strong> (<code>~/.kube/config</code> by default). 2. <strong>Usme cluster details dhundta hai.</strong> 3. <strong>Cluster ke API Server se connect hota hai.</strong> 4. <strong>API Server credentials check karta hai (authentication).</strong> 5. <strong>Authorization ke baad tumhara command execute hota hai.</strong></p> <p><strong>Matlab:</strong><br> âœ… Kubeconfig = <strong>Connection Information</strong> for <code>kubectl</code><br> âœ… API Server = <strong>Main Gateway</strong> jo requests handle karta hai </p> <hr> <h2 id=-kubeconfig-ki-anatomy-structure-samajhna><strong>ğŸ›  Kubeconfig Ki Anatomy (Structure Samajhna)</strong><a class=headerlink href=#-kubeconfig-ki-anatomy-structure-samajhna title="Link to this section">&para;</a></h2> <p>Ek normal kubeconfig file kuch aisi dikhti hai:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-107-1><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-107-2><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Config</span>
</span><span id=__span-107-3><span class=nt>clusters</span><span class=p>:</span>
</span><span id=__span-107-4><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
</span><span id=__span-107-5><span class=w>  </span><span class=nt>cluster</span><span class=p>:</span>
</span><span id=__span-107-6><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://192.168.1.100:6443</span>
</span><span id=__span-107-7><span class=w>    </span><span class=nt>certificate-authority</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/ca.crt</span>
</span><span id=__span-107-8>
</span><span id=__span-107-9><span class=nt>contexts</span><span class=p>:</span>
</span><span id=__span-107-10><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-context</span>
</span><span id=__span-107-11><span class=w>  </span><span class=nt>context</span><span class=p>:</span>
</span><span id=__span-107-12><span class=w>    </span><span class=nt>cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
</span><span id=__span-107-13><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-107-14><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-107-15>
</span><span id=__span-107-16><span class=nt>users</span><span class=p>:</span>
</span><span id=__span-107-17><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-107-18><span class=w>  </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-107-19><span class=w>    </span><span class=nt>client-certificate</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/admin.crt</span>
</span><span id=__span-107-20><span class=w>    </span><span class=nt>client-key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/admin.key</span>
</span><span id=__span-107-21>
</span><span id=__span-107-22><span class=nt>current-context</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-context</span>
</span></code></pre></div> <p>Ye file <strong>4 major sections</strong> pe based hoti hai:</p> <h3 id=1-clusters-section><strong>1ï¸âƒ£ Clusters Section</strong><a class=headerlink href=#1-clusters-section title="Link to this section">&para;</a></h3> <p><div class="language-yaml highlight"><pre><span></span><code><span id=__span-108-1><span class=nt>clusters</span><span class=p>:</span>
</span><span id=__span-108-2><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
</span><span id=__span-108-3><span class=w>  </span><span class=nt>cluster</span><span class=p>:</span>
</span><span id=__span-108-4><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://192.168.1.100:6443</span>
</span><span id=__span-108-5><span class=w>    </span><span class=nt>certificate-authority</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/ca.crt</span>
</span></code></pre></div> â¡ï¸ Yeh section <strong>API Server ka address</strong> store karta hai.<br> â¡ï¸ <code>server: https://192.168.1.100:6443</code> is the <strong>control plane API server</strong>.<br> â¡ï¸ <code>certificate-authority</code> ensures <strong>secure connection</strong> using TLS.</p> <hr> <h3 id=2-users-section><strong>2ï¸âƒ£ Users Section</strong><a class=headerlink href=#2-users-section title="Link to this section">&para;</a></h3> <p><div class="language-yaml highlight"><pre><span></span><code><span id=__span-109-1><span class=nt>users</span><span class=p>:</span>
</span><span id=__span-109-2><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-109-3><span class=w>  </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-109-4><span class=w>    </span><span class=nt>client-certificate</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/admin.crt</span>
</span><span id=__span-109-5><span class=w>    </span><span class=nt>client-key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki/admin.key</span>
</span></code></pre></div> â¡ï¸ Yeh define karta hai ke <strong>kaun sa user API Server se connect ho raha hai.</strong><br> â¡ï¸ <code>client-certificate</code> aur <code>client-key</code> authentication ke liye use hote hain.</p> <hr> <h3 id=3-contexts-section><strong>3ï¸âƒ£ Contexts Section</strong><a class=headerlink href=#3-contexts-section title="Link to this section">&para;</a></h3> <p><div class="language-yaml highlight"><pre><span></span><code><span id=__span-110-1><span class=nt>contexts</span><span class=p>:</span>
</span><span id=__span-110-2><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-context</span>
</span><span id=__span-110-3><span class=w>  </span><span class=nt>context</span><span class=p>:</span>
</span><span id=__span-110-4><span class=w>    </span><span class=nt>cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
</span><span id=__span-110-5><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-110-6><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span></code></pre></div> â¡ï¸ <strong>Context ek shortcut hai</strong> jo batata hai ke: - Kaunsa <strong>cluster</strong> use ho raha hai. - Kaunsa <strong>user</strong> authenticate karega. - Kaunsa <strong>namespace</strong> default hoga.</p> <hr> <h3 id=4-current-context-active-cluster><strong>4ï¸âƒ£ Current Context (Active Cluster)</strong><a class=headerlink href=#4-current-context-active-cluster title="Link to this section">&para;</a></h3> <p><div class="language-yaml highlight"><pre><span></span><code><span id=__span-111-1><span class=nt>current-context</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-context</span>
</span></code></pre></div> â¡ï¸ Yeh batata hai ke <strong>abhi kaunsa cluster active hai</strong>.<br> â¡ï¸ Agar multiple clusters ho, to tum <code>kubectl config use-context</code> se switch kar sakte ho.</p> <hr> <h2 id=-kubeconfig-aur-api-server-ka-connection><strong>ğŸš€ Kubeconfig Aur API Server Ka Connection</strong><a class=headerlink href=#-kubeconfig-aur-api-server-ka-connection title="Link to this section">&para;</a></h2> <p>âœ… Jab bhi tum koi <strong>kubectl command</strong> chalate ho, jaise:<br> <div class="language-sh highlight"><pre><span></span><code><span id=__span-112-1>kubectl<span class=w> </span>get<span class=w> </span>pods
</span></code></pre></div> âœ… <code>kubectl</code> ye steps follow karta hai:</p> <ol> <li><strong>Kubeconfig file check karega</strong> </li> <li><code>~/.kube/config</code> ko read karega.</li> <li><code>current-context</code> dekhega.</li> <li> <p>Us <strong>context ke andar cluster ka API Server</strong> dhoondega.</p> </li> <li> <p><strong>API Server se Connection Establish Karega</strong> </p> </li> <li><code>server: https://192.168.1.100:6443</code> pe request bhejega.</li> <li> <p>TLS Certificate se <strong>secure connection verify</strong> karega.</p> </li> <li> <p><strong>Authentication &amp; Authorization Karega</strong> </p> </li> <li>User (<code>admin-user</code>) ke <strong>client certificate aur key</strong> check karega.</li> <li> <p>Agar user authorized hai, to query process hogi.</p> </li> <li> <p><strong>API Server Response Dega</strong> </p> </li> <li>API Server etcd se data fetch karega.</li> <li>Response return karega.</li> <li><code>kubectl</code> output print karega.</li> </ol> <hr> <h2 id=-real-world-example><strong>ğŸ”¥ Real-World Example</strong><a class=headerlink href=#-real-world-example title="Link to this section">&para;</a></h2> <p>Agar tumhari <strong>kubeconfig file delete ho jaye</strong>, to tum <code>kubectl</code> use nahi kar sakoge: <div class="language-sh highlight"><pre><span></span><code><span id=__span-113-1>mv<span class=w> </span>~/.kube/config<span class=w> </span>~/.kube/config.bak
</span><span id=__span-113-2>kubectl<span class=w> </span>get<span class=w> </span>pods
</span></code></pre></div> â¡ï¸ Output: <div class="language-text highlight"><pre><span></span><code><span id=__span-114-1>error: cannot find kubeconfig file
</span></code></pre></div> Matlab bina kubeconfig ke <code>kubectl</code> API Server se connect nahi kar sakta.</p> <p><strong>Solution:</strong> Tum manually API Server ka kubeconfig phir se fetch kar sakte ho.<br> Agar cluster <strong>kubeadm se bana hai</strong>, to: <div class="language-sh highlight"><pre><span></span><code><span id=__span-115-1>cp<span class=w> </span>/etc/kubernetes/admin.conf<span class=w> </span>~/.kube/config
</span></code></pre></div> Agar <strong>EKS cluster hai</strong>, to: <div class="language-sh highlight"><pre><span></span><code><span id=__span-116-1>aws<span class=w> </span>eks<span class=w> </span>update-kubeconfig<span class=w> </span>--region<span class=w> </span>us-east-1<span class=w> </span>--name<span class=w> </span>my-eks-cluster
</span></code></pre></div></p> <hr> <h2 id=-final-summary_3><strong>ğŸ” Final Summary</strong><a class=headerlink href=#-final-summary_3 title="Link to this section">&para;</a></h2> <p>âœ… <strong>Kubeconfig file ka kaam hai:</strong><br> - API Server ka address store karna<br> - Authentication &amp; authorization ke liye credentials rakhna<br> - Active cluster aur context ko define karna </p> <p>âœ… <strong>API Server ka role hai:</strong><br> - <code>kubectl</code> se requests receive karna<br> - Authentication &amp; authorization check karna<br> - <code>etcd</code> se data fetch karke response dena </p> <p>âœ… <strong>Jab tak kubeconfig file nahi hogi, kubectl API Server se connect nahi kar sakta.</strong></p> <hr> <p>Bro, ab koi confusion hai ya full clarity mil gayi? ğŸš€</p> <hr> <h1 id=architecture>Architecture<a class=headerlink href=#architecture title="Link to this section">&para;</a></h1> <p>Bro, <strong>Kubernetes Architecture</strong> ka <strong>end-to-end flow</strong> yahan explain kar raha hoon: </p> <hr> <h1 id=1-jab-tum-kubectl-run-karte-ho-kya-hota-hai><strong>1ï¸âƒ£ Jab Tum <code>kubectl</code> Run Karte Ho, Kya Hota Hai?</strong><a class=headerlink href=#1-jab-tum-kubectl-run-karte-ho-kya-hota-hai title="Link to this section">&para;</a></h1> <p>Let's say tum ye command run karte ho: <div class="language-sh highlight"><pre><span></span><code><span id=__span-117-1>kubectl<span class=w> </span>get<span class=w> </span>pods
</span></code></pre></div> â¡ï¸ Is command se <strong>kya-kya steps execute hote hain?</strong> </p> <ol> <li><strong><code>kubectl</code> -&gt; Kubeconfig</strong> </li> <li><code>kubectl</code> tumhari <strong>kubeconfig file (~/.kube/config)</strong> ko read karta hai.</li> <li>Ye file decide karti hai ke <strong>kaunsa API server access karna hai</strong> aur <strong>authentication kaise hogi</strong>. </li> <li> <p>Example: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-118-1><span class=nt>current-context</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
</span><span id=__span-118-2><span class=nt>clusters</span><span class=p>:</span>
</span><span id=__span-118-3><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>cluster</span><span class=p>:</span>
</span><span id=__span-118-4><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://API_SERVER_IP</span>
</span><span id=__span-118-5><span class=w>    </span><span class=nt>certificate-authority-data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LS0tLS1...</span>
</span><span id=__span-118-6><span class=nt>users</span><span class=p>:</span>
</span><span id=__span-118-7><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-user</span>
</span><span id=__span-118-8><span class=w>  </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-118-9><span class=w>    </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">abc123</span>
</span></code></pre></div></p> </li> <li> <p><strong><code>kubectl</code> -&gt; API Server</strong> </p> </li> <li><code>kubectl</code> <strong>API server (kube-apiserver) se request bhejta hai</strong>: <div class="language-text highlight"><pre><span></span><code><span id=__span-119-1>GET /api/v1/pods
</span></code></pre></div></li> <li> <p>Ye request <strong>authentication &amp; authorization</strong> se guzarti hai:</p> <ol> <li><strong>Authentication</strong> (<code>token</code>, <code>certificates</code>, ya <code>aws eks get-token</code>) </li> <li><strong>Authorization</strong> (RBAC roles check hoti hain) </li> <li><strong>Admission Controllers</strong> (Security policies validate hoti hain) </li> </ol> </li> <li> <p><strong>API Server -&gt; etcd (for Data Storage)</strong> </p> </li> <li>API Server <strong><code>etcd</code> se data fetch karta hai</strong>. </li> <li> <p><code>etcd</code> is like Kubernetes ka <strong>database</strong> jo sari cluster ki <strong>state store karta hai</strong> (pods, services, deployments). </p> </li> <li> <p><strong>API Server -&gt; Response to kubectl</strong> </p> </li> <li>API Server <strong>response return karta hai</strong>, aur tumhare terminal me pod ka output aata hai.</li> </ol> <hr> <h1 id=2-kubernetes-ke-architecture-components-pods><strong>2ï¸âƒ£ Kubernetes Ke Architecture Components (Pods)</strong><a class=headerlink href=#2-kubernetes-ke-architecture-components-pods title="Link to this section">&para;</a></h1> <p>âœ… <strong>Kubernetes Control Plane Components</strong><br> âœ… <strong>Kubernetes Worker Node Components</strong><br> âœ… <strong>Konse Components Sirf Control Plane Pe Hain?</strong><br> âœ… <strong>Konse Worker Nodes Pe Hain?</strong> </p> <h2 id=-control-plane-ke-components-only-on-control-plane-nodes><strong>ğŸ“Œ Control Plane Ke Components (Only on Control Plane Nodes)</strong><a class=headerlink href=#-control-plane-ke-components-only-on-control-plane-nodes title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th>Component</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><strong>kube-apiserver</strong></td> <td><strong>Sare cluster ka entry point</strong>, sabse important component.</td> </tr> <tr> <td><strong>etcd</strong></td> <td>Cluster ki <strong>state store</strong> karta hai (all objects).</td> </tr> <tr> <td><strong>kube-scheduler</strong></td> <td>Decide karta hai <strong>kaunsa pod kis node pe chalega</strong>.</td> </tr> <tr> <td><strong>kube-controller-manager</strong></td> <td><strong>Cluster controllers</strong> manage karta hai (ReplicaSet, Node, Endpoint, etc.).</td> </tr> </tbody> </table> <p>ğŸš€ <strong>Yeh sab components sirf Control Plane nodes pe run hotay hain.</strong><br> Run karne ka command: <div class="language-sh highlight"><pre><span></span><code><span id=__span-120-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span>-o<span class=w> </span>wide
</span></code></pre></div> Example output (Control Plane pods): <div class="language-text highlight"><pre><span></span><code><span id=__span-121-1>NAME                                      READY   STATUS    NODE
</span><span id=__span-121-2>etcd-master-node                          1/1     Running   master-node
</span><span id=__span-121-3>kube-apiserver-master-node                1/1     Running   master-node
</span><span id=__span-121-4>kube-controller-manager-master-node       1/1     Running   master-node
</span><span id=__span-121-5>kube-scheduler-master-node                1/1     Running   master-node
</span></code></pre></div></p> <hr> <h2 id=-worker-node-ke-components-only-on-worker-nodes><strong>ğŸ“Œ Worker Node Ke Components (Only on Worker Nodes)</strong><a class=headerlink href=#-worker-node-ke-components-only-on-worker-nodes title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th>Component</th> <th>Purpose</th> </tr> </thead> <tbody> <tr> <td><strong>kubelet</strong></td> <td>Worker node ka <strong>agent</strong>, jo API server se instructions leta hai.</td> </tr> <tr> <td><strong>kube-proxy</strong></td> <td><strong>Network communication manage</strong> karta hai.</td> </tr> <tr> <td><strong>Container Runtime</strong></td> <td>Pods run karne ke liye (Docker, containerd, CRI-O, etc.).</td> </tr> </tbody> </table> <p>ğŸš€ <strong>Yeh sab components sirf Worker Nodes pe hote hain.</strong><br> Example: <div class="language-text highlight"><pre><span></span><code><span id=__span-122-1>kubectl get pods -n kube-system -o wide
</span></code></pre></div> <div class="language-text highlight"><pre><span></span><code><span id=__span-123-1>kube-proxy-node-1                           1/1     Running   worker-node-1
</span><span id=__span-123-2>kube-proxy-node-2                           1/1     Running   worker-node-2
</span></code></pre></div></p> <hr> <h2 id=-konse-components-control-plane--worker-dono-pe-hote-hain><strong>ğŸ“Œ Konse Components Control Plane &amp; Worker Dono Pe Hote Hain?</strong><a class=headerlink href=#-konse-components-control-plane--worker-dono-pe-hote-hain title="Link to this section">&para;</a></h2> <p>âœ… <strong>CNI (Container Network Interface) Plugin</strong><br> - Agar tum <strong>Cilium, Calico, Flannel</strong> ya koi bhi networking plugin use kar rahe ho, to ye <strong>sare nodes pe chalega</strong>.<br> - Example: <div class="language-text highlight"><pre><span></span><code><span id=__span-124-1>cilium-agent-node-1                       1/1     Running   worker-node-1
</span><span id=__span-124-2>cilium-agent-node-2                       1/1     Running   worker-node-2
</span></code></pre></div></p> <p>âœ… <strong>Metrics Server (for Monitoring)</strong> - Agar tum <strong>metrics-server</strong> install karte ho to ye <strong>kisi bhi node pe run ho sakta hai</strong>.</p> <p>âœ… <strong>CoreDNS (for DNS Resolution)</strong> - Ye <strong>Control Plane nodes pe hota hai</strong>, lekin kabhi kabhi worker pe bhi deploy ho sakta hai.</p> <hr> <h1 id=3-cluster-me-kitne-pods-honge><strong>3ï¸âƒ£ Cluster Me Kitne Pods Honge?</strong><a class=headerlink href=#3-cluster-me-kitne-pods-honge title="Link to this section">&para;</a></h1> <p>Agar tumhare paas: - <strong>3 Control Plane nodes hain</strong> - <strong>5 Worker nodes hain</strong></p> <p>To total pods honge:</p> <table> <thead> <tr> <th>Component</th> <th>Control Plane</th> <th>Worker Nodes</th> <th>Total Pods</th> </tr> </thead> <tbody> <tr> <td><strong>kube-apiserver</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td>3</td> </tr> <tr> <td><strong>etcd</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td>3</td> </tr> <tr> <td><strong>kube-scheduler</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td>3</td> </tr> <tr> <td><strong>kube-controller-manager</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td>3</td> </tr> <tr> <td><strong>kubelet</strong></td> <td>âœ… (3x)</td> <td>âœ… (5x)</td> <td>8</td> </tr> <tr> <td><strong>kube-proxy</strong></td> <td>âŒ (0)</td> <td>âœ… (5x)</td> <td>5</td> </tr> <tr> <td><strong>CNI Plugin</strong></td> <td>âœ… (3x)</td> <td>âœ… (5x)</td> <td>8</td> </tr> <tr> <td><strong>CoreDNS</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td>3</td> </tr> <tr> <td><strong>Metrics Server (optional)</strong></td> <td>âœ… (3x)</td> <td>âœ… (5x)</td> <td>8</td> </tr> </tbody> </table> <p>ğŸ”¹ <strong>Total Pods: ~41 (depending on setup)</strong></p> <hr> <h1 id=4-kubelet-kis-jagah-fit-hota-hai><strong>4ï¸âƒ£ <code>kubelet</code> Kis Jagah Fit Hota Hai?</strong><a class=headerlink href=#4-kubelet-kis-jagah-fit-hota-hai title="Link to this section">&para;</a></h1> <h2 id=-kya-kubelet-ka-koi-pod-hota-hai><strong>â“ Kya <code>kubelet</code> ka koi pod hota hai?</strong><a class=headerlink href=#-kya-kubelet-ka-koi-pod-hota-hai title="Link to this section">&para;</a></h2> <p><strong>Nahi!</strong><br> - <code>kubelet</code> <strong>ek system-level process hai</strong>, jo <strong>har node pe run hota hai</strong>, <strong>kisi pod ke andar nahi hota</strong>.<br> - Check karne ke liye: <div class="language-sh highlight"><pre><span></span><code><span id=__span-125-1>ps<span class=w> </span>aux<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kubelet
</span></code></pre></div> Example: <div class="language-text highlight"><pre><span></span><code><span id=__span-126-1>root       1456  2.0  1.2  185400  56732 ?  Ssl  10:32   2:13 /usr/bin/kubelet --config=/var/lib/kubelet/config.yaml
</span></code></pre></div></p> <h2 id=-kubelet-ka-kaam-kya-hai><strong>ğŸ›  <code>kubelet</code> ka Kaam Kya Hai?</strong><a class=headerlink href=#-kubelet-ka-kaam-kya-hai title="Link to this section">&para;</a></h2> <ul> <li>Ye <strong>worker node ka agent</strong> hai.</li> <li>Ye <strong>API server se instructions leta hai</strong> aur ensure karta hai ke required pods run ho rahe hain.</li> <li><strong>Jab tum <code>kubectl apply -f pod.yaml</code> chalate ho:</strong></li> <li><code>kubectl</code> API server se baat karta hai.</li> <li>API server <code>etcd</code> me entry store karta hai.</li> <li>Kube-scheduler <strong>decide karta hai kaunsa node assign hoga</strong>.</li> <li><code>kubelet</code> us node pe pod start karne ka process initiate karta hai.</li> </ul> <h2 id=-kubelet-vs-api-server><strong>ğŸ”„ <code>kubelet</code> vs API Server</strong><a class=headerlink href=#-kubelet-vs-api-server title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th>Feature</th> <th>API Server</th> <th>Kubelet</th> </tr> </thead> <tbody> <tr> <td><strong>Location</strong></td> <td>Sirf Control Plane Nodes</td> <td>Worker + Control Plane Nodes</td> </tr> <tr> <td><strong>Role</strong></td> <td>Cluster ki state manage karta hai</td> <td>Individual node ka manager</td> </tr> <tr> <td><strong>Interacts With</strong></td> <td><code>etcd</code>, controllers, schedulers</td> <td>Container runtime, pod execution</td> </tr> <tr> <td><strong>Communication</strong></td> <td>Accepts requests via <code>kubectl</code></td> <td>Talks to API Server via <code>watch</code></td> </tr> </tbody> </table> <hr> <h1 id=-summary_2><strong>ğŸ”¥ Summary</strong><a class=headerlink href=#-summary_2 title="Link to this section">&para;</a></h1> <p>âœ… <code>kubectl</code> command <strong>API Server se request bhejta hai</strong>, jo <strong>etcd se data fetch karta hai</strong>.<br> âœ… Control Plane pe <strong>API Server, etcd, Scheduler, Controller Manager hote hain</strong>.<br> âœ… Worker nodes pe <strong>kubelet, kube-proxy, aur Container Runtime hota hai</strong>.<br> âœ… <code>kubelet</code> <strong>pod nahi hai</strong>, balki ek system process hai, jo har node pe chalta hai.<br> âœ… Cluster size pe depend karta hai ke <strong>kitne pods run honge</strong>.</p> <p>Ab samajh aaya? Koi aur sawal hai to batao bro! ğŸš€</p> <hr> <p>Bro, <strong>woh galti thi!</strong> <strong><code>kubelet</code> ka koi pod nahi hota</strong>, ye <strong>ek system-level process hai</strong>, jo har node pe <strong>as a service run karta hai</strong>. </p> <p>Table mein maine <strong>galti se kubelet ko pods ke count mein likh diya tha</strong>, jo incorrect tha. Correction yeh hai: </p> <table> <thead> <tr> <th>Component</th> <th>Control Plane</th> <th>Worker Nodes</th> <th><strong>Total Pods</strong></th> </tr> </thead> <tbody> <tr> <td><strong>kube-apiserver</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td><strong>3</strong></td> </tr> <tr> <td><strong>etcd</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td><strong>3</strong></td> </tr> <tr> <td><strong>kube-scheduler</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td><strong>3</strong></td> </tr> <tr> <td><strong>kube-controller-manager</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td><strong>3</strong></td> </tr> <tr> <td><strong>kube-proxy</strong></td> <td>âŒ (0)</td> <td>âœ… (5x)</td> <td><strong>5</strong></td> </tr> <tr> <td><strong>CNI Plugin</strong></td> <td>âœ… (3x)</td> <td>âœ… (5x)</td> <td><strong>8</strong></td> </tr> <tr> <td><strong>CoreDNS</strong></td> <td>âœ… (3x)</td> <td>âŒ (0)</td> <td><strong>3</strong></td> </tr> <tr> <td><strong>Metrics Server (optional)</strong></td> <td>âœ… (3x)</td> <td>âœ… (5x)</td> <td><strong>8</strong></td> </tr> <tr> <td><strong>kubelet</strong></td> <td>ğŸš« (Process)</td> <td>ğŸš« (Process)</td> <td>ğŸš« (No Pod)</td> </tr> </tbody> </table> <h3 id=-correction><strong>ğŸ”¥ Correction:</strong><a class=headerlink href=#-correction title="Link to this section">&para;</a></h3> <p>ğŸš€ <strong><code>kubelet</code> ek process hai, pod nahi!</strong><br> ğŸš€ <strong>Har node pe ek <code>kubelet</code> process run karta hai, par ye kisi pod ke andar nahi hota.</strong> </p> <p>Tera spot-on observation tha! Mazaa aaya! ğŸ”¥ Koi aur question ho to batao. ğŸš€</p> <hr> <h3 id=-coredns-ke-pods-kab-bante-hain><strong>ğŸ”¥ CoreDNS ke Pods Kab Bante Hain?</strong><a class=headerlink href=#-coredns-ke-pods-kab-bante-hain title="Link to this section">&para;</a></h3> <p>Jab <strong>Kubernetes cluster create hota hai</strong>, tab <strong>CoreDNS ke pods automatically bante hain</strong>, magar sirf <strong>tab jab cluster ke liye DNS service enable ho</strong>. </p> <p>Ye <strong>kubeadm, Minikube, Kind, EKS, GKE, AKS sab me default hota hai</strong>, jab tak explicitly disable na kiya ho. </p> <hr> <h3 id=-coredns-running-pe-lany-ke-liye-kya-chahiye><strong>âœ… CoreDNS Running Pe Lany Ke Liye Kya Chahiye?</strong><a class=headerlink href=#-coredns-running-pe-lany-ke-liye-kya-chahiye title="Link to this section">&para;</a></h3> <p>Agar <strong>CoreDNS run nahi ho raha</strong>, to <strong>ye cheezein check karni chahiye:</strong> </p> <ol> <li> <p><strong>Kube-Proxy theek chal raha ho</strong> (kyunki ye DNS requests ko route karta hai).<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-127-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kube-proxy
</span></code></pre></div> âœ… <strong>Har node pe ek <code>kube-proxy</code> pod run hona chahiye.</strong> </p> </li> <li> <p><strong>CNI Plugin sahi se install ho</strong> (Networking ke bina CoreDNS communicate nahi karega).<br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-128-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>calico<span class=w>  </span><span class=c1># ya jo bhi CNI ho</span>
</span></code></pre></div> âœ… <strong>CNI Plugin ke pods running hone chahiye.</strong> </p> </li> <li> <p><strong>CoreDNS ka ConfigMap theek ho</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-129-1>kubectl<span class=w> </span>get<span class=w> </span>cm<span class=w> </span>-n<span class=w> </span>kube-system
</span></code></pre></div> âœ… <strong>Isme <code>coredns</code> ka ConfigMap hona chahiye.</strong> </p> </li> <li> <p><strong>Cluster ka DNS Service Running ho</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-130-1>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kube-dns
</span></code></pre></div> âœ… <strong><code>kube-dns</code> service exist karni chahiye.</strong> </p> </li> </ol> <hr> <h3 id=-coredns-ek-alag-pod-hai-ya-koi-aur-component-isko-banata-hai><strong>ğŸ” CoreDNS Ek Alag Pod Hai, Ya Koi Aur Component Isko Banata Hai?</strong><a class=headerlink href=#-coredns-ek-alag-pod-hai-ya-koi-aur-component-isko-banata-hai title="Link to this section">&para;</a></h3> <ul> <li><strong>CoreDNS ka pod alag se exist karta hai</strong>, magar ye <strong>kube-controller-manager</strong> ke under <strong>Deployment</strong> ke Ø·ÙˆØ± Ù¾Ø± create hota hai. </li> <li><strong>Yeh ek <code>Deployment</code> hota hai, na ke static pod.</strong> </li> <li><strong>Kubeadm, Minikube, Kind, aur Managed Kubernetes services automatically isko deploy karte hain.</strong> </li> </ul> <hr> <h3 id=-coredns-pods-dekhne-ka-tarika><strong>ğŸ‘€ CoreDNS Pods Dekhne ka Tarika</strong><a class=headerlink href=#-coredns-pods-dekhne-ka-tarika title="Link to this section">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-131-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>coredns
</span></code></pre></div> âœ… <strong>Example Output:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-132-1>coredns-123abc   Running   1/1   15m
</span><span id=__span-132-2>coredns-456def   Running   1/1   15m
</span></code></pre></div> ğŸ‘‰ <strong>Usually 2 CoreDNS pods hote hain</strong> (high availability ke liye). </p> <hr> <h3 id=-agar-coredns-nahi-chal-raha-to-fix-karne-ka-tarika><strong>ğŸ› ï¸ Agar CoreDNS Nahi Chal Raha, To Fix Karne Ka Tarika</strong><a class=headerlink href=#-agar-coredns-nahi-chal-raha-to-fix-karne-ka-tarika title="Link to this section">&para;</a></h3> <p>1ï¸âƒ£ <strong>CNI Plugin check karo</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-133-1>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>calico<span class=w>  </span><span class=c1># ya jo bhi CNI ho</span>
</span></code></pre></div> âœ… <strong>Agar ye nahi chal raha, to networking ka masla hai.</strong> </p> <p>2ï¸âƒ£ <strong>CoreDNS Deployment check karo</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-134-1>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>coredns
</span></code></pre></div> âœ… <strong>Agar ye missing hai, to manually deploy karna hoga:</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-135-1>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/kubernetes/kubernetes/master/cluster/addons/dns/coredns/coredns.yaml
</span></code></pre></div></p> <p>3ï¸âƒ£ <strong>DNS Service check karo</strong><br> <div class="language-bash highlight"><pre><span></span><code><span id=__span-136-1>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kube-dns
</span></code></pre></div> âœ… <strong>Agar missing hai, to CoreDNS ka service deploy karo.</strong> </p> <hr> <h3 id=-bottom-line><strong>ğŸ”¥ Bottom Line</strong><a class=headerlink href=#-bottom-line title="Link to this section">&para;</a></h3> <ol> <li><strong>CoreDNS cluster create hone pe auto deploy hota hai</strong>. </li> <li><strong>Yeh ek Deployment hota hai, static pod nahi</strong>. </li> <li><strong>Agar network ya kube-proxy sahi nahi chal raha, to ye fail ho sakta hai</strong>. </li> <li><strong>Agar chal nahi raha, to CNI, ConfigMap, aur kube-proxy check karna zaroori hai</strong>. </li> </ol> <p><strong>Samajh aaya? ğŸ˜ Ya aur deep dive chahiye?</strong> ğŸš€</p> <hr> <p>Bohat zabardast question kiya hai! <strong>Kubernetes ke andar kon se pods Deployment ke results hain aur kon se Static Pods hain</strong>, ye samajhna architecture ko deeply samajhne ke liye bohat zaroori hai. </p> <hr> <h2 id=-static-pods-vs-deployment-pods-in-kubernetes><strong>ğŸ”¥ Static Pods vs. Deployment Pods in Kubernetes</strong><a class=headerlink href=#-static-pods-vs-deployment-pods-in-kubernetes title="Link to this section">&para;</a></h2> <ul> <li><strong>Static Pods:</strong> Yeh <strong>directly Kubelet manage karta hai</strong>, aur yeh <strong>kubectl apply ya Deployment se control nahi hotay</strong>. </li> <li><strong>Deployment Pods:</strong> Yeh <strong>kube-controller-manager ke under control hotay hain</strong>, aur <strong>kubectl apply ya helm se manage hote hain</strong>. </li> </ul> <hr> <h2 id=-control-plane-ke-components--unke-pods><strong>ğŸ¤– Control Plane ke Components &amp; Unke Pods</strong><a class=headerlink href=#-control-plane-ke-components--unke-pods title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th><strong>Component</strong></th> <th><strong>Pod Type</strong></th> <th><strong>Kahan Run Hota Hai?</strong></th> <th><strong>Pod/Deployment Name</strong></th> </tr> </thead> <tbody> <tr> <td>API Server</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-apiserver</code></td> </tr> <tr> <td>Controller Manager</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-controller-manager</code></td> </tr> <tr> <td>Scheduler</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-scheduler</code></td> </tr> <tr> <td>etcd</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>etcd</code></td> </tr> <tr> <td>CoreDNS</td> <td><strong>Deployment</strong></td> <td><strong>Control Plane &amp; Worker Nodes</strong></td> <td><code>coredns</code></td> </tr> <tr> <td>Kube Proxy</td> <td><strong>DaemonSet (Deployment-like behavior)</strong></td> <td><strong>All Nodes</strong></td> <td><code>kube-proxy</code></td> </tr> </tbody> </table> <p>âœ… <strong>Control Plane me sirf 4 static pods hain:</strong><br> - <code>kube-apiserver</code><br> - <code>kube-controller-manager</code><br> - <code>kube-scheduler</code><br> - <code>etcd</code> </p> <p>ğŸ’¡ <strong>Baqi sab deployments ya DaemonSet hote hain!</strong> </p> <hr> <h2 id=-worker-nodes-ke-components--unke-pods><strong>âš¡ Worker Nodes ke Components &amp; Unke Pods</strong><a class=headerlink href=#-worker-nodes-ke-components--unke-pods title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th><strong>Component</strong></th> <th><strong>Pod Type</strong></th> <th><strong>Kahan Run Hota Hai?</strong></th> <th><strong>Pod/Deployment Name</strong></th> </tr> </thead> <tbody> <tr> <td>Kubelet</td> <td><strong>Process (Not a Pod)</strong></td> <td><strong>All Worker Nodes</strong></td> <td>âŒ (No pod, it's a system service)</td> </tr> <tr> <td>Kube Proxy</td> <td><strong>DaemonSet</strong></td> <td><strong>All Nodes (Control + Worker)</strong></td> <td><code>kube-proxy</code></td> </tr> <tr> <td>CNI Plugin</td> <td><strong>DaemonSet</strong></td> <td><strong>All Worker Nodes</strong></td> <td><code>calico-node</code> / <code>flannel</code> / <code>weave</code> etc.</td> </tr> <tr> <td>User Pods (Apps)</td> <td><strong>Deployment / StatefulSet / DaemonSet</strong></td> <td><strong>Worker Nodes</strong></td> <td><code>nginx</code>, <code>redis</code>, etc.</td> </tr> </tbody> </table> <p>âœ… <strong>Worker nodes me sirf ek process hota hai jo pod nahi hota â†’ Kubelet</strong>.<br> âœ… <strong>CNI Plugin aur kube-proxy DaemonSet hote hain jo har node pe run hotay hain</strong>.<br> âœ… <strong>User applications sirf Worker Nodes pe run hoti hain (unless explicitly control plane pe deploy karein).</strong> </p> <hr> <h2 id=-summary_3><strong>ğŸ”¥ Summary</strong><a class=headerlink href=#-summary_3 title="Link to this section">&para;</a></h2> <ul> <li><strong>Static Pods sirf Control Plane pe hotay hain</strong>, aur Kubelet inko <code>/etc/kubernetes/manifests/</code> se uthata hai. </li> <li><strong>Deployment wale pods Control + Worker dono pe ho sakte hain</strong>, lekin inko <code>kube-controller-manager</code> manage karta hai. </li> <li><strong>Kubelet ek system process hai, pod nahi</strong>. </li> <li><strong>Worker nodes sirf CNI, kube-proxy, aur user applications chalate hain</strong>. </li> </ul> <p>ğŸ’¡ <strong>Agar cluster me 3 control plane nodes aur 5 worker nodes hain, to kitne total system pods chalain gay?</strong> ğŸ˜</p> <hr> <p>Tumhara doubt valid hai! <strong>Kya kube-proxy sirf worker nodes pe chalta hai ya control plane pe bhi?</strong> Yeh confusion aksar hoti hai, aur iska jawab <strong>cluster ke setup</strong> per depend karta hai. </p> <hr> <h2 id=-kya-kube-proxy-sirf-worker-nodes-pe-chalta-hai><strong>ğŸ”¥ Kya kube-proxy sirf Worker Nodes pe chalta hai?</strong><a class=headerlink href=#-kya-kube-proxy-sirf-worker-nodes-pe-chalta-hai title="Link to this section">&para;</a></h2> <p>ğŸ’¡ <strong>Default Kubernetes Cluster Setup</strong>:<br> âœ… <strong>kube-proxy har node pe chalta hai</strong>, <strong>chahe wo control plane ho ya worker node</strong>. <br> âœ… <strong>Yeh ek DaemonSet hota hai</strong>, jo <strong>sabhi nodes pe ek pod schedule karta hai</strong>. </p> <h3 id=-agar-kube-proxy-sirf-worker-nodes-pe-ho-to-problem-kya-hogi><strong>âŒ Agar kube-proxy sirf worker nodes pe ho, to problem kya hogi?</strong><a class=headerlink href=#-agar-kube-proxy-sirf-worker-nodes-pe-ho-to-problem-kya-hogi title="Link to this section">&para;</a></h3> <ul> <li>Agar control plane nodes pe kube-proxy na ho, to <strong>control plane se kisi service ka access mushkil ho sakta hai</strong>. </li> <li>Example: <strong>Agar API server kisi service ko call kare jo worker nodes pe chal rahi hai, to uska connection masla karega.</strong> </li> </ul> <h3 id=-kya-aisa-setup-ho-sakta-hai-jisme-kube-proxy-sirf-worker-nodes-pe-ho><strong>âœ… Kya aisa setup ho sakta hai jisme kube-proxy sirf worker nodes pe ho?</strong><a class=headerlink href=#-kya-aisa-setup-ho-sakta-hai-jisme-kube-proxy-sirf-worker-nodes-pe-ho title="Link to this section">&para;</a></h3> <ul> <li>Agar <strong>taqreeban sabhi workloads sirf worker nodes pe hain</strong>, aur <strong>Control Plane nodes sirf management ke liye hain</strong>, to kube-proxy <strong>sirf worker nodes pe deploy kiya ja sakta hai</strong>. </li> <li><strong>Manually taqreeban har CNI plugin me ye setting hoti hai</strong> jisse kube-proxy sirf worker nodes pe chalaya ja sakta hai. </li> </ul> <hr> <h2 id=-table-fix><strong>ğŸ”¥ Table Fix</strong><a class=headerlink href=#-table-fix title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th><strong>Component</strong></th> <th><strong>Pod Type</strong></th> <th><strong>Kahan Run Hota Hai? (Default)</strong></th> <th><strong>Pod/Deployment Name</strong></th> </tr> </thead> <tbody> <tr> <td>API Server</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-apiserver</code></td> </tr> <tr> <td>Controller Manager</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-controller-manager</code></td> </tr> <tr> <td>Scheduler</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>kube-scheduler</code></td> </tr> <tr> <td>etcd</td> <td><strong>Static Pod</strong></td> <td><strong>Control Plane Nodes Only</strong></td> <td><code>etcd</code></td> </tr> <tr> <td>CoreDNS</td> <td><strong>Deployment</strong></td> <td><strong>Control Plane &amp; Worker Nodes</strong></td> <td><code>coredns</code></td> </tr> <tr> <td>Kube Proxy</td> <td><strong>DaemonSet</strong></td> <td><strong>All Nodes (Control + Worker)</strong></td> <td><code>kube-proxy</code></td> </tr> </tbody> </table> <p>âœ… <strong>By default, kube-proxy control plane + worker nodes dono pe hota hai.</strong><br> âœ… <strong>Agar sirf worker nodes pe chahiye, to DaemonSet ki NodeSelector ya Taints ka use karna padega.</strong> </p> <hr> <h2 id=-final-answer><strong>ğŸ”¥ Final Answer</strong><a class=headerlink href=#-final-answer title="Link to this section">&para;</a></h2> <p>Tumhari soch bilkul sahi thi! <strong>kube-proxy sirf worker nodes pe bhi ho sakta hai</strong>, lekin <strong>by default har node pe hota hai, including control plane</strong>. ğŸ˜</p> <hr> <p>Follow me on LinkedIn: www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=ibtisam-iq </p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../k8s/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Kubernetes Notes"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Kubernetes Notes </div> </div> </a> <a href=../question-bank/ class="md-footer__link md-footer__link--next" aria-label="Next: Question Bank"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Question Bank </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 <a href=https://www.linkedin.com/in/ibtisam-iq/ target=_blank rel=noopener>Muhammad Ibtisam</a>. All rights reserved. </div> </div> <div class=md-social> <a href=https://www.credly.com/users/ibtisam-iq/badges#credly target=_blank rel=noopener title="View my Credly badges" class=md-social__link> <?xml version="1.0" encoding="utf-8"?> <svg width=800px height=800px viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <circle cx=512 cy=512 r=512 style=fill:#f36c21 /> <path style=fill:#fff d="M671.2 371.6h3c3.7.3 7.4 2.1 9.7 5 3.4 4.2 4.3 9.8 4.6 15.1.8 16.1-2.7 32.1-7.3 47.5-5.9 20.4-14.2 40-21 60.1-1.2 3.5-2.4 7.1-3.3 10.7-1.5 6-1.3 12.3-1.5 18.5-.2 5.8.2 11.6 1.3 17.3.6 3.1 1.9 6.4 4.3 8.6 2.2 2 5.4 2.9 8.3 2 3.9-1.2 7-4.2 9.8-7.1 3.9-4.3 7.6-8.7 10.3-13.8 3.8-6.8 6-14.3 7.1-22 1.5-11.6 2.7-23.4 6.9-34.4 1.6-4.2 3.6-8.5 7.4-11.1 5.1-3.6 12.8-2.1 16.7 2.7 1.9 2.4 2.4 5.5 2.4 8.4-.2 3.9-1 7.8-2.3 11.5-4.5 13.2-7.1 27.1-6.6 41.1.1 3.2.4 6.6 2.1 9.5 1.4 2.4 3.8 4.3 6.6 4.3 3.2 0 6-1.9 8-4.2 3.1-3.5 5.6-7.5 7.6-11.7 4-8.5 5.9-17.8 7.6-27 1.4-7.8 2.8-15.6 5-23.2 1.2-3.9 2.7-7.8 5.6-10.8 1.9-2.1 4.8-2.9 7.5-2.9 2.8.1 5.4 1.7 7.3 3.8 2.6 2.9 3.1 6.9 2.8 10.6-2.8 22.1-5.9 44.2-8.4 66.3-1.8 13.8-3.4 27.6-4.6 41.4-.1 1.5 1.7 2.4 2.7 1.4 7.2-6.9 14.3-14.1 19.7-22.5 2.5-3.8 4.3-7.9 6.7-11.7 1-1.7 2.2-3.4 4.1-4 2.9-1.4 6.6-1 9.1 1 1.9 1.4 2.9 3.7 3.2 6v2.7c-.6 4.6-3.3 8.5-5.3 12.5-5.5 11-13.1 21-22.6 28.9-6.8 5.8-14.8 10.2-23.2 13.2-.5.2-1.3.3-1.4 1-3.1 12.7-10 24.4-19.3 33.5-10.3 10.2-23.6 17.2-37.7 20.5-7.7 1.7-15.8 2.4-23.6 1-8-1.5-15.8-5.2-21.5-11-5.2-5.2-8.7-12.1-9.3-19.5-.6-6.7 1.1-13.5 4.3-19.4 3.7-6.7 9.3-12.3 15.9-16.2 6.3-3.8 13.5-5.6 20.6-6.5 8.1-.9 16.4-.9 24.6-.2 5.1.4 10.2.9 15.3 1.3 2.8.2 5.9 1.2 8.6-.2 1.9-.9 2.5-3.2 2.8-5.1 1.2-9 3-18.1 1.9-27.3-.2-1.2-.5-3-2-3.1-1.8.8-2.7 2.7-3.7 4.3-3.1 6-8.9 10.6-15.6 11.9-6.7 1.3-14-2.1-17.1-8.1-1.5-2.5-2.2-5.5-4.4-7.6-1.5-1.4-3.7-1.4-5.5-.6-3.2 1.4-5.3 4.3-7.9 6.5-6.8 6.1-15.4 10.7-24.7 11.2-10.8.7-21.9-5.4-26.4-15.4-.6-1.4-1.1-3.4-2.9-3.6-2-.3-3.5 1.3-4.6 2.7-5.3 6.7-10.3 13.9-17.3 18.9-4.5 3.2-9.9 5.4-15.5 5.3-5.9-.1-11.8-3.3-14.6-8.5-1.3-2.3-1.8-5.2-3.9-7-1.6-1.4-4.1-1.2-5.8-.1-2.6 1.5-4.1 4.2-6.2 6.3-5.8 5.8-14.2 8.7-22.3 7.9-9.8-1-18.7-7.8-22.3-17-.5-1.3-1.2-2.8-2.6-3.2-1.1-.4-2 .4-2.7 1.1-5.4 5-10.8 10.1-17.3 13.6-6.6 3.5-13.9 5.8-21.4 5.6-7.9.1-15.8-2.3-22.2-6.8-5.4-3.7-9.7-8.9-12.2-15-.7-1.6-1.6-3.4-3.4-3.8-1.6-.4-3 .8-3.9 2-2.7 3.8-6.2 7.1-10.1 9.6-6 3.9-13 6.6-20.3 6.6-5.6 0-11.2-2.1-15.2-6-4.3-4.2-6.6-10.1-7.5-16-1.1-7.7.5-15.5 2.7-22.8 1.4-4.8 3.2-9.4 4.3-14.3.6-2.5.8-5.2-.3-7.5-.9-1.8-2.8-2.9-4.6-3.7-2-.8-4.1.3-5.5 1.6-1.4 1.3-2.1 3-2.9 4.7-4.9 11.8-11.5 22.9-19.6 32.8-7.8 9.6-17.1 17.9-27.1 25.2-11.4 8.1-24.5 14-38.4 15.9-10.1 1.4-20.6.6-30.4-2.3-5.8-1.7-11.5-4.1-16.5-7.6-8.6-6-15.5-14.3-20.4-23.5-3.8-7.1-6.7-14.7-8.8-22.5-2.9-11.1-3.9-22.5-4.4-33.9v-7.8c.2-8.4 1-16.8 2.7-25 3-14.9 8.4-29.2 15.7-42.5 5.8-10.4 12.7-20.2 21.4-28.3 9.5-8.9 21-15.8 33.7-18.6 12.1-2.7 25.1-2 36.4 3.2 3.4 1.5 6.4 3.7 10 4.8 2.5.8 5.4.5 7.5-1.1 3.2-2.5 4.7-6.5 7.4-9.5 3.4-3.7 8.9-5.2 13.7-3.8 4.5 1.3 8 5.2 9.1 9.7.7 3 .3 6.1-.6 9-1.4 4.1-3.7 7.8-5.9 11.5-7.3 12.6-12.8 26.2-16.3 40.3-1.1 4.3-2 8.8-3.7 12.9-1.6 3.9-4.1 7.6-7.7 10-3.1 2.1-7.2 3.1-10.9 2-3.4-1-6-3.8-7.4-7-1.6-3.4-2.1-7.3-1.6-11.1 1-8.9 5.9-17 6.1-26.1.2-5.1-1.5-10.4-5.5-13.7-5.6-4.8-13.5-6.1-20.6-5.1-8.4 1.1-16.3 5.1-22.5 10.8-6.7 6.2-11.7 14-15.7 22.1-11.6 23.2-16.7 49.8-13.7 75.6 1 8.4 3 16.8 7 24.4 2.5 4.8 5.8 9.1 9.9 12.5 5.3 4.4 11.7 7.4 18.5 8.7 9.7 1.9 19.9.6 29-2.9 12.2-4.7 22.8-13.1 31.2-23 4.5-5.1 8.4-10.7 12.2-16.4 3.8-5.3 7.8-10.9 9.3-17.4 1-4.3.1-8.7-.9-12.9-.7-5.8 1.5-11.7 5.3-16 2.4-2.5 5.4-4.8 8.9-5.5 3.3-.6 7 0 9.8 2.1 3.1 2.2 4.7 6.4 3.6 10.1-.7 2.4-1.5 4.9-.8 7.4.7 2.1 2.8 3.4 4.9 3.5 4.8.4 9.8-.5 14.4 1.1 5.4 2.1 10.2 6.4 12 12.1 1.2 3.8 1.6 8.1.4 11.9-2.1 7.4-4.7 14.7-6.1 22.3-.4 2.5-.8 5.1-.1 7.6.4 1.8 2 3.4 3.9 3.5 3.3.3 6.3-1.5 8.6-3.7 4.7-4.7 7.8-10.7 10-16.9 2.7-7.5 4.1-15.4 6.1-23.1 2.1-7.9 5.3-15.6 10.3-22.1 7.4-9.8 19.4-16.1 31.8-15.8 6.9.1 13.7 2.8 18.6 7.8 4.1 4.2 6.3 9.9 7.2 15.7 1.5 9.8-.3 20.1-4.8 29-6.2 12.2-18.9 20.9-32.6 22-2 .2-4.3.1-5.8 1.6-1.3 1.3-1.2 3.3-1 5 .5 4.6 2 9.3 5.1 12.9 3.6 3.7 9 6.3 14.3 5.1 6.1-1.3 11.3-5.2 15.6-9.4 4.1-4.1 7.7-8.7 11-13.5 4.6-6.6 7.4-14.2 10.2-21.6 2.7-7.3 5.2-14.7 9.7-21.1 3.6-5.4 8.3-10.1 13.9-13.5 6.2-3.9 13.6-5.9 21-5.5 2.3.1 4.9.2 6.8-1.2 1.7-1.3 2.3-3.6 2.3-5.7 0-3.8.4-7.5.7-11.3.5-5.9 1-11.8 1.8-17.6 1.7-14.6 4.7-29 8.6-43.1 2-7.1 4.6-14.3 9.1-20.3 1.9-2.7 4.2-5.3 7.2-6.9 2.9-1.7 6.6-1.6 9.7-.7 4 1.2 6.6 5 8.2 8.6 2.9 7.1 2.1 15 1.5 22.5-.8 11.8-3.6 23.4-6 35-2.1 10.2-3.8 20.5-5.7 30.7-2.6 14-5.1 28.1-7.7 42.1-2.2 11.5-4.7 23.2-3.3 35 .4 3.1.8 6.5 2.9 8.9 1.5 1.7 4 2.1 6 1.4 2.7-.9 4.6-3.3 6-5.7 3.3-5.6 6.2-11.5 9.1-17.4 4.2-8.2 8.4-16.7 9.8-25.9 2.2-14 3.7-28.2 5.7-42.3 1.6-10.5 3.4-21 5.1-31.4 2.1-13.1 4.5-26.1 8.2-38.8 1.8-6 4.2-11.9 8.4-16.6 3.8-3.8 8.3-6.5 13.3-7zM478 487.8c-2 .6-3.6 2.2-4.9 3.8-2.9 3.7-5.1 7.9-6.6 12.4-1.6 4.8-3.1 9.8-2.5 14.8.1 1.5 1.6 2.6 3 2.6 2.7.1 5.1-1.4 7.2-3 4.7-3.3 7.7-8.4 9.8-13.6 1.3-3.3 2.2-6.9 1.9-10.5-.2-2.4-1.4-4.9-3.5-6.1-1.3-.8-3-.9-4.4-.4zm85.7 11.2c-5.6 1-10.6 4.3-14.2 8.7-3.9 4.7-6.6 10.4-8 16.4-2.1 8.5-2.3 17.5 0 26 .7 2.6 1.9 5.2 3.9 7.1 1.3 1.3 3.1 2 4.9 2.1 4.7.7 9.1-1.9 12.7-4.6 4.5-3.3 7.4-8.2 9.2-13.4 1.1-3.2.4-6.6.1-9.9-.5-6.7-.5-13.4-.1-20.1.1-2.3.8-4.5.8-6.8 0-1.8-.7-3.8-2.4-4.8-2.1-1.3-4.6-1.1-6.9-.7zm133.7 119.6c-4.8.3-9.6 1.3-14.1 3.2-4.9 2-9.1 5.7-11.2 10.5-1.4 3-2 6.6-.5 9.6 1.5 3.1 4.3 5.4 7.4 6.8 4.3 1.9 9.1 2.2 13.6 1.7 14.2-1.6 27.7-8.9 36.7-20 1.8-2.2 3.2-4.7 4.7-7.1.4-.8 1-2.1.1-2.8-1.1-.8-2.5-.5-3.7-.5-5.1-.3-10.2-.8-15.3-1-5.9-.3-11.8-.8-17.7-.4z"/> </svg> </a> <a href=https://www.linkedin.com/in/ibtisam-iq/ target=_blank rel=noopener title="Connect with me on LinkedIn" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/ibtisam-iq target=_blank rel=noopener title="Follow me on GitHub" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://hub.docker.com/u/mibtisam target=_blank rel=noopener title="View my Docker Hub repositories" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg> </a> <a href=https://ibtisam-iq.com target=_blank rel=noopener title="Visit my personal website" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs.sticky", "navigation.path", "navigation.prune", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.tabs.link", "content.tooltips"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>